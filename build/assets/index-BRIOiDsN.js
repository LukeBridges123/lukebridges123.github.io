function dv(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function pv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ef={exports:{}},Xo={},tf={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function dk(){if(Kg)return Be;Kg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=g&&T[g]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function b(T,_,ge){this.props=T,this.context=_,this.refs=k,this.updater=ge||w}b.prototype.isReactComponent={},b.prototype.setState=function(T,_){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,_,"setState")},b.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function A(){}A.prototype=b.prototype;function N(T,_,ge){this.props=T,this.context=_,this.refs=k,this.updater=ge||w}var z=N.prototype=new A;z.constructor=N,S(z,b.prototype),z.isPureReactComponent=!0;var j=Array.isArray,F=Object.prototype.hasOwnProperty,$={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function ne(T,_,ge){var Me,De={},Oe=null,Ie=null;if(_!=null)for(Me in _.ref!==void 0&&(Ie=_.ref),_.key!==void 0&&(Oe=""+_.key),_)F.call(_,Me)&&!M.hasOwnProperty(Me)&&(De[Me]=_[Me]);var Ve=arguments.length-2;if(Ve===1)De.children=ge;else if(1<Ve){for(var Xe=Array(Ve),Gt=0;Gt<Ve;Gt++)Xe[Gt]=arguments[Gt+2];De.children=Xe}if(T&&T.defaultProps)for(Me in Ve=T.defaultProps,Ve)De[Me]===void 0&&(De[Me]=Ve[Me]);return{$$typeof:i,type:T,key:Oe,ref:Ie,props:De,_owner:$.current}}function Y(T,_){return{$$typeof:i,type:T.type,key:_,ref:T.ref,props:T.props,_owner:T._owner}}function re(T){return typeof T=="object"&&T!==null&&T.$$typeof===i}function se(T){var _={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ge){return _[ge]})}var te=/\/+/g;function fe(T,_){return typeof T=="object"&&T!==null&&T.key!=null?se(""+T.key):_.toString(36)}function pe(T,_,ge,Me,De){var Oe=typeof T;(Oe==="undefined"||Oe==="boolean")&&(T=null);var Ie=!1;if(T===null)Ie=!0;else switch(Oe){case"string":case"number":Ie=!0;break;case"object":switch(T.$$typeof){case i:case e:Ie=!0}}if(Ie)return Ie=T,De=De(Ie),T=Me===""?"."+fe(Ie,0):Me,j(De)?(ge="",T!=null&&(ge=T.replace(te,"$&/")+"/"),pe(De,_,ge,"",function(Gt){return Gt})):De!=null&&(re(De)&&(De=Y(De,ge+(!De.key||Ie&&Ie.key===De.key?"":(""+De.key).replace(te,"$&/")+"/")+T)),_.push(De)),1;if(Ie=0,Me=Me===""?".":Me+":",j(T))for(var Ve=0;Ve<T.length;Ve++){Oe=T[Ve];var Xe=Me+fe(Oe,Ve);Ie+=pe(Oe,_,ge,Xe,De)}else if(Xe=v(T),typeof Xe=="function")for(T=Xe.call(T),Ve=0;!(Oe=T.next()).done;)Oe=Oe.value,Xe=Me+fe(Oe,Ve++),Ie+=pe(Oe,_,ge,Xe,De);else if(Oe==="object")throw _=String(T),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return Ie}function Se(T,_,ge){if(T==null)return T;var Me=[],De=0;return pe(T,Me,"","",function(Oe){return _.call(ge,Oe,De++)}),Me}function Te(T){if(T._status===-1){var _=T._result;_=_(),_.then(function(ge){(T._status===0||T._status===-1)&&(T._status=1,T._result=ge)},function(ge){(T._status===0||T._status===-1)&&(T._status=2,T._result=ge)}),T._status===-1&&(T._status=0,T._result=_)}if(T._status===1)return T._result.default;throw T._result}var ve={current:null},U={transition:null},ee={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:U,ReactCurrentOwner:$};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:Se,forEach:function(T,_,ge){Se(T,function(){_.apply(this,arguments)},ge)},count:function(T){var _=0;return Se(T,function(){_++}),_},toArray:function(T){return Se(T,function(_){return _})||[]},only:function(T){if(!re(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Be.Component=b,Be.Fragment=t,Be.Profiler=r,Be.PureComponent=N,Be.StrictMode=n,Be.Suspense=h,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Be.act=Z,Be.cloneElement=function(T,_,ge){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var Me=S({},T.props),De=T.key,Oe=T.ref,Ie=T._owner;if(_!=null){if(_.ref!==void 0&&(Oe=_.ref,Ie=$.current),_.key!==void 0&&(De=""+_.key),T.type&&T.type.defaultProps)var Ve=T.type.defaultProps;for(Xe in _)F.call(_,Xe)&&!M.hasOwnProperty(Xe)&&(Me[Xe]=_[Xe]===void 0&&Ve!==void 0?Ve[Xe]:_[Xe])}var Xe=arguments.length-2;if(Xe===1)Me.children=ge;else if(1<Xe){Ve=Array(Xe);for(var Gt=0;Gt<Xe;Gt++)Ve[Gt]=arguments[Gt+2];Me.children=Ve}return{$$typeof:i,type:T.type,key:De,ref:Oe,props:Me,_owner:Ie}},Be.createContext=function(T){return T={$$typeof:a,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:o,_context:T},T.Consumer=T},Be.createElement=ne,Be.createFactory=function(T){var _=ne.bind(null,T);return _.type=T,_},Be.createRef=function(){return{current:null}},Be.forwardRef=function(T){return{$$typeof:u,render:T}},Be.isValidElement=re,Be.lazy=function(T){return{$$typeof:d,_payload:{_status:-1,_result:T},_init:Te}},Be.memo=function(T,_){return{$$typeof:p,type:T,compare:_===void 0?null:_}},Be.startTransition=function(T){var _=U.transition;U.transition={};try{T()}finally{U.transition=_}},Be.unstable_act=Z,Be.useCallback=function(T,_){return ve.current.useCallback(T,_)},Be.useContext=function(T){return ve.current.useContext(T)},Be.useDebugValue=function(){},Be.useDeferredValue=function(T){return ve.current.useDeferredValue(T)},Be.useEffect=function(T,_){return ve.current.useEffect(T,_)},Be.useId=function(){return ve.current.useId()},Be.useImperativeHandle=function(T,_,ge){return ve.current.useImperativeHandle(T,_,ge)},Be.useInsertionEffect=function(T,_){return ve.current.useInsertionEffect(T,_)},Be.useLayoutEffect=function(T,_){return ve.current.useLayoutEffect(T,_)},Be.useMemo=function(T,_){return ve.current.useMemo(T,_)},Be.useReducer=function(T,_,ge){return ve.current.useReducer(T,_,ge)},Be.useRef=function(T){return ve.current.useRef(T)},Be.useState=function(T){return ve.current.useState(T)},Be.useSyncExternalStore=function(T,_,ge){return ve.current.useSyncExternalStore(T,_,ge)},Be.useTransition=function(){return ve.current.useTransition()},Be.version="18.3.1",Be}var qg;function Id(){return qg||(qg=1,tf.exports=dk()),tf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function pk(){if(Gg)return Xo;Gg=1;var i=Id(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(u,h,p){var d,g={},v=null,w=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(w=h.ref);for(d in h)n.call(h,d)&&!o.hasOwnProperty(d)&&(g[d]=h[d]);if(u&&u.defaultProps)for(d in h=u.defaultProps,h)g[d]===void 0&&(g[d]=h[d]);return{$$typeof:e,type:u,key:v,ref:w,props:g,_owner:r.current}}return Xo.Fragment=t,Xo.jsx=a,Xo.jsxs=a,Xo}var Yg;function mk(){return Yg||(Yg=1,ef.exports=pk()),ef.exports}var O=mk(),W=Id();const gk=pv(W),yk=dv({__proto__:null,default:gk},[W]);var tu={},nf={exports:{}},ln={},rf={exports:{}},sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function vk(){return Qg||(Qg=1,function(i){function e(U,ee){var Z=U.length;U.push(ee);e:for(;0<Z;){var T=Z-1>>>1,_=U[T];if(0<r(_,ee))U[T]=ee,U[Z]=_,Z=T;else break e}}function t(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var ee=U[0],Z=U.pop();if(Z!==ee){U[0]=Z;e:for(var T=0,_=U.length,ge=_>>>1;T<ge;){var Me=2*(T+1)-1,De=U[Me],Oe=Me+1,Ie=U[Oe];if(0>r(De,Z))Oe<_&&0>r(Ie,De)?(U[T]=Ie,U[Oe]=Z,T=Oe):(U[T]=De,U[Me]=Z,T=Me);else if(Oe<_&&0>r(Ie,Z))U[T]=Ie,U[Oe]=Z,T=Oe;else break e}}return ee}function r(U,ee){var Z=U.sortIndex-ee.sortIndex;return Z!==0?Z:U.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();i.unstable_now=function(){return a.now()-u}}var h=[],p=[],d=1,g=null,v=3,w=!1,S=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(U){for(var ee=t(p);ee!==null;){if(ee.callback===null)n(p);else if(ee.startTime<=U)n(p),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=t(p)}}function j(U){if(k=!1,z(U),!S)if(t(h)!==null)S=!0,Te(F);else{var ee=t(p);ee!==null&&ve(j,ee.startTime-U)}}function F(U,ee){S=!1,k&&(k=!1,A(ne),ne=-1),w=!0;var Z=v;try{for(z(ee),g=t(h);g!==null&&(!(g.expirationTime>ee)||U&&!se());){var T=g.callback;if(typeof T=="function"){g.callback=null,v=g.priorityLevel;var _=T(g.expirationTime<=ee);ee=i.unstable_now(),typeof _=="function"?g.callback=_:g===t(h)&&n(h),z(ee)}else n(h);g=t(h)}if(g!==null)var ge=!0;else{var Me=t(p);Me!==null&&ve(j,Me.startTime-ee),ge=!1}return ge}finally{g=null,v=Z,w=!1}}var $=!1,M=null,ne=-1,Y=5,re=-1;function se(){return!(i.unstable_now()-re<Y)}function te(){if(M!==null){var U=i.unstable_now();re=U;var ee=!0;try{ee=M(!0,U)}finally{ee?fe():($=!1,M=null)}}else $=!1}var fe;if(typeof N=="function")fe=function(){N(te)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Se=pe.port2;pe.port1.onmessage=te,fe=function(){Se.postMessage(null)}}else fe=function(){b(te,0)};function Te(U){M=U,$||($=!0,fe())}function ve(U,ee){ne=b(function(){U(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_continueExecution=function(){S||w||(S=!0,Te(F))},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(h)},i.unstable_next=function(U){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var Z=v;v=ee;try{return U()}finally{v=Z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(U,ee){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=v;v=U;try{return ee()}finally{v=Z}},i.unstable_scheduleCallback=function(U,ee,Z){var T=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?T+Z:T):Z=T,U){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=Z+_,U={id:d++,callback:ee,priorityLevel:U,startTime:Z,expirationTime:_,sortIndex:-1},Z>T?(U.sortIndex=Z,e(p,U),t(h)===null&&U===t(p)&&(k?(A(ne),ne=-1):k=!0,ve(j,Z-T))):(U.sortIndex=_,e(h,U),S||w||(S=!0,Te(F))),U},i.unstable_shouldYield=se,i.unstable_wrapCallback=function(U){var ee=v;return function(){var Z=v;v=ee;try{return U.apply(this,arguments)}finally{v=Z}}}}(sf)),sf}var Xg;function wk(){return Xg||(Xg=1,rf.exports=vk()),rf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function xk(){if(Jg)return ln;Jg=1;var i=Id(),e=wk();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function o(s,l){a(s,l),a(s+"Capture",l)}function a(s,l){for(r[s]=l,s=0;s<l.length;s++)n.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},g={};function v(s){return h.call(g,s)?!0:h.call(d,s)?!1:p.test(s)?g[s]=!0:(d[s]=!0,!1)}function w(s,l,c,f){if(c!==null&&c.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,l,c,f){if(l===null||typeof l>"u"||w(s,l,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function k(s,l,c,f,m,y,x){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=l,this.sanitizeURL=y,this.removeEmptyString=x}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){b[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];b[l]=new k(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){b[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){b[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){b[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){b[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){b[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){b[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){b[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function N(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(A,N);b[l]=new k(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(A,N);b[l]=new k(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(A,N);b[l]=new k(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){b[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),b.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){b[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function z(s,l,c,f){var m=b.hasOwnProperty(l)?b[l]:null;(m!==null?m.type!==0:f||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(S(l,c,m,f)&&(c=null),f||m===null?v(l)&&(c===null?s.removeAttribute(l):s.setAttribute(l,""+c)):m.mustUseProperty?s[m.propertyName]=c===null?m.type===3?!1:"":c:(l=m.attributeName,f=m.attributeNamespace,c===null?s.removeAttribute(l):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?s.setAttributeNS(f,l,c):s.setAttribute(l,c))))}var j=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),$=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),se=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),U=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var Z=Object.assign,T;function _(s){if(T===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);T=l&&l[1]||""}return`
`+T+s}var ge=!1;function Me(s,l){if(!s||ge)return"";ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(I){var f=I}Reflect.construct(s,[],l)}else{try{l.call()}catch(I){f=I}s.call(l.prototype)}else{try{throw Error()}catch(I){f=I}s()}}catch(I){if(I&&f&&typeof I.stack=="string"){for(var m=I.stack.split(`
`),y=f.stack.split(`
`),x=m.length-1,C=y.length-1;1<=x&&0<=C&&m[x]!==y[C];)C--;for(;1<=x&&0<=C;x--,C--)if(m[x]!==y[C]){if(x!==1||C!==1)do if(x--,C--,0>C||m[x]!==y[C]){var E=`
`+m[x].replace(" at new "," at ");return s.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",s.displayName)),E}while(1<=x&&0<=C);break}}}finally{ge=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?_(s):""}function De(s){switch(s.tag){case 5:return _(s.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return s=Me(s.type,!1),s;case 11:return s=Me(s.type.render,!1),s;case 1:return s=Me(s.type,!0),s;default:return""}}function Oe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case $:return"Portal";case Y:return"Profiler";case ne:return"StrictMode";case fe:return"Suspense";case pe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case se:return(s.displayName||"Context")+".Consumer";case re:return(s._context.displayName||"Context")+".Provider";case te:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Se:return l=s.displayName||null,l!==null?l:Oe(s.type)||"Memo";case Te:l=s._payload,s=s._init;try{return Oe(s(l))}catch{}}return null}function Ie(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(l);case 8:return l===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ve(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Xe(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Gt(s){var l=Xe(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),f=""+s[l];if(!s.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return m.call(this)},set:function(x){f=""+x,y.call(this,x)}}),Object.defineProperty(s,l,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function cs(s){s._valueTracker||(s._valueTracker=Gt(s))}function Ft(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var c=l.getValue(),f="";return s&&(f=Xe(s)?s.checked?"true":"false":s.value),s=f,s!==c?(l.setValue(s),!0):!1}function Yn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function hs(s,l){var c=l.checked;return Z({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function ql(s,l){var c=l.defaultValue==null?"":l.defaultValue,f=l.checked!=null?l.checked:l.defaultChecked;c=Ve(l.value!=null?l.value:c),s._wrapperState={initialChecked:f,initialValue:c,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Qn(s,l){l=l.checked,l!=null&&z(s,"checked",l,!1)}function uo(s,l){Qn(s,l);var c=Ve(l.value),f=l.type;if(c!=null)f==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?co(s,l.type,c):l.hasOwnProperty("defaultValue")&&co(s,l.type,Ve(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function Gl(s,l,c){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var f=l.type;if(!(f!=="submit"&&f!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,c||l===s.value||(s.value=l),s.defaultValue=l}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function co(s,l,c){(l!=="number"||Yn(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Mr=Array.isArray;function _i(s,l,c,f){if(s=s.options,l){l={};for(var m=0;m<c.length;m++)l["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=l.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&f&&(s[c].defaultSelected=!0)}else{for(c=""+Ve(c),l=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}l!==null||s[m].disabled||(l=s[m])}l!==null&&(l.selected=!0)}}function yi(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ji(s,l){var c=l.value;if(c==null){if(c=l.children,l=l.defaultValue,c!=null){if(l!=null)throw Error(t(92));if(Mr(c)){if(1<c.length)throw Error(t(93));c=c[0]}l=c}l==null&&(l=""),c=l}s._wrapperState={initialValue:Ve(c)}}function ho(s,l){var c=Ve(l.value),f=Ve(l.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),l.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),f!=null&&(s.defaultValue=""+f)}function fs(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Fn(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Fn(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Er,Ar=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,c,f,m){MSApp.execUnsafeLocalFunction(function(){return s(l,c,f,m)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Er.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Dr(s,l){if(l){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=l;return}}s.textContent=l}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yl=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(s){Yl.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),en[l]=en[s]})});function fo(s,l,c){return l==null||typeof l=="boolean"||l===""?"":c||typeof l!="number"||l===0||en.hasOwnProperty(s)&&en[s]?(""+l).trim():l+"px"}function po(s,l){s=s.style;for(var c in l)if(l.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=fo(c,l[c],f);c==="float"&&(c="cssFloat"),f?s.setProperty(c,m):s[c]=m}}var xc=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ds(s,l){if(l){if(xc[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Hi(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function Tr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var mo=null,wi=null,Vi=null;function go(s){if(s=Io(s)){if(typeof mo!="function")throw Error(t(280));var l=s.stateNode;l&&(l=ga(l),mo(s.stateNode,s.type,l))}}function Ql(s){wi?Vi?Vi.push(s):Vi=[s]:wi=s}function P(){if(wi){var s=wi,l=Vi;if(Vi=wi=null,go(s),l)for(s=0;s<l.length;s++)go(l[s])}}function B(s,l){return s(l)}function V(){}var X=!1;function ue(s,l,c){if(X)return s(l,c);X=!0;try{return B(s,l,c)}finally{X=!1,(wi!==null||Vi!==null)&&(V(),P())}}function Pe(s,l){var c=s.stateNode;if(c===null)return null;var f=ga(c);if(f===null)return null;c=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,l,typeof c));return c}var xe=!1;if(u)try{var ae={};Object.defineProperty(ae,"passive",{get:function(){xe=!0}}),window.addEventListener("test",ae,ae),window.removeEventListener("test",ae,ae)}catch{xe=!1}function Le(s,l,c,f,m,y,x,C,E){var I=Array.prototype.slice.call(arguments,3);try{l.apply(c,I)}catch(G){this.onError(G)}}var Ee=!1,ct=null,ht=!1,Ae=null,Je={onError:function(s){Ee=!0,ct=s}};function gt(s,l,c,f,m,y,x,C,E){Ee=!1,ct=null,Le.apply(Je,arguments)}function Pr(s,l,c,f,m,y,x,C,E){if(gt.apply(this,arguments),Ee){if(Ee){var I=ct;Ee=!1,ct=null}else throw Error(t(198));ht||(ht=!0,Ae=I)}}function zt(s){var l=s,c=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(c=l.return),s=l.return;while(s)}return l.tag===3?c:null}function xi(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Si(s){if(zt(s)!==s)throw Error(t(188))}function Wi(s){var l=s.alternate;if(!l){if(l=zt(s),l===null)throw Error(t(188));return l!==s?null:s}for(var c=s,f=l;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return Si(m),s;if(y===f)return Si(m),l;y=y.sibling}throw Error(t(188))}if(c.return!==f.return)c=m,f=y;else{for(var x=!1,C=m.child;C;){if(C===c){x=!0,c=m,f=y;break}if(C===f){x=!0,f=m,c=y;break}C=C.sibling}if(!x){for(C=y.child;C;){if(C===c){x=!0,c=y,f=m;break}if(C===f){x=!0,f=y,c=m;break}C=C.sibling}if(!x)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?s:l}function dn(s){return s=Wi(s),s!==null?Rr(s):null}function Rr(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Rr(s);if(l!==null)return l;s=s.sibling}return null}var Or=e.unstable_scheduleCallback,Lr=e.unstable_cancelCallback,ze=e.unstable_shouldYield,Tt=e.unstable_requestPaint,He=e.unstable_now,xt=e.unstable_getCurrentPriorityLevel,ki=e.unstable_ImmediatePriority,yo=e.unstable_UserBlockingPriority,ms=e.unstable_NormalPriority,Ax=e.unstable_LowPriority,kp=e.unstable_IdlePriority,Xl=null,Xn=null;function Dx(s){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(Xl,s,void 0,(s.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:Rx,Tx=Math.log,Px=Math.LN2;function Rx(s){return s>>>=0,s===0?32:31-(Tx(s)/Px|0)|0}var Jl=64,Zl=4194304;function vo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ea(s,l){var c=s.pendingLanes;if(c===0)return 0;var f=0,m=s.suspendedLanes,y=s.pingedLanes,x=c&268435455;if(x!==0){var C=x&~m;C!==0?f=vo(C):(y&=x,y!==0&&(f=vo(y)))}else x=c&~m,x!==0?f=vo(x):y!==0&&(f=vo(y));if(f===0)return 0;if(l!==0&&l!==f&&(l&m)===0&&(m=f&-f,y=l&-l,m>=y||m===16&&(y&4194240)!==0))return l;if((f&4)!==0&&(f|=c&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=f;0<l;)c=31-zn(l),m=1<<c,f|=s[c],l&=~m;return f}function Ox(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lx(s,l){for(var c=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes;0<y;){var x=31-zn(y),C=1<<x,E=m[x];E===-1?((C&c)===0||(C&f)!==0)&&(m[x]=Ox(C,l)):E<=l&&(s.expiredLanes|=C),y&=~C}}function Sc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function bp(){var s=Jl;return Jl<<=1,(Jl&4194240)===0&&(Jl=64),s}function kc(s){for(var l=[],c=0;31>c;c++)l.push(s);return l}function wo(s,l,c){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-zn(l),s[l]=c}function Nx(s,l){var c=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-zn(c),y=1<<m;l[m]=0,f[m]=-1,s[m]=-1,c&=~y}}function bc(s,l){var c=s.entangledLanes|=l;for(s=s.entanglements;c;){var f=31-zn(c),m=1<<f;m&l|s[f]&l&&(s[f]|=l),c&=~m}}var qe=0;function Cp(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Mp,Cc,Ep,Ap,Dp,Mc=!1,ta=[],Ui=null,$i=null,Ki=null,xo=new Map,So=new Map,qi=[],Bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tp(s,l){switch(s){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":xo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(l.pointerId)}}function ko(s,l,c,f,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:l,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[m]},l!==null&&(l=Io(l),l!==null&&Cc(l)),s):(s.eventSystemFlags|=f,l=s.targetContainers,m!==null&&l.indexOf(m)===-1&&l.push(m),s)}function Ix(s,l,c,f,m){switch(l){case"focusin":return Ui=ko(Ui,s,l,c,f,m),!0;case"dragenter":return $i=ko($i,s,l,c,f,m),!0;case"mouseover":return Ki=ko(Ki,s,l,c,f,m),!0;case"pointerover":var y=m.pointerId;return xo.set(y,ko(xo.get(y)||null,s,l,c,f,m)),!0;case"gotpointercapture":return y=m.pointerId,So.set(y,ko(So.get(y)||null,s,l,c,f,m)),!0}return!1}function Pp(s){var l=Nr(s.target);if(l!==null){var c=zt(l);if(c!==null){if(l=c.tag,l===13){if(l=xi(c),l!==null){s.blockedOn=l,Dp(s.priority,function(){Ep(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function na(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var c=Ac(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);ps=f,c.target.dispatchEvent(f),ps=null}else return l=Io(c),l!==null&&Cc(l),s.blockedOn=c,!1;l.shift()}return!0}function Rp(s,l,c){na(s)&&c.delete(l)}function Fx(){Mc=!1,Ui!==null&&na(Ui)&&(Ui=null),$i!==null&&na($i)&&($i=null),Ki!==null&&na(Ki)&&(Ki=null),xo.forEach(Rp),So.forEach(Rp)}function bo(s,l){s.blockedOn===l&&(s.blockedOn=null,Mc||(Mc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fx)))}function Co(s){function l(m){return bo(m,s)}if(0<ta.length){bo(ta[0],s);for(var c=1;c<ta.length;c++){var f=ta[c];f.blockedOn===s&&(f.blockedOn=null)}}for(Ui!==null&&bo(Ui,s),$i!==null&&bo($i,s),Ki!==null&&bo(Ki,s),xo.forEach(l),So.forEach(l),c=0;c<qi.length;c++)f=qi[c],f.blockedOn===s&&(f.blockedOn=null);for(;0<qi.length&&(c=qi[0],c.blockedOn===null);)Pp(c),c.blockedOn===null&&qi.shift()}var gs=j.ReactCurrentBatchConfig,ia=!0;function zx(s,l,c,f){var m=qe,y=gs.transition;gs.transition=null;try{qe=1,Ec(s,l,c,f)}finally{qe=m,gs.transition=y}}function _x(s,l,c,f){var m=qe,y=gs.transition;gs.transition=null;try{qe=4,Ec(s,l,c,f)}finally{qe=m,gs.transition=y}}function Ec(s,l,c,f){if(ia){var m=Ac(s,l,c,f);if(m===null)Uc(s,l,f,ra,c),Tp(s,f);else if(Ix(m,s,l,c,f))f.stopPropagation();else if(Tp(s,f),l&4&&-1<Bx.indexOf(s)){for(;m!==null;){var y=Io(m);if(y!==null&&Mp(y),y=Ac(s,l,c,f),y===null&&Uc(s,l,f,ra,c),y===m)break;m=y}m!==null&&f.stopPropagation()}else Uc(s,l,f,null,c)}}var ra=null;function Ac(s,l,c,f){if(ra=null,s=Tr(f),s=Nr(s),s!==null)if(l=zt(s),l===null)s=null;else if(c=l.tag,c===13){if(s=xi(l),s!==null)return s;s=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return ra=s,null}function Op(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xt()){case ki:return 1;case yo:return 4;case ms:case Ax:return 16;case kp:return 536870912;default:return 16}default:return 16}}var Gi=null,Dc=null,sa=null;function Lp(){if(sa)return sa;var s,l=Dc,c=l.length,f,m="value"in Gi?Gi.value:Gi.textContent,y=m.length;for(s=0;s<c&&l[s]===m[s];s++);var x=c-s;for(f=1;f<=x&&l[c-f]===m[y-f];f++);return sa=m.slice(s,1<f?1-f:void 0)}function oa(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function la(){return!0}function Np(){return!1}function pn(s){function l(c,f,m,y,x){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(c=s[C],this[C]=c?c(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?la:Np,this.isPropagationStopped=Np,this}return Z(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),l}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tc=pn(ys),Mo=Z({},ys,{view:0,detail:0}),jx=pn(Mo),Pc,Rc,Eo,aa=Z({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Eo&&(Eo&&s.type==="mousemove"?(Pc=s.screenX-Eo.screenX,Rc=s.screenY-Eo.screenY):Rc=Pc=0,Eo=s),Pc)},movementY:function(s){return"movementY"in s?s.movementY:Rc}}),Bp=pn(aa),Hx=Z({},aa,{dataTransfer:0}),Vx=pn(Hx),Wx=Z({},Mo,{relatedTarget:0}),Oc=pn(Wx),Ux=Z({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),$x=pn(Ux),Kx=Z({},ys,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qx=pn(Kx),Gx=Z({},ys,{data:0}),Ip=pn(Gx),Yx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jx(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Xx[s])?!!l[s]:!1}function Lc(){return Jx}var Zx=Z({},Mo,{key:function(s){if(s.key){var l=Yx[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=oa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Qx[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lc,charCode:function(s){return s.type==="keypress"?oa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?oa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),eS=pn(Zx),tS=Z({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fp=pn(tS),nS=Z({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lc}),iS=pn(nS),rS=Z({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=pn(rS),oS=Z({},aa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),lS=pn(oS),aS=[9,13,27,32],Nc=u&&"CompositionEvent"in window,Ao=null;u&&"documentMode"in document&&(Ao=document.documentMode);var uS=u&&"TextEvent"in window&&!Ao,zp=u&&(!Nc||Ao&&8<Ao&&11>=Ao),_p=" ",jp=!1;function Hp(s,l){switch(s){case"keyup":return aS.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var vs=!1;function cS(s,l){switch(s){case"compositionend":return Vp(l);case"keypress":return l.which!==32?null:(jp=!0,_p);case"textInput":return s=l.data,s===_p&&jp?null:s;default:return null}}function hS(s,l){if(vs)return s==="compositionend"||!Nc&&Hp(s,l)?(s=Lp(),sa=Dc=Gi=null,vs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return zp&&l.locale!=="ko"?null:l.data;default:return null}}var fS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!fS[s.type]:l==="textarea"}function Up(s,l,c,f){Ql(f),l=da(l,"onChange"),0<l.length&&(c=new Tc("onChange","change",null,c,f),s.push({event:c,listeners:l}))}var Do=null,To=null;function dS(s){am(s,0)}function ua(s){var l=bs(s);if(Ft(l))return s}function pS(s,l){if(s==="change")return l}var $p=!1;if(u){var Bc;if(u){var Ic="oninput"in document;if(!Ic){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Ic=typeof Kp.oninput=="function"}Bc=Ic}else Bc=!1;$p=Bc&&(!document.documentMode||9<document.documentMode)}function qp(){Do&&(Do.detachEvent("onpropertychange",Gp),To=Do=null)}function Gp(s){if(s.propertyName==="value"&&ua(To)){var l=[];Up(l,To,s,Tr(s)),ue(dS,l)}}function mS(s,l,c){s==="focusin"?(qp(),Do=l,To=c,Do.attachEvent("onpropertychange",Gp)):s==="focusout"&&qp()}function gS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ua(To)}function yS(s,l){if(s==="click")return ua(l)}function vS(s,l){if(s==="input"||s==="change")return ua(l)}function wS(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var _n=typeof Object.is=="function"?Object.is:wS;function Po(s,l){if(_n(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var c=Object.keys(s),f=Object.keys(l);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!h.call(l,m)||!_n(s[m],l[m]))return!1}return!0}function Yp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Qp(s,l){var c=Yp(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=l&&f>=l)return{node:c,offset:l-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Yp(c)}}function Xp(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Xp(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Jp(){for(var s=window,l=Yn();l instanceof s.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)s=l.contentWindow;else break;l=Yn(s.document)}return l}function Fc(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function xS(s){var l=Jp(),c=s.focusedElem,f=s.selectionRange;if(l!==c&&c&&c.ownerDocument&&Xp(c.ownerDocument.documentElement,c)){if(f!==null&&Fc(c)){if(l=f.start,s=f.end,s===void 0&&(s=l),"selectionStart"in c)c.selectionStart=l,c.selectionEnd=Math.min(s,c.value.length);else if(s=(l=c.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var m=c.textContent.length,y=Math.min(f.start,m);f=f.end===void 0?y:Math.min(f.end,m),!s.extend&&y>f&&(m=f,f=y,y=m),m=Qp(c,y);var x=Qp(c,f);m&&x&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==x.node||s.focusOffset!==x.offset)&&(l=l.createRange(),l.setStart(m.node,m.offset),s.removeAllRanges(),y>f?(s.addRange(l),s.extend(x.node,x.offset)):(l.setEnd(x.node,x.offset),s.addRange(l)))}}for(l=[],s=c;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<l.length;c++)s=l[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var SS=u&&"documentMode"in document&&11>=document.documentMode,ws=null,zc=null,Ro=null,_c=!1;function Zp(s,l,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;_c||ws==null||ws!==Yn(f)||(f=ws,"selectionStart"in f&&Fc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ro&&Po(Ro,f)||(Ro=f,f=da(zc,"onSelect"),0<f.length&&(l=new Tc("onSelect","select",null,l,c),s.push({event:l,listeners:f}),l.target=ws)))}function ca(s,l){var c={};return c[s.toLowerCase()]=l.toLowerCase(),c["Webkit"+s]="webkit"+l,c["Moz"+s]="moz"+l,c}var xs={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionend:ca("Transition","TransitionEnd")},jc={},em={};u&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function ha(s){if(jc[s])return jc[s];if(!xs[s])return s;var l=xs[s],c;for(c in l)if(l.hasOwnProperty(c)&&c in em)return jc[s]=l[c];return s}var tm=ha("animationend"),nm=ha("animationiteration"),im=ha("animationstart"),rm=ha("transitionend"),sm=new Map,om="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(s,l){sm.set(s,l),o(l,[s])}for(var Hc=0;Hc<om.length;Hc++){var Vc=om[Hc],kS=Vc.toLowerCase(),bS=Vc[0].toUpperCase()+Vc.slice(1);Yi(kS,"on"+bS)}Yi(tm,"onAnimationEnd"),Yi(nm,"onAnimationIteration"),Yi(im,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(rm,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function lm(s,l,c){var f=s.type||"unknown-event";s.currentTarget=c,Pr(f,l,void 0,s),s.currentTarget=null}function am(s,l){l=(l&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],m=f.event;f=f.listeners;e:{var y=void 0;if(l)for(var x=f.length-1;0<=x;x--){var C=f[x],E=C.instance,I=C.currentTarget;if(C=C.listener,E!==y&&m.isPropagationStopped())break e;lm(m,C,I),y=E}else for(x=0;x<f.length;x++){if(C=f[x],E=C.instance,I=C.currentTarget,C=C.listener,E!==y&&m.isPropagationStopped())break e;lm(m,C,I),y=E}}}if(ht)throw s=Ae,ht=!1,Ae=null,s}function et(s,l){var c=l[Qc];c===void 0&&(c=l[Qc]=new Set);var f=s+"__bubble";c.has(f)||(um(l,s,2,!1),c.add(f))}function Wc(s,l,c){var f=0;l&&(f|=4),um(c,s,f,l)}var fa="_reactListening"+Math.random().toString(36).slice(2);function Lo(s){if(!s[fa]){s[fa]=!0,n.forEach(function(c){c!=="selectionchange"&&(CS.has(c)||Wc(c,!1,s),Wc(c,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[fa]||(l[fa]=!0,Wc("selectionchange",!1,l))}}function um(s,l,c,f){switch(Op(l)){case 1:var m=zx;break;case 4:m=_x;break;default:m=Ec}c=m.bind(null,l,c,s),m=void 0,!xe||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(l,c,{capture:!0,passive:m}):s.addEventListener(l,c,!0):m!==void 0?s.addEventListener(l,c,{passive:m}):s.addEventListener(l,c,!1)}function Uc(s,l,c,f,m){var y=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var C=f.stateNode.containerInfo;if(C===m||C.nodeType===8&&C.parentNode===m)break;if(x===4)for(x=f.return;x!==null;){var E=x.tag;if((E===3||E===4)&&(E=x.stateNode.containerInfo,E===m||E.nodeType===8&&E.parentNode===m))return;x=x.return}for(;C!==null;){if(x=Nr(C),x===null)return;if(E=x.tag,E===5||E===6){f=y=x;continue e}C=C.parentNode}}f=f.return}ue(function(){var I=y,G=Tr(c),Q=[];e:{var q=sm.get(s);if(q!==void 0){var le=Tc,me=s;switch(s){case"keypress":if(oa(c)===0)break e;case"keydown":case"keyup":le=eS;break;case"focusin":me="focus",le=Oc;break;case"focusout":me="blur",le=Oc;break;case"beforeblur":case"afterblur":le=Oc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Bp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Vx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=iS;break;case tm:case nm:case im:le=$x;break;case rm:le=sS;break;case"scroll":le=jx;break;case"wheel":le=lS;break;case"copy":case"cut":case"paste":le=qx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Fp}var ye=(l&4)!==0,dt=!ye&&s==="scroll",R=ye?q!==null?q+"Capture":null:q;ye=[];for(var D=I,L;D!==null;){L=D;var J=L.stateNode;if(L.tag===5&&J!==null&&(L=J,R!==null&&(J=Pe(D,R),J!=null&&ye.push(No(D,J,L)))),dt)break;D=D.return}0<ye.length&&(q=new le(q,me,null,c,G),Q.push({event:q,listeners:ye}))}}if((l&7)===0){e:{if(q=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",q&&c!==ps&&(me=c.relatedTarget||c.fromElement)&&(Nr(me)||me[bi]))break e;if((le||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,le?(me=c.relatedTarget||c.toElement,le=I,me=me?Nr(me):null,me!==null&&(dt=zt(me),me!==dt||me.tag!==5&&me.tag!==6)&&(me=null)):(le=null,me=I),le!==me)){if(ye=Bp,J="onMouseLeave",R="onMouseEnter",D="mouse",(s==="pointerout"||s==="pointerover")&&(ye=Fp,J="onPointerLeave",R="onPointerEnter",D="pointer"),dt=le==null?q:bs(le),L=me==null?q:bs(me),q=new ye(J,D+"leave",le,c,G),q.target=dt,q.relatedTarget=L,J=null,Nr(G)===I&&(ye=new ye(R,D+"enter",me,c,G),ye.target=L,ye.relatedTarget=dt,J=ye),dt=J,le&&me)t:{for(ye=le,R=me,D=0,L=ye;L;L=Ss(L))D++;for(L=0,J=R;J;J=Ss(J))L++;for(;0<D-L;)ye=Ss(ye),D--;for(;0<L-D;)R=Ss(R),L--;for(;D--;){if(ye===R||R!==null&&ye===R.alternate)break t;ye=Ss(ye),R=Ss(R)}ye=null}else ye=null;le!==null&&cm(Q,q,le,ye,!1),me!==null&&dt!==null&&cm(Q,dt,me,ye,!0)}}e:{if(q=I?bs(I):window,le=q.nodeName&&q.nodeName.toLowerCase(),le==="select"||le==="input"&&q.type==="file")var we=pS;else if(Wp(q))if($p)we=vS;else{we=gS;var be=mS}else(le=q.nodeName)&&le.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(we=yS);if(we&&(we=we(s,I))){Up(Q,we,c,G);break e}be&&be(s,q,I),s==="focusout"&&(be=q._wrapperState)&&be.controlled&&q.type==="number"&&co(q,"number",q.value)}switch(be=I?bs(I):window,s){case"focusin":(Wp(be)||be.contentEditable==="true")&&(ws=be,zc=I,Ro=null);break;case"focusout":Ro=zc=ws=null;break;case"mousedown":_c=!0;break;case"contextmenu":case"mouseup":case"dragend":_c=!1,Zp(Q,c,G);break;case"selectionchange":if(SS)break;case"keydown":case"keyup":Zp(Q,c,G)}var Ce;if(Nc)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else vs?Hp(s,c)&&(Re="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Re="onCompositionStart");Re&&(zp&&c.locale!=="ko"&&(vs||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&vs&&(Ce=Lp()):(Gi=G,Dc="value"in Gi?Gi.value:Gi.textContent,vs=!0)),be=da(I,Re),0<be.length&&(Re=new Ip(Re,s,null,c,G),Q.push({event:Re,listeners:be}),Ce?Re.data=Ce:(Ce=Vp(c),Ce!==null&&(Re.data=Ce)))),(Ce=uS?cS(s,c):hS(s,c))&&(I=da(I,"onBeforeInput"),0<I.length&&(G=new Ip("onBeforeInput","beforeinput",null,c,G),Q.push({event:G,listeners:I}),G.data=Ce))}am(Q,l)})}function No(s,l,c){return{instance:s,listener:l,currentTarget:c}}function da(s,l){for(var c=l+"Capture",f=[];s!==null;){var m=s,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Pe(s,c),y!=null&&f.unshift(No(s,y,m)),y=Pe(s,l),y!=null&&f.push(No(s,y,m))),s=s.return}return f}function Ss(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function cm(s,l,c,f,m){for(var y=l._reactName,x=[];c!==null&&c!==f;){var C=c,E=C.alternate,I=C.stateNode;if(E!==null&&E===f)break;C.tag===5&&I!==null&&(C=I,m?(E=Pe(c,y),E!=null&&x.unshift(No(c,E,C))):m||(E=Pe(c,y),E!=null&&x.push(No(c,E,C)))),c=c.return}x.length!==0&&s.push({event:l,listeners:x})}var MS=/\r\n?/g,ES=/\u0000|\uFFFD/g;function hm(s){return(typeof s=="string"?s:""+s).replace(MS,`
`).replace(ES,"")}function pa(s,l,c){if(l=hm(l),hm(s)!==l&&c)throw Error(t(425))}function ma(){}var $c=null,Kc=null;function qc(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Gc=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,DS=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(s){return fm.resolve(null).then(s).catch(TS)}:Gc;function TS(s){setTimeout(function(){throw s})}function Yc(s,l){var c=l,f=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){s.removeChild(m),Co(l);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);Co(l)}function Qi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function dm(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return s;l--}else c==="/$"&&l++}s=s.previousSibling}return null}var ks=Math.random().toString(36).slice(2),Jn="__reactFiber$"+ks,Bo="__reactProps$"+ks,bi="__reactContainer$"+ks,Qc="__reactEvents$"+ks,PS="__reactListeners$"+ks,RS="__reactHandles$"+ks;function Nr(s){var l=s[Jn];if(l)return l;for(var c=s.parentNode;c;){if(l=c[bi]||c[Jn]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(s=dm(s);s!==null;){if(c=s[Jn])return c;s=dm(s)}return l}s=c,c=s.parentNode}return null}function Io(s){return s=s[Jn]||s[bi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function bs(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function ga(s){return s[Bo]||null}var Xc=[],Cs=-1;function Xi(s){return{current:s}}function tt(s){0>Cs||(s.current=Xc[Cs],Xc[Cs]=null,Cs--)}function Ze(s,l){Cs++,Xc[Cs]=s.current,s.current=l}var Ji={},_t=Xi(Ji),tn=Xi(!1),Br=Ji;function Ms(s,l){var c=s.type.contextTypes;if(!c)return Ji;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===l)return f.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in c)m[y]=l[y];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=m),m}function nn(s){return s=s.childContextTypes,s!=null}function ya(){tt(tn),tt(_t)}function pm(s,l,c){if(_t.current!==Ji)throw Error(t(168));Ze(_t,l),Ze(tn,c)}function mm(s,l,c){var f=s.stateNode;if(l=l.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in l))throw Error(t(108,Ie(s)||"Unknown",m));return Z({},c,f)}function va(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ji,Br=_t.current,Ze(_t,s),Ze(tn,tn.current),!0}function gm(s,l,c){var f=s.stateNode;if(!f)throw Error(t(169));c?(s=mm(s,l,Br),f.__reactInternalMemoizedMergedChildContext=s,tt(tn),tt(_t),Ze(_t,s)):tt(tn),Ze(tn,c)}var Ci=null,wa=!1,Jc=!1;function ym(s){Ci===null?Ci=[s]:Ci.push(s)}function OS(s){wa=!0,ym(s)}function Zi(){if(!Jc&&Ci!==null){Jc=!0;var s=0,l=qe;try{var c=Ci;for(qe=1;s<c.length;s++){var f=c[s];do f=f(!0);while(f!==null)}Ci=null,wa=!1}catch(m){throw Ci!==null&&(Ci=Ci.slice(s+1)),Or(ki,Zi),m}finally{qe=l,Jc=!1}}return null}var Es=[],As=0,xa=null,Sa=0,Sn=[],kn=0,Ir=null,Mi=1,Ei="";function Fr(s,l){Es[As++]=Sa,Es[As++]=xa,xa=s,Sa=l}function vm(s,l,c){Sn[kn++]=Mi,Sn[kn++]=Ei,Sn[kn++]=Ir,Ir=s;var f=Mi;s=Ei;var m=32-zn(f)-1;f&=~(1<<m),c+=1;var y=32-zn(l)+m;if(30<y){var x=m-m%5;y=(f&(1<<x)-1).toString(32),f>>=x,m-=x,Mi=1<<32-zn(l)+m|c<<m|f,Ei=y+s}else Mi=1<<y|c<<m|f,Ei=s}function Zc(s){s.return!==null&&(Fr(s,1),vm(s,1,0))}function eh(s){for(;s===xa;)xa=Es[--As],Es[As]=null,Sa=Es[--As],Es[As]=null;for(;s===Ir;)Ir=Sn[--kn],Sn[kn]=null,Ei=Sn[--kn],Sn[kn]=null,Mi=Sn[--kn],Sn[kn]=null}var mn=null,gn=null,rt=!1,jn=null;function wm(s,l){var c=En(5,null,null,0);c.elementType="DELETED",c.stateNode=l,c.return=s,l=s.deletions,l===null?(s.deletions=[c],s.flags|=16):l.push(c)}function xm(s,l){switch(s.tag){case 5:var c=s.type;return l=l.nodeType!==1||c.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,mn=s,gn=Qi(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,mn=s,gn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(c=Ir!==null?{id:Mi,overflow:Ei}:null,s.memoizedState={dehydrated:l,treeContext:c,retryLane:1073741824},c=En(18,null,null,0),c.stateNode=l,c.return=s,s.child=c,mn=s,gn=null,!0):!1;default:return!1}}function th(s){return(s.mode&1)!==0&&(s.flags&128)===0}function nh(s){if(rt){var l=gn;if(l){var c=l;if(!xm(s,l)){if(th(s))throw Error(t(418));l=Qi(c.nextSibling);var f=mn;l&&xm(s,l)?wm(f,c):(s.flags=s.flags&-4097|2,rt=!1,mn=s)}}else{if(th(s))throw Error(t(418));s.flags=s.flags&-4097|2,rt=!1,mn=s}}}function Sm(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;mn=s}function ka(s){if(s!==mn)return!1;if(!rt)return Sm(s),rt=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!qc(s.type,s.memoizedProps)),l&&(l=gn)){if(th(s))throw km(),Error(t(418));for(;l;)wm(s,l),l=Qi(l.nextSibling)}if(Sm(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(l===0){gn=Qi(s.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++}s=s.nextSibling}gn=null}}else gn=mn?Qi(s.stateNode.nextSibling):null;return!0}function km(){for(var s=gn;s;)s=Qi(s.nextSibling)}function Ds(){gn=mn=null,rt=!1}function ih(s){jn===null?jn=[s]:jn.push(s)}var LS=j.ReactCurrentBatchConfig;function Fo(s,l,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,s));var m=f,y=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===y?l.ref:(l=function(x){var C=m.refs;x===null?delete C[y]:C[y]=x},l._stringRef=y,l)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function ba(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function bm(s){var l=s._init;return l(s._payload)}function Cm(s){function l(R,D){if(s){var L=R.deletions;L===null?(R.deletions=[D],R.flags|=16):L.push(D)}}function c(R,D){if(!s)return null;for(;D!==null;)l(R,D),D=D.sibling;return null}function f(R,D){for(R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function m(R,D){return R=lr(R,D),R.index=0,R.sibling=null,R}function y(R,D,L){return R.index=L,s?(L=R.alternate,L!==null?(L=L.index,L<D?(R.flags|=2,D):L):(R.flags|=2,D)):(R.flags|=1048576,D)}function x(R){return s&&R.alternate===null&&(R.flags|=2),R}function C(R,D,L,J){return D===null||D.tag!==6?(D=Gh(L,R.mode,J),D.return=R,D):(D=m(D,L),D.return=R,D)}function E(R,D,L,J){var we=L.type;return we===M?G(R,D,L.props.children,J,L.key):D!==null&&(D.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Te&&bm(we)===D.type)?(J=m(D,L.props),J.ref=Fo(R,D,L),J.return=R,J):(J=qa(L.type,L.key,L.props,null,R.mode,J),J.ref=Fo(R,D,L),J.return=R,J)}function I(R,D,L,J){return D===null||D.tag!==4||D.stateNode.containerInfo!==L.containerInfo||D.stateNode.implementation!==L.implementation?(D=Yh(L,R.mode,J),D.return=R,D):(D=m(D,L.children||[]),D.return=R,D)}function G(R,D,L,J,we){return D===null||D.tag!==7?(D=$r(L,R.mode,J,we),D.return=R,D):(D=m(D,L),D.return=R,D)}function Q(R,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Gh(""+D,R.mode,L),D.return=R,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case F:return L=qa(D.type,D.key,D.props,null,R.mode,L),L.ref=Fo(R,null,D),L.return=R,L;case $:return D=Yh(D,R.mode,L),D.return=R,D;case Te:var J=D._init;return Q(R,J(D._payload),L)}if(Mr(D)||ee(D))return D=$r(D,R.mode,L,null),D.return=R,D;ba(R,D)}return null}function q(R,D,L,J){var we=D!==null?D.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return we!==null?null:C(R,D,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case F:return L.key===we?E(R,D,L,J):null;case $:return L.key===we?I(R,D,L,J):null;case Te:return we=L._init,q(R,D,we(L._payload),J)}if(Mr(L)||ee(L))return we!==null?null:G(R,D,L,J,null);ba(R,L)}return null}function le(R,D,L,J,we){if(typeof J=="string"&&J!==""||typeof J=="number")return R=R.get(L)||null,C(D,R,""+J,we);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case F:return R=R.get(J.key===null?L:J.key)||null,E(D,R,J,we);case $:return R=R.get(J.key===null?L:J.key)||null,I(D,R,J,we);case Te:var be=J._init;return le(R,D,L,be(J._payload),we)}if(Mr(J)||ee(J))return R=R.get(L)||null,G(D,R,J,we,null);ba(D,J)}return null}function me(R,D,L,J){for(var we=null,be=null,Ce=D,Re=D=0,At=null;Ce!==null&&Re<L.length;Re++){Ce.index>Re?(At=Ce,Ce=null):At=Ce.sibling;var Ke=q(R,Ce,L[Re],J);if(Ke===null){Ce===null&&(Ce=At);break}s&&Ce&&Ke.alternate===null&&l(R,Ce),D=y(Ke,D,Re),be===null?we=Ke:be.sibling=Ke,be=Ke,Ce=At}if(Re===L.length)return c(R,Ce),rt&&Fr(R,Re),we;if(Ce===null){for(;Re<L.length;Re++)Ce=Q(R,L[Re],J),Ce!==null&&(D=y(Ce,D,Re),be===null?we=Ce:be.sibling=Ce,be=Ce);return rt&&Fr(R,Re),we}for(Ce=f(R,Ce);Re<L.length;Re++)At=le(Ce,R,Re,L[Re],J),At!==null&&(s&&At.alternate!==null&&Ce.delete(At.key===null?Re:At.key),D=y(At,D,Re),be===null?we=At:be.sibling=At,be=At);return s&&Ce.forEach(function(ar){return l(R,ar)}),rt&&Fr(R,Re),we}function ye(R,D,L,J){var we=ee(L);if(typeof we!="function")throw Error(t(150));if(L=we.call(L),L==null)throw Error(t(151));for(var be=we=null,Ce=D,Re=D=0,At=null,Ke=L.next();Ce!==null&&!Ke.done;Re++,Ke=L.next()){Ce.index>Re?(At=Ce,Ce=null):At=Ce.sibling;var ar=q(R,Ce,Ke.value,J);if(ar===null){Ce===null&&(Ce=At);break}s&&Ce&&ar.alternate===null&&l(R,Ce),D=y(ar,D,Re),be===null?we=ar:be.sibling=ar,be=ar,Ce=At}if(Ke.done)return c(R,Ce),rt&&Fr(R,Re),we;if(Ce===null){for(;!Ke.done;Re++,Ke=L.next())Ke=Q(R,Ke.value,J),Ke!==null&&(D=y(Ke,D,Re),be===null?we=Ke:be.sibling=Ke,be=Ke);return rt&&Fr(R,Re),we}for(Ce=f(R,Ce);!Ke.done;Re++,Ke=L.next())Ke=le(Ce,R,Re,Ke.value,J),Ke!==null&&(s&&Ke.alternate!==null&&Ce.delete(Ke.key===null?Re:Ke.key),D=y(Ke,D,Re),be===null?we=Ke:be.sibling=Ke,be=Ke);return s&&Ce.forEach(function(fk){return l(R,fk)}),rt&&Fr(R,Re),we}function dt(R,D,L,J){if(typeof L=="object"&&L!==null&&L.type===M&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case F:e:{for(var we=L.key,be=D;be!==null;){if(be.key===we){if(we=L.type,we===M){if(be.tag===7){c(R,be.sibling),D=m(be,L.props.children),D.return=R,R=D;break e}}else if(be.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Te&&bm(we)===be.type){c(R,be.sibling),D=m(be,L.props),D.ref=Fo(R,be,L),D.return=R,R=D;break e}c(R,be);break}else l(R,be);be=be.sibling}L.type===M?(D=$r(L.props.children,R.mode,J,L.key),D.return=R,R=D):(J=qa(L.type,L.key,L.props,null,R.mode,J),J.ref=Fo(R,D,L),J.return=R,R=J)}return x(R);case $:e:{for(be=L.key;D!==null;){if(D.key===be)if(D.tag===4&&D.stateNode.containerInfo===L.containerInfo&&D.stateNode.implementation===L.implementation){c(R,D.sibling),D=m(D,L.children||[]),D.return=R,R=D;break e}else{c(R,D);break}else l(R,D);D=D.sibling}D=Yh(L,R.mode,J),D.return=R,R=D}return x(R);case Te:return be=L._init,dt(R,D,be(L._payload),J)}if(Mr(L))return me(R,D,L,J);if(ee(L))return ye(R,D,L,J);ba(R,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,D!==null&&D.tag===6?(c(R,D.sibling),D=m(D,L),D.return=R,R=D):(c(R,D),D=Gh(L,R.mode,J),D.return=R,R=D),x(R)):c(R,D)}return dt}var Ts=Cm(!0),Mm=Cm(!1),Ca=Xi(null),Ma=null,Ps=null,rh=null;function sh(){rh=Ps=Ma=null}function oh(s){var l=Ca.current;tt(Ca),s._currentValue=l}function lh(s,l,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),s===c)break;s=s.return}}function Rs(s,l){Ma=s,rh=Ps=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(rn=!0),s.firstContext=null)}function bn(s){var l=s._currentValue;if(rh!==s)if(s={context:s,memoizedValue:l,next:null},Ps===null){if(Ma===null)throw Error(t(308));Ps=s,Ma.dependencies={lanes:0,firstContext:s}}else Ps=Ps.next=s;return l}var zr=null;function ah(s){zr===null?zr=[s]:zr.push(s)}function Em(s,l,c,f){var m=l.interleaved;return m===null?(c.next=c,ah(l)):(c.next=m.next,m.next=c),l.interleaved=c,Ai(s,f)}function Ai(s,l){s.lanes|=l;var c=s.alternate;for(c!==null&&(c.lanes|=l),c=s,s=s.return;s!==null;)s.childLanes|=l,c=s.alternate,c!==null&&(c.childLanes|=l),c=s,s=s.return;return c.tag===3?c.stateNode:null}var er=!1;function uh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Am(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Di(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function tr(s,l,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(We&2)!==0){var m=f.pending;return m===null?l.next=l:(l.next=m.next,m.next=l),f.pending=l,Ai(s,c)}return m=f.interleaved,m===null?(l.next=l,ah(f)):(l.next=m.next,m.next=l),f.interleaved=l,Ai(s,c)}function Ea(s,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194240)!==0)){var f=l.lanes;f&=s.pendingLanes,c|=f,l.lanes=c,bc(s,c)}}function Dm(s,l){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var x={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?m=y=x:y=y.next=x,c=c.next}while(c!==null);y===null?m=y=l:y=y.next=l}else m=y=l;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:f.shared,effects:f.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=l}function Aa(s,l,c,f){var m=s.updateQueue;er=!1;var y=m.firstBaseUpdate,x=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var E=C,I=E.next;E.next=null,x===null?y=I:x.next=I,x=E;var G=s.alternate;G!==null&&(G=G.updateQueue,C=G.lastBaseUpdate,C!==x&&(C===null?G.firstBaseUpdate=I:C.next=I,G.lastBaseUpdate=E))}if(y!==null){var Q=m.baseState;x=0,G=I=E=null,C=y;do{var q=C.lane,le=C.eventTime;if((f&q)===q){G!==null&&(G=G.next={eventTime:le,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var me=s,ye=C;switch(q=l,le=c,ye.tag){case 1:if(me=ye.payload,typeof me=="function"){Q=me.call(le,Q,q);break e}Q=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ye.payload,q=typeof me=="function"?me.call(le,Q,q):me,q==null)break e;Q=Z({},Q,q);break e;case 2:er=!0}}C.callback!==null&&C.lane!==0&&(s.flags|=64,q=m.effects,q===null?m.effects=[C]:q.push(C))}else le={eventTime:le,lane:q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},G===null?(I=G=le,E=Q):G=G.next=le,x|=q;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;q=C,C=q.next,q.next=null,m.lastBaseUpdate=q,m.shared.pending=null}}while(!0);if(G===null&&(E=Q),m.baseState=E,m.firstBaseUpdate=I,m.lastBaseUpdate=G,l=m.shared.interleaved,l!==null){m=l;do x|=m.lane,m=m.next;while(m!==l)}else y===null&&(m.shared.lanes=0);Hr|=x,s.lanes=x,s.memoizedState=Q}}function Tm(s,l,c){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var f=s[l],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var zo={},Zn=Xi(zo),_o=Xi(zo),jo=Xi(zo);function _r(s){if(s===zo)throw Error(t(174));return s}function ch(s,l){switch(Ze(jo,l),Ze(_o,s),Ze(Zn,zo),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:vi(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=vi(l,s)}tt(Zn),Ze(Zn,l)}function Os(){tt(Zn),tt(_o),tt(jo)}function Pm(s){_r(jo.current);var l=_r(Zn.current),c=vi(l,s.type);l!==c&&(Ze(_o,s),Ze(Zn,c))}function hh(s){_o.current===s&&(tt(Zn),tt(_o))}var lt=Xi(0);function Da(s){for(var l=s;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var fh=[];function dh(){for(var s=0;s<fh.length;s++)fh[s]._workInProgressVersionPrimary=null;fh.length=0}var Ta=j.ReactCurrentDispatcher,ph=j.ReactCurrentBatchConfig,jr=0,at=null,St=null,Mt=null,Pa=!1,Ho=!1,Vo=0,NS=0;function jt(){throw Error(t(321))}function mh(s,l){if(l===null)return!1;for(var c=0;c<l.length&&c<s.length;c++)if(!_n(s[c],l[c]))return!1;return!0}function gh(s,l,c,f,m,y){if(jr=y,at=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Ta.current=s===null||s.memoizedState===null?zS:_S,s=c(f,m),Ho){y=0;do{if(Ho=!1,Vo=0,25<=y)throw Error(t(301));y+=1,Mt=St=null,l.updateQueue=null,Ta.current=jS,s=c(f,m)}while(Ho)}if(Ta.current=La,l=St!==null&&St.next!==null,jr=0,Mt=St=at=null,Pa=!1,l)throw Error(t(300));return s}function yh(){var s=Vo!==0;return Vo=0,s}function ei(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?at.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function Cn(){if(St===null){var s=at.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var l=Mt===null?at.memoizedState:Mt.next;if(l!==null)Mt=l,St=s;else{if(s===null)throw Error(t(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Mt===null?at.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function Wo(s,l){return typeof l=="function"?l(s):l}function vh(s){var l=Cn(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var f=St,m=f.baseQueue,y=c.pending;if(y!==null){if(m!==null){var x=m.next;m.next=y.next,y.next=x}f.baseQueue=m=y,c.pending=null}if(m!==null){y=m.next,f=f.baseState;var C=x=null,E=null,I=y;do{var G=I.lane;if((jr&G)===G)E!==null&&(E=E.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),f=I.hasEagerState?I.eagerState:s(f,I.action);else{var Q={lane:G,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};E===null?(C=E=Q,x=f):E=E.next=Q,at.lanes|=G,Hr|=G}I=I.next}while(I!==null&&I!==y);E===null?x=f:E.next=C,_n(f,l.memoizedState)||(rn=!0),l.memoizedState=f,l.baseState=x,l.baseQueue=E,c.lastRenderedState=f}if(s=c.interleaved,s!==null){m=s;do y=m.lane,at.lanes|=y,Hr|=y,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[l.memoizedState,c.dispatch]}function wh(s){var l=Cn(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var f=c.dispatch,m=c.pending,y=l.memoizedState;if(m!==null){c.pending=null;var x=m=m.next;do y=s(y,x.action),x=x.next;while(x!==m);_n(y,l.memoizedState)||(rn=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),c.lastRenderedState=y}return[y,f]}function Rm(){}function Om(s,l){var c=at,f=Cn(),m=l(),y=!_n(f.memoizedState,m);if(y&&(f.memoizedState=m,rn=!0),f=f.queue,xh(Bm.bind(null,c,f,s),[s]),f.getSnapshot!==l||y||Mt!==null&&Mt.memoizedState.tag&1){if(c.flags|=2048,Uo(9,Nm.bind(null,c,f,m,l),void 0,null),Et===null)throw Error(t(349));(jr&30)!==0||Lm(c,l,m)}return m}function Lm(s,l,c){s.flags|=16384,s={getSnapshot:l,value:c},l=at.updateQueue,l===null?(l={lastEffect:null,stores:null},at.updateQueue=l,l.stores=[s]):(c=l.stores,c===null?l.stores=[s]:c.push(s))}function Nm(s,l,c,f){l.value=c,l.getSnapshot=f,Im(l)&&Fm(s)}function Bm(s,l,c){return c(function(){Im(l)&&Fm(s)})}function Im(s){var l=s.getSnapshot;s=s.value;try{var c=l();return!_n(s,c)}catch{return!0}}function Fm(s){var l=Ai(s,1);l!==null&&Un(l,s,1,-1)}function zm(s){var l=ei();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:s},l.queue=s,s=s.dispatch=FS.bind(null,at,s),[l.memoizedState,s]}function Uo(s,l,c,f){return s={tag:s,create:l,destroy:c,deps:f,next:null},l=at.updateQueue,l===null?(l={lastEffect:null,stores:null},at.updateQueue=l,l.lastEffect=s.next=s):(c=l.lastEffect,c===null?l.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,l.lastEffect=s)),s}function _m(){return Cn().memoizedState}function Ra(s,l,c,f){var m=ei();at.flags|=s,m.memoizedState=Uo(1|l,c,void 0,f===void 0?null:f)}function Oa(s,l,c,f){var m=Cn();f=f===void 0?null:f;var y=void 0;if(St!==null){var x=St.memoizedState;if(y=x.destroy,f!==null&&mh(f,x.deps)){m.memoizedState=Uo(l,c,y,f);return}}at.flags|=s,m.memoizedState=Uo(1|l,c,y,f)}function jm(s,l){return Ra(8390656,8,s,l)}function xh(s,l){return Oa(2048,8,s,l)}function Hm(s,l){return Oa(4,2,s,l)}function Vm(s,l){return Oa(4,4,s,l)}function Wm(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Um(s,l,c){return c=c!=null?c.concat([s]):null,Oa(4,4,Wm.bind(null,l,s),c)}function Sh(){}function $m(s,l){var c=Cn();l=l===void 0?null:l;var f=c.memoizedState;return f!==null&&l!==null&&mh(l,f[1])?f[0]:(c.memoizedState=[s,l],s)}function Km(s,l){var c=Cn();l=l===void 0?null:l;var f=c.memoizedState;return f!==null&&l!==null&&mh(l,f[1])?f[0]:(s=s(),c.memoizedState=[s,l],s)}function qm(s,l,c){return(jr&21)===0?(s.baseState&&(s.baseState=!1,rn=!0),s.memoizedState=c):(_n(c,l)||(c=bp(),at.lanes|=c,Hr|=c,s.baseState=!0),l)}function BS(s,l){var c=qe;qe=c!==0&&4>c?c:4,s(!0);var f=ph.transition;ph.transition={};try{s(!1),l()}finally{qe=c,ph.transition=f}}function Gm(){return Cn().memoizedState}function IS(s,l,c){var f=sr(s);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Ym(s))Qm(l,c);else if(c=Em(s,l,c,f),c!==null){var m=Qt();Un(c,s,f,m),Xm(c,l,f)}}function FS(s,l,c){var f=sr(s),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ym(s))Qm(l,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var x=l.lastRenderedState,C=y(x,c);if(m.hasEagerState=!0,m.eagerState=C,_n(C,x)){var E=l.interleaved;E===null?(m.next=m,ah(l)):(m.next=E.next,E.next=m),l.interleaved=m;return}}catch{}finally{}c=Em(s,l,m,f),c!==null&&(m=Qt(),Un(c,s,f,m),Xm(c,l,f))}}function Ym(s){var l=s.alternate;return s===at||l!==null&&l===at}function Qm(s,l){Ho=Pa=!0;var c=s.pending;c===null?l.next=l:(l.next=c.next,c.next=l),s.pending=l}function Xm(s,l,c){if((c&4194240)!==0){var f=l.lanes;f&=s.pendingLanes,c|=f,l.lanes=c,bc(s,c)}}var La={readContext:bn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},zS={readContext:bn,useCallback:function(s,l){return ei().memoizedState=[s,l===void 0?null:l],s},useContext:bn,useEffect:jm,useImperativeHandle:function(s,l,c){return c=c!=null?c.concat([s]):null,Ra(4194308,4,Wm.bind(null,l,s),c)},useLayoutEffect:function(s,l){return Ra(4194308,4,s,l)},useInsertionEffect:function(s,l){return Ra(4,2,s,l)},useMemo:function(s,l){var c=ei();return l=l===void 0?null:l,s=s(),c.memoizedState=[s,l],s},useReducer:function(s,l,c){var f=ei();return l=c!==void 0?c(l):l,f.memoizedState=f.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},f.queue=s,s=s.dispatch=IS.bind(null,at,s),[f.memoizedState,s]},useRef:function(s){var l=ei();return s={current:s},l.memoizedState=s},useState:zm,useDebugValue:Sh,useDeferredValue:function(s){return ei().memoizedState=s},useTransition:function(){var s=zm(!1),l=s[0];return s=BS.bind(null,s[1]),ei().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,c){var f=at,m=ei();if(rt){if(c===void 0)throw Error(t(407));c=c()}else{if(c=l(),Et===null)throw Error(t(349));(jr&30)!==0||Lm(f,l,c)}m.memoizedState=c;var y={value:c,getSnapshot:l};return m.queue=y,jm(Bm.bind(null,f,y,s),[s]),f.flags|=2048,Uo(9,Nm.bind(null,f,y,c,l),void 0,null),c},useId:function(){var s=ei(),l=Et.identifierPrefix;if(rt){var c=Ei,f=Mi;c=(f&~(1<<32-zn(f)-1)).toString(32)+c,l=":"+l+"R"+c,c=Vo++,0<c&&(l+="H"+c.toString(32)),l+=":"}else c=NS++,l=":"+l+"r"+c.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},_S={readContext:bn,useCallback:$m,useContext:bn,useEffect:xh,useImperativeHandle:Um,useInsertionEffect:Hm,useLayoutEffect:Vm,useMemo:Km,useReducer:vh,useRef:_m,useState:function(){return vh(Wo)},useDebugValue:Sh,useDeferredValue:function(s){var l=Cn();return qm(l,St.memoizedState,s)},useTransition:function(){var s=vh(Wo)[0],l=Cn().memoizedState;return[s,l]},useMutableSource:Rm,useSyncExternalStore:Om,useId:Gm,unstable_isNewReconciler:!1},jS={readContext:bn,useCallback:$m,useContext:bn,useEffect:xh,useImperativeHandle:Um,useInsertionEffect:Hm,useLayoutEffect:Vm,useMemo:Km,useReducer:wh,useRef:_m,useState:function(){return wh(Wo)},useDebugValue:Sh,useDeferredValue:function(s){var l=Cn();return St===null?l.memoizedState=s:qm(l,St.memoizedState,s)},useTransition:function(){var s=wh(Wo)[0],l=Cn().memoizedState;return[s,l]},useMutableSource:Rm,useSyncExternalStore:Om,useId:Gm,unstable_isNewReconciler:!1};function Hn(s,l){if(s&&s.defaultProps){l=Z({},l),s=s.defaultProps;for(var c in s)l[c]===void 0&&(l[c]=s[c]);return l}return l}function kh(s,l,c,f){l=s.memoizedState,c=c(f,l),c=c==null?l:Z({},l,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Na={isMounted:function(s){return(s=s._reactInternals)?zt(s)===s:!1},enqueueSetState:function(s,l,c){s=s._reactInternals;var f=Qt(),m=sr(s),y=Di(f,m);y.payload=l,c!=null&&(y.callback=c),l=tr(s,y,m),l!==null&&(Un(l,s,m,f),Ea(l,s,m))},enqueueReplaceState:function(s,l,c){s=s._reactInternals;var f=Qt(),m=sr(s),y=Di(f,m);y.tag=1,y.payload=l,c!=null&&(y.callback=c),l=tr(s,y,m),l!==null&&(Un(l,s,m,f),Ea(l,s,m))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var c=Qt(),f=sr(s),m=Di(c,f);m.tag=2,l!=null&&(m.callback=l),l=tr(s,m,f),l!==null&&(Un(l,s,f,c),Ea(l,s,f))}};function Jm(s,l,c,f,m,y,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,y,x):l.prototype&&l.prototype.isPureReactComponent?!Po(c,f)||!Po(m,y):!0}function Zm(s,l,c){var f=!1,m=Ji,y=l.contextType;return typeof y=="object"&&y!==null?y=bn(y):(m=nn(l)?Br:_t.current,f=l.contextTypes,y=(f=f!=null)?Ms(s,m):Ji),l=new l(c,y),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Na,s.stateNode=l,l._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=y),l}function eg(s,l,c,f){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,f),l.state!==s&&Na.enqueueReplaceState(l,l.state,null)}function bh(s,l,c,f){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},uh(s);var y=l.contextType;typeof y=="object"&&y!==null?m.context=bn(y):(y=nn(l)?Br:_t.current,m.context=Ms(s,y)),m.state=s.memoizedState,y=l.getDerivedStateFromProps,typeof y=="function"&&(kh(s,l,y,c),m.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(l=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),l!==m.state&&Na.enqueueReplaceState(m,m.state,null),Aa(s,c,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Ls(s,l){try{var c="",f=l;do c+=De(f),f=f.return;while(f);var m=c}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:l,stack:m,digest:null}}function Ch(s,l,c){return{value:s,source:null,stack:c??null,digest:l??null}}function Mh(s,l){try{console.error(l.value)}catch(c){setTimeout(function(){throw c})}}var HS=typeof WeakMap=="function"?WeakMap:Map;function tg(s,l,c){c=Di(-1,c),c.tag=3,c.payload={element:null};var f=l.value;return c.callback=function(){Ha||(Ha=!0,jh=f),Mh(s,l)},c}function ng(s,l,c){c=Di(-1,c),c.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;c.payload=function(){return f(m)},c.callback=function(){Mh(s,l)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){Mh(s,l),typeof f!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})}),c}function ig(s,l,c){var f=s.pingCache;if(f===null){f=s.pingCache=new HS;var m=new Set;f.set(l,m)}else m=f.get(l),m===void 0&&(m=new Set,f.set(l,m));m.has(c)||(m.add(c),s=tk.bind(null,s,l,c),l.then(s,s))}function rg(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function sg(s,l,c,f,m){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(l=Di(-1,1),l.tag=2,tr(c,l,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var VS=j.ReactCurrentOwner,rn=!1;function Yt(s,l,c,f){l.child=s===null?Mm(l,null,c,f):Ts(l,s.child,c,f)}function og(s,l,c,f,m){c=c.render;var y=l.ref;return Rs(l,m),f=gh(s,l,c,f,y,m),c=yh(),s!==null&&!rn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~m,Ti(s,l,m)):(rt&&c&&Zc(l),l.flags|=1,Yt(s,l,f,m),l.child)}function lg(s,l,c,f,m){if(s===null){var y=c.type;return typeof y=="function"&&!qh(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(l.tag=15,l.type=y,ag(s,l,y,f,m)):(s=qa(c.type,null,f,l,l.mode,m),s.ref=l.ref,s.return=l,l.child=s)}if(y=s.child,(s.lanes&m)===0){var x=y.memoizedProps;if(c=c.compare,c=c!==null?c:Po,c(x,f)&&s.ref===l.ref)return Ti(s,l,m)}return l.flags|=1,s=lr(y,f),s.ref=l.ref,s.return=l,l.child=s}function ag(s,l,c,f,m){if(s!==null){var y=s.memoizedProps;if(Po(y,f)&&s.ref===l.ref)if(rn=!1,l.pendingProps=f=y,(s.lanes&m)!==0)(s.flags&131072)!==0&&(rn=!0);else return l.lanes=s.lanes,Ti(s,l,m)}return Eh(s,l,c,f,m)}function ug(s,l,c){var f=l.pendingProps,m=f.children,y=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Bs,yn),yn|=c;else{if((c&1073741824)===0)return s=y!==null?y.baseLanes|c:c,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Ze(Bs,yn),yn|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:c,Ze(Bs,yn),yn|=f}else y!==null?(f=y.baseLanes|c,l.memoizedState=null):f=c,Ze(Bs,yn),yn|=f;return Yt(s,l,m,c),l.child}function cg(s,l){var c=l.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(l.flags|=512,l.flags|=2097152)}function Eh(s,l,c,f,m){var y=nn(c)?Br:_t.current;return y=Ms(l,y),Rs(l,m),c=gh(s,l,c,f,y,m),f=yh(),s!==null&&!rn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~m,Ti(s,l,m)):(rt&&f&&Zc(l),l.flags|=1,Yt(s,l,c,m),l.child)}function hg(s,l,c,f,m){if(nn(c)){var y=!0;va(l)}else y=!1;if(Rs(l,m),l.stateNode===null)Ia(s,l),Zm(l,c,f),bh(l,c,f,m),f=!0;else if(s===null){var x=l.stateNode,C=l.memoizedProps;x.props=C;var E=x.context,I=c.contextType;typeof I=="object"&&I!==null?I=bn(I):(I=nn(c)?Br:_t.current,I=Ms(l,I));var G=c.getDerivedStateFromProps,Q=typeof G=="function"||typeof x.getSnapshotBeforeUpdate=="function";Q||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==f||E!==I)&&eg(l,x,f,I),er=!1;var q=l.memoizedState;x.state=q,Aa(l,f,x,m),E=l.memoizedState,C!==f||q!==E||tn.current||er?(typeof G=="function"&&(kh(l,c,G,f),E=l.memoizedState),(C=er||Jm(l,c,C,f,q,E,I))?(Q||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=E),x.props=f,x.state=E,x.context=I,f=C):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{x=l.stateNode,Am(s,l),C=l.memoizedProps,I=l.type===l.elementType?C:Hn(l.type,C),x.props=I,Q=l.pendingProps,q=x.context,E=c.contextType,typeof E=="object"&&E!==null?E=bn(E):(E=nn(c)?Br:_t.current,E=Ms(l,E));var le=c.getDerivedStateFromProps;(G=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==Q||q!==E)&&eg(l,x,f,E),er=!1,q=l.memoizedState,x.state=q,Aa(l,f,x,m);var me=l.memoizedState;C!==Q||q!==me||tn.current||er?(typeof le=="function"&&(kh(l,c,le,f),me=l.memoizedState),(I=er||Jm(l,c,I,f,q,me,E)||!1)?(G||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,me,E),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,me,E)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===s.memoizedProps&&q===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&q===s.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=me),x.props=f,x.state=me,x.context=E,f=I):(typeof x.componentDidUpdate!="function"||C===s.memoizedProps&&q===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&q===s.memoizedState||(l.flags|=1024),f=!1)}return Ah(s,l,c,f,y,m)}function Ah(s,l,c,f,m,y){cg(s,l);var x=(l.flags&128)!==0;if(!f&&!x)return m&&gm(l,c,!1),Ti(s,l,y);f=l.stateNode,VS.current=l;var C=x&&typeof c.getDerivedStateFromError!="function"?null:f.render();return l.flags|=1,s!==null&&x?(l.child=Ts(l,s.child,null,y),l.child=Ts(l,null,C,y)):Yt(s,l,C,y),l.memoizedState=f.state,m&&gm(l,c,!0),l.child}function fg(s){var l=s.stateNode;l.pendingContext?pm(s,l.pendingContext,l.pendingContext!==l.context):l.context&&pm(s,l.context,!1),ch(s,l.containerInfo)}function dg(s,l,c,f,m){return Ds(),ih(m),l.flags|=256,Yt(s,l,c,f),l.child}var Dh={dehydrated:null,treeContext:null,retryLane:0};function Th(s){return{baseLanes:s,cachePool:null,transitions:null}}function pg(s,l,c){var f=l.pendingProps,m=lt.current,y=!1,x=(l.flags&128)!==0,C;if((C=x)||(C=s!==null&&s.memoizedState===null?!1:(m&2)!==0),C?(y=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),Ze(lt,m&1),s===null)return nh(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(x=f.children,s=f.fallback,y?(f=l.mode,y=l.child,x={mode:"hidden",children:x},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Ga(x,f,0,null),s=$r(s,f,c,null),y.return=l,s.return=l,y.sibling=s,l.child=y,l.child.memoizedState=Th(c),l.memoizedState=Dh,s):Ph(l,x));if(m=s.memoizedState,m!==null&&(C=m.dehydrated,C!==null))return WS(s,l,x,f,C,m,c);if(y){y=f.fallback,x=l.mode,m=s.child,C=m.sibling;var E={mode:"hidden",children:f.children};return(x&1)===0&&l.child!==m?(f=l.child,f.childLanes=0,f.pendingProps=E,l.deletions=null):(f=lr(m,E),f.subtreeFlags=m.subtreeFlags&14680064),C!==null?y=lr(C,y):(y=$r(y,x,c,null),y.flags|=2),y.return=l,f.return=l,f.sibling=y,l.child=f,f=y,y=l.child,x=s.child.memoizedState,x=x===null?Th(c):{baseLanes:x.baseLanes|c,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=s.childLanes&~c,l.memoizedState=Dh,f}return y=s.child,s=y.sibling,f=lr(y,{mode:"visible",children:f.children}),(l.mode&1)===0&&(f.lanes=c),f.return=l,f.sibling=null,s!==null&&(c=l.deletions,c===null?(l.deletions=[s],l.flags|=16):c.push(s)),l.child=f,l.memoizedState=null,f}function Ph(s,l){return l=Ga({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Ba(s,l,c,f){return f!==null&&ih(f),Ts(l,s.child,null,c),s=Ph(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function WS(s,l,c,f,m,y,x){if(c)return l.flags&256?(l.flags&=-257,f=Ch(Error(t(422))),Ba(s,l,x,f)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(y=f.fallback,m=l.mode,f=Ga({mode:"visible",children:f.children},m,0,null),y=$r(y,m,x,null),y.flags|=2,f.return=l,y.return=l,f.sibling=y,l.child=f,(l.mode&1)!==0&&Ts(l,s.child,null,x),l.child.memoizedState=Th(x),l.memoizedState=Dh,y);if((l.mode&1)===0)return Ba(s,l,x,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var C=f.dgst;return f=C,y=Error(t(419)),f=Ch(y,f,void 0),Ba(s,l,x,f)}if(C=(x&s.childLanes)!==0,rn||C){if(f=Et,f!==null){switch(x&-x){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|x))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Ai(s,m),Un(f,s,m,-1))}return Kh(),f=Ch(Error(t(421))),Ba(s,l,x,f)}return m.data==="$?"?(l.flags|=128,l.child=s.child,l=nk.bind(null,s),m._reactRetry=l,null):(s=y.treeContext,gn=Qi(m.nextSibling),mn=l,rt=!0,jn=null,s!==null&&(Sn[kn++]=Mi,Sn[kn++]=Ei,Sn[kn++]=Ir,Mi=s.id,Ei=s.overflow,Ir=l),l=Ph(l,f.children),l.flags|=4096,l)}function mg(s,l,c){s.lanes|=l;var f=s.alternate;f!==null&&(f.lanes|=l),lh(s.return,l,c)}function Rh(s,l,c,f,m){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=c,y.tailMode=m)}function gg(s,l,c){var f=l.pendingProps,m=f.revealOrder,y=f.tail;if(Yt(s,l,f.children,c),f=lt.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&mg(s,c,l);else if(s.tag===19)mg(s,c,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(Ze(lt,f),(l.mode&1)===0)l.memoizedState=null;else switch(m){case"forwards":for(c=l.child,m=null;c!==null;)s=c.alternate,s!==null&&Da(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=l.child,l.child=null):(m=c.sibling,c.sibling=null),Rh(l,!1,m,c,y);break;case"backwards":for(c=null,m=l.child,l.child=null;m!==null;){if(s=m.alternate,s!==null&&Da(s)===null){l.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Rh(l,!0,c,null,y);break;case"together":Rh(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ia(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function Ti(s,l,c){if(s!==null&&(l.dependencies=s.dependencies),Hr|=l.lanes,(c&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,c=lr(s,s.pendingProps),l.child=c,c.return=l;s.sibling!==null;)s=s.sibling,c=c.sibling=lr(s,s.pendingProps),c.return=l;c.sibling=null}return l.child}function US(s,l,c){switch(l.tag){case 3:fg(l),Ds();break;case 5:Pm(l);break;case 1:nn(l.type)&&va(l);break;case 4:ch(l,l.stateNode.containerInfo);break;case 10:var f=l.type._context,m=l.memoizedProps.value;Ze(Ca,f._currentValue),f._currentValue=m;break;case 13:if(f=l.memoizedState,f!==null)return f.dehydrated!==null?(Ze(lt,lt.current&1),l.flags|=128,null):(c&l.child.childLanes)!==0?pg(s,l,c):(Ze(lt,lt.current&1),s=Ti(s,l,c),s!==null?s.sibling:null);Ze(lt,lt.current&1);break;case 19:if(f=(c&l.childLanes)!==0,(s.flags&128)!==0){if(f)return gg(s,l,c);l.flags|=128}if(m=l.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ze(lt,lt.current),f)break;return null;case 22:case 23:return l.lanes=0,ug(s,l,c)}return Ti(s,l,c)}var yg,Oh,vg,wg;yg=function(s,l){for(var c=l.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Oh=function(){},vg=function(s,l,c,f){var m=s.memoizedProps;if(m!==f){s=l.stateNode,_r(Zn.current);var y=null;switch(c){case"input":m=hs(s,m),f=hs(s,f),y=[];break;case"select":m=Z({},m,{value:void 0}),f=Z({},f,{value:void 0}),y=[];break;case"textarea":m=yi(s,m),f=yi(s,f),y=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=ma)}ds(c,f);var x;c=null;for(I in m)if(!f.hasOwnProperty(I)&&m.hasOwnProperty(I)&&m[I]!=null)if(I==="style"){var C=m[I];for(x in C)C.hasOwnProperty(x)&&(c||(c={}),c[x]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(r.hasOwnProperty(I)?y||(y=[]):(y=y||[]).push(I,null));for(I in f){var E=f[I];if(C=m!=null?m[I]:void 0,f.hasOwnProperty(I)&&E!==C&&(E!=null||C!=null))if(I==="style")if(C){for(x in C)!C.hasOwnProperty(x)||E&&E.hasOwnProperty(x)||(c||(c={}),c[x]="");for(x in E)E.hasOwnProperty(x)&&C[x]!==E[x]&&(c||(c={}),c[x]=E[x])}else c||(y||(y=[]),y.push(I,c)),c=E;else I==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,C=C?C.__html:void 0,E!=null&&C!==E&&(y=y||[]).push(I,E)):I==="children"?typeof E!="string"&&typeof E!="number"||(y=y||[]).push(I,""+E):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(r.hasOwnProperty(I)?(E!=null&&I==="onScroll"&&et("scroll",s),y||C===E||(y=[])):(y=y||[]).push(I,E))}c&&(y=y||[]).push("style",c);var I=y;(l.updateQueue=I)&&(l.flags|=4)}},wg=function(s,l,c,f){c!==f&&(l.flags|=4)};function $o(s,l){if(!rt)switch(s.tailMode){case"hidden":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Ht(s){var l=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(l)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=c,l}function $S(s,l,c){var f=l.pendingProps;switch(eh(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(l),null;case 1:return nn(l.type)&&ya(),Ht(l),null;case 3:return f=l.stateNode,Os(),tt(tn),tt(_t),dh(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(ka(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,jn!==null&&(Wh(jn),jn=null))),Oh(s,l),Ht(l),null;case 5:hh(l);var m=_r(jo.current);if(c=l.type,s!==null&&l.stateNode!=null)vg(s,l,c,f,m),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!f){if(l.stateNode===null)throw Error(t(166));return Ht(l),null}if(s=_r(Zn.current),ka(l)){f=l.stateNode,c=l.type;var y=l.memoizedProps;switch(f[Jn]=l,f[Bo]=y,s=(l.mode&1)!==0,c){case"dialog":et("cancel",f),et("close",f);break;case"iframe":case"object":case"embed":et("load",f);break;case"video":case"audio":for(m=0;m<Oo.length;m++)et(Oo[m],f);break;case"source":et("error",f);break;case"img":case"image":case"link":et("error",f),et("load",f);break;case"details":et("toggle",f);break;case"input":ql(f,y),et("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},et("invalid",f);break;case"textarea":ji(f,y),et("invalid",f)}ds(c,y),m=null;for(var x in y)if(y.hasOwnProperty(x)){var C=y[x];x==="children"?typeof C=="string"?f.textContent!==C&&(y.suppressHydrationWarning!==!0&&pa(f.textContent,C,s),m=["children",C]):typeof C=="number"&&f.textContent!==""+C&&(y.suppressHydrationWarning!==!0&&pa(f.textContent,C,s),m=["children",""+C]):r.hasOwnProperty(x)&&C!=null&&x==="onScroll"&&et("scroll",f)}switch(c){case"input":cs(f),Gl(f,y,!0);break;case"textarea":cs(f),fs(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=ma)}f=m,l.updateQueue=f,f!==null&&(l.flags|=4)}else{x=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Fn(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=x.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=x.createElement(c,{is:f.is}):(s=x.createElement(c),c==="select"&&(x=s,f.multiple?x.multiple=!0:f.size&&(x.size=f.size))):s=x.createElementNS(s,c),s[Jn]=l,s[Bo]=f,yg(s,l,!1,!1),l.stateNode=s;e:{switch(x=Hi(c,f),c){case"dialog":et("cancel",s),et("close",s),m=f;break;case"iframe":case"object":case"embed":et("load",s),m=f;break;case"video":case"audio":for(m=0;m<Oo.length;m++)et(Oo[m],s);m=f;break;case"source":et("error",s),m=f;break;case"img":case"image":case"link":et("error",s),et("load",s),m=f;break;case"details":et("toggle",s),m=f;break;case"input":ql(s,f),m=hs(s,f),et("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=Z({},f,{value:void 0}),et("invalid",s);break;case"textarea":ji(s,f),m=yi(s,f),et("invalid",s);break;default:m=f}ds(c,m),C=m;for(y in C)if(C.hasOwnProperty(y)){var E=C[y];y==="style"?po(s,E):y==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Ar(s,E)):y==="children"?typeof E=="string"?(c!=="textarea"||E!=="")&&Dr(s,E):typeof E=="number"&&Dr(s,""+E):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?E!=null&&y==="onScroll"&&et("scroll",s):E!=null&&z(s,y,E,x))}switch(c){case"input":cs(s),Gl(s,f,!1);break;case"textarea":cs(s),fs(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Ve(f.value));break;case"select":s.multiple=!!f.multiple,y=f.value,y!=null?_i(s,!!f.multiple,y,!1):f.defaultValue!=null&&_i(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=ma)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ht(l),null;case 6:if(s&&l.stateNode!=null)wg(s,l,s.memoizedProps,f);else{if(typeof f!="string"&&l.stateNode===null)throw Error(t(166));if(c=_r(jo.current),_r(Zn.current),ka(l)){if(f=l.stateNode,c=l.memoizedProps,f[Jn]=l,(y=f.nodeValue!==c)&&(s=mn,s!==null))switch(s.tag){case 3:pa(f.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&pa(f.nodeValue,c,(s.mode&1)!==0)}y&&(l.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Jn]=l,l.stateNode=f}return Ht(l),null;case 13:if(tt(lt),f=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(rt&&gn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)km(),Ds(),l.flags|=98560,y=!1;else if(y=ka(l),f!==null&&f.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Jn]=l}else Ds(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ht(l),y=!1}else jn!==null&&(Wh(jn),jn=null),y=!0;if(!y)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=c,l):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(lt.current&1)!==0?kt===0&&(kt=3):Kh())),l.updateQueue!==null&&(l.flags|=4),Ht(l),null);case 4:return Os(),Oh(s,l),s===null&&Lo(l.stateNode.containerInfo),Ht(l),null;case 10:return oh(l.type._context),Ht(l),null;case 17:return nn(l.type)&&ya(),Ht(l),null;case 19:if(tt(lt),y=l.memoizedState,y===null)return Ht(l),null;if(f=(l.flags&128)!==0,x=y.rendering,x===null)if(f)$o(y,!1);else{if(kt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(x=Da(s),x!==null){for(l.flags|=128,$o(y,!1),f=x.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),l.subtreeFlags=0,f=c,c=l.child;c!==null;)y=c,s=f,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,s=x.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Ze(lt,lt.current&1|2),l.child}s=s.sibling}y.tail!==null&&He()>Is&&(l.flags|=128,f=!0,$o(y,!1),l.lanes=4194304)}else{if(!f)if(s=Da(x),s!==null){if(l.flags|=128,f=!0,c=s.updateQueue,c!==null&&(l.updateQueue=c,l.flags|=4),$o(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!rt)return Ht(l),null}else 2*He()-y.renderingStartTime>Is&&c!==1073741824&&(l.flags|=128,f=!0,$o(y,!1),l.lanes=4194304);y.isBackwards?(x.sibling=l.child,l.child=x):(c=y.last,c!==null?c.sibling=x:l.child=x,y.last=x)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=He(),l.sibling=null,c=lt.current,Ze(lt,f?c&1|2:c&1),l):(Ht(l),null);case 22:case 23:return $h(),f=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(l.flags|=8192),f&&(l.mode&1)!==0?(yn&1073741824)!==0&&(Ht(l),l.subtreeFlags&6&&(l.flags|=8192)):Ht(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function KS(s,l){switch(eh(l),l.tag){case 1:return nn(l.type)&&ya(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Os(),tt(tn),tt(_t),dh(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return hh(l),null;case 13:if(tt(lt),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Ds()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return tt(lt),null;case 4:return Os(),null;case 10:return oh(l.type._context),null;case 22:case 23:return $h(),null;case 24:return null;default:return null}}var Fa=!1,Vt=!1,qS=typeof WeakSet=="function"?WeakSet:Set,de=null;function Ns(s,l){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){ft(s,l,f)}else c.current=null}function Lh(s,l,c){try{c()}catch(f){ft(s,l,f)}}var xg=!1;function GS(s,l){if($c=ia,s=Jp(),Fc(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var x=0,C=-1,E=-1,I=0,G=0,Q=s,q=null;t:for(;;){for(var le;Q!==c||m!==0&&Q.nodeType!==3||(C=x+m),Q!==y||f!==0&&Q.nodeType!==3||(E=x+f),Q.nodeType===3&&(x+=Q.nodeValue.length),(le=Q.firstChild)!==null;)q=Q,Q=le;for(;;){if(Q===s)break t;if(q===c&&++I===m&&(C=x),q===y&&++G===f&&(E=x),(le=Q.nextSibling)!==null)break;Q=q,q=Q.parentNode}Q=le}c=C===-1||E===-1?null:{start:C,end:E}}else c=null}c=c||{start:0,end:0}}else c=null;for(Kc={focusedElem:s,selectionRange:c},ia=!1,de=l;de!==null;)if(l=de,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,de=s;else for(;de!==null;){l=de;try{var me=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ye=me.memoizedProps,dt=me.memoizedState,R=l.stateNode,D=R.getSnapshotBeforeUpdate(l.elementType===l.type?ye:Hn(l.type,ye),dt);R.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var L=l.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){ft(l,l.return,J)}if(s=l.sibling,s!==null){s.return=l.return,de=s;break}de=l.return}return me=xg,xg=!1,me}function Ko(s,l,c){var f=l.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var y=m.destroy;m.destroy=void 0,y!==void 0&&Lh(l,c,y)}m=m.next}while(m!==f)}}function za(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&s)===s){var f=c.create;c.destroy=f()}c=c.next}while(c!==l)}}function Nh(s){var l=s.ref;if(l!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof l=="function"?l(s):l.current=s}}function Sg(s){var l=s.alternate;l!==null&&(s.alternate=null,Sg(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Jn],delete l[Bo],delete l[Qc],delete l[PS],delete l[RS])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function kg(s){return s.tag===5||s.tag===3||s.tag===4}function bg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||kg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bh(s,l,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,l?c.nodeType===8?c.parentNode.insertBefore(s,l):c.insertBefore(s,l):(c.nodeType===8?(l=c.parentNode,l.insertBefore(s,c)):(l=c,l.appendChild(s)),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=ma));else if(f!==4&&(s=s.child,s!==null))for(Bh(s,l,c),s=s.sibling;s!==null;)Bh(s,l,c),s=s.sibling}function Ih(s,l,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,l?c.insertBefore(s,l):c.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(Ih(s,l,c),s=s.sibling;s!==null;)Ih(s,l,c),s=s.sibling}var Pt=null,Vn=!1;function nr(s,l,c){for(c=c.child;c!==null;)Cg(s,l,c),c=c.sibling}function Cg(s,l,c){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(Xl,c)}catch{}switch(c.tag){case 5:Vt||Ns(c,l);case 6:var f=Pt,m=Vn;Pt=null,nr(s,l,c),Pt=f,Vn=m,Pt!==null&&(Vn?(s=Pt,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):Pt.removeChild(c.stateNode));break;case 18:Pt!==null&&(Vn?(s=Pt,c=c.stateNode,s.nodeType===8?Yc(s.parentNode,c):s.nodeType===1&&Yc(s,c),Co(s)):Yc(Pt,c.stateNode));break;case 4:f=Pt,m=Vn,Pt=c.stateNode.containerInfo,Vn=!0,nr(s,l,c),Pt=f,Vn=m;break;case 0:case 11:case 14:case 15:if(!Vt&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var y=m,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&Lh(c,l,x),m=m.next}while(m!==f)}nr(s,l,c);break;case 1:if(!Vt&&(Ns(c,l),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(C){ft(c,l,C)}nr(s,l,c);break;case 21:nr(s,l,c);break;case 22:c.mode&1?(Vt=(f=Vt)||c.memoizedState!==null,nr(s,l,c),Vt=f):nr(s,l,c);break;default:nr(s,l,c)}}function Mg(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new qS),l.forEach(function(f){var m=ik.bind(null,s,f);c.has(f)||(c.add(f),f.then(m,m))})}}function Wn(s,l){var c=l.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var y=s,x=l,C=x;e:for(;C!==null;){switch(C.tag){case 5:Pt=C.stateNode,Vn=!1;break e;case 3:Pt=C.stateNode.containerInfo,Vn=!0;break e;case 4:Pt=C.stateNode.containerInfo,Vn=!0;break e}C=C.return}if(Pt===null)throw Error(t(160));Cg(y,x,m),Pt=null,Vn=!1;var E=m.alternate;E!==null&&(E.return=null),m.return=null}catch(I){ft(m,l,I)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Eg(l,s),l=l.sibling}function Eg(s,l){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Wn(l,s),ti(s),f&4){try{Ko(3,s,s.return),za(3,s)}catch(ye){ft(s,s.return,ye)}try{Ko(5,s,s.return)}catch(ye){ft(s,s.return,ye)}}break;case 1:Wn(l,s),ti(s),f&512&&c!==null&&Ns(c,c.return);break;case 5:if(Wn(l,s),ti(s),f&512&&c!==null&&Ns(c,c.return),s.flags&32){var m=s.stateNode;try{Dr(m,"")}catch(ye){ft(s,s.return,ye)}}if(f&4&&(m=s.stateNode,m!=null)){var y=s.memoizedProps,x=c!==null?c.memoizedProps:y,C=s.type,E=s.updateQueue;if(s.updateQueue=null,E!==null)try{C==="input"&&y.type==="radio"&&y.name!=null&&Qn(m,y),Hi(C,x);var I=Hi(C,y);for(x=0;x<E.length;x+=2){var G=E[x],Q=E[x+1];G==="style"?po(m,Q):G==="dangerouslySetInnerHTML"?Ar(m,Q):G==="children"?Dr(m,Q):z(m,G,Q,I)}switch(C){case"input":uo(m,y);break;case"textarea":ho(m,y);break;case"select":var q=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var le=y.value;le!=null?_i(m,!!y.multiple,le,!1):q!==!!y.multiple&&(y.defaultValue!=null?_i(m,!!y.multiple,y.defaultValue,!0):_i(m,!!y.multiple,y.multiple?[]:"",!1))}m[Bo]=y}catch(ye){ft(s,s.return,ye)}}break;case 6:if(Wn(l,s),ti(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,y=s.memoizedProps;try{m.nodeValue=y}catch(ye){ft(s,s.return,ye)}}break;case 3:if(Wn(l,s),ti(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Co(l.containerInfo)}catch(ye){ft(s,s.return,ye)}break;case 4:Wn(l,s),ti(s);break;case 13:Wn(l,s),ti(s),m=s.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(_h=He())),f&4&&Mg(s);break;case 22:if(G=c!==null&&c.memoizedState!==null,s.mode&1?(Vt=(I=Vt)||G,Wn(l,s),Vt=I):Wn(l,s),ti(s),f&8192){if(I=s.memoizedState!==null,(s.stateNode.isHidden=I)&&!G&&(s.mode&1)!==0)for(de=s,G=s.child;G!==null;){for(Q=de=G;de!==null;){switch(q=de,le=q.child,q.tag){case 0:case 11:case 14:case 15:Ko(4,q,q.return);break;case 1:Ns(q,q.return);var me=q.stateNode;if(typeof me.componentWillUnmount=="function"){f=q,c=q.return;try{l=f,me.props=l.memoizedProps,me.state=l.memoizedState,me.componentWillUnmount()}catch(ye){ft(f,c,ye)}}break;case 5:Ns(q,q.return);break;case 22:if(q.memoizedState!==null){Tg(Q);continue}}le!==null?(le.return=q,de=le):Tg(Q)}G=G.sibling}e:for(G=null,Q=s;;){if(Q.tag===5){if(G===null){G=Q;try{m=Q.stateNode,I?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(C=Q.stateNode,E=Q.memoizedProps.style,x=E!=null&&E.hasOwnProperty("display")?E.display:null,C.style.display=fo("display",x))}catch(ye){ft(s,s.return,ye)}}}else if(Q.tag===6){if(G===null)try{Q.stateNode.nodeValue=I?"":Q.memoizedProps}catch(ye){ft(s,s.return,ye)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===s)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===s)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===s)break e;G===Q&&(G=null),Q=Q.return}G===Q&&(G=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Wn(l,s),ti(s),f&4&&Mg(s);break;case 21:break;default:Wn(l,s),ti(s)}}function ti(s){var l=s.flags;if(l&2){try{e:{for(var c=s.return;c!==null;){if(kg(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Dr(m,""),f.flags&=-33);var y=bg(s);Ih(s,y,m);break;case 3:case 4:var x=f.stateNode.containerInfo,C=bg(s);Bh(s,C,x);break;default:throw Error(t(161))}}catch(E){ft(s,s.return,E)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function YS(s,l,c){de=s,Ag(s)}function Ag(s,l,c){for(var f=(s.mode&1)!==0;de!==null;){var m=de,y=m.child;if(m.tag===22&&f){var x=m.memoizedState!==null||Fa;if(!x){var C=m.alternate,E=C!==null&&C.memoizedState!==null||Vt;C=Fa;var I=Vt;if(Fa=x,(Vt=E)&&!I)for(de=m;de!==null;)x=de,E=x.child,x.tag===22&&x.memoizedState!==null?Pg(m):E!==null?(E.return=x,de=E):Pg(m);for(;y!==null;)de=y,Ag(y),y=y.sibling;de=m,Fa=C,Vt=I}Dg(s)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,de=y):Dg(s)}}function Dg(s){for(;de!==null;){var l=de;if((l.flags&8772)!==0){var c=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Vt||za(5,l);break;case 1:var f=l.stateNode;if(l.flags&4&&!Vt)if(c===null)f.componentDidMount();else{var m=l.elementType===l.type?c.memoizedProps:Hn(l.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=l.updateQueue;y!==null&&Tm(l,y,f);break;case 3:var x=l.updateQueue;if(x!==null){if(c=null,l.child!==null)switch(l.child.tag){case 5:c=l.child.stateNode;break;case 1:c=l.child.stateNode}Tm(l,x,c)}break;case 5:var C=l.stateNode;if(c===null&&l.flags&4){c=C;var E=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&c.focus();break;case"img":E.src&&(c.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var I=l.alternate;if(I!==null){var G=I.memoizedState;if(G!==null){var Q=G.dehydrated;Q!==null&&Co(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Vt||l.flags&512&&Nh(l)}catch(q){ft(l,l.return,q)}}if(l===s){de=null;break}if(c=l.sibling,c!==null){c.return=l.return,de=c;break}de=l.return}}function Tg(s){for(;de!==null;){var l=de;if(l===s){de=null;break}var c=l.sibling;if(c!==null){c.return=l.return,de=c;break}de=l.return}}function Pg(s){for(;de!==null;){var l=de;try{switch(l.tag){case 0:case 11:case 15:var c=l.return;try{za(4,l)}catch(E){ft(l,c,E)}break;case 1:var f=l.stateNode;if(typeof f.componentDidMount=="function"){var m=l.return;try{f.componentDidMount()}catch(E){ft(l,m,E)}}var y=l.return;try{Nh(l)}catch(E){ft(l,y,E)}break;case 5:var x=l.return;try{Nh(l)}catch(E){ft(l,x,E)}}}catch(E){ft(l,l.return,E)}if(l===s){de=null;break}var C=l.sibling;if(C!==null){C.return=l.return,de=C;break}de=l.return}}var QS=Math.ceil,_a=j.ReactCurrentDispatcher,Fh=j.ReactCurrentOwner,Mn=j.ReactCurrentBatchConfig,We=0,Et=null,yt=null,Rt=0,yn=0,Bs=Xi(0),kt=0,qo=null,Hr=0,ja=0,zh=0,Go=null,sn=null,_h=0,Is=1/0,Pi=null,Ha=!1,jh=null,ir=null,Va=!1,rr=null,Wa=0,Yo=0,Hh=null,Ua=-1,$a=0;function Qt(){return(We&6)!==0?He():Ua!==-1?Ua:Ua=He()}function sr(s){return(s.mode&1)===0?1:(We&2)!==0&&Rt!==0?Rt&-Rt:LS.transition!==null?($a===0&&($a=bp()),$a):(s=qe,s!==0||(s=window.event,s=s===void 0?16:Op(s.type)),s)}function Un(s,l,c,f){if(50<Yo)throw Yo=0,Hh=null,Error(t(185));wo(s,c,f),((We&2)===0||s!==Et)&&(s===Et&&((We&2)===0&&(ja|=c),kt===4&&or(s,Rt)),on(s,f),c===1&&We===0&&(l.mode&1)===0&&(Is=He()+500,wa&&Zi()))}function on(s,l){var c=s.callbackNode;Lx(s,l);var f=ea(s,s===Et?Rt:0);if(f===0)c!==null&&Lr(c),s.callbackNode=null,s.callbackPriority=0;else if(l=f&-f,s.callbackPriority!==l){if(c!=null&&Lr(c),l===1)s.tag===0?OS(Og.bind(null,s)):ym(Og.bind(null,s)),DS(function(){(We&6)===0&&Zi()}),c=null;else{switch(Cp(f)){case 1:c=ki;break;case 4:c=yo;break;case 16:c=ms;break;case 536870912:c=kp;break;default:c=ms}c=jg(c,Rg.bind(null,s))}s.callbackPriority=l,s.callbackNode=c}}function Rg(s,l){if(Ua=-1,$a=0,(We&6)!==0)throw Error(t(327));var c=s.callbackNode;if(Fs()&&s.callbackNode!==c)return null;var f=ea(s,s===Et?Rt:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||l)l=Ka(s,f);else{l=f;var m=We;We|=2;var y=Ng();(Et!==s||Rt!==l)&&(Pi=null,Is=He()+500,Wr(s,l));do try{ZS();break}catch(C){Lg(s,C)}while(!0);sh(),_a.current=y,We=m,yt!==null?l=0:(Et=null,Rt=0,l=kt)}if(l!==0){if(l===2&&(m=Sc(s),m!==0&&(f=m,l=Vh(s,m))),l===1)throw c=qo,Wr(s,0),or(s,f),on(s,He()),c;if(l===6)or(s,f);else{if(m=s.current.alternate,(f&30)===0&&!XS(m)&&(l=Ka(s,f),l===2&&(y=Sc(s),y!==0&&(f=y,l=Vh(s,y))),l===1))throw c=qo,Wr(s,0),or(s,f),on(s,He()),c;switch(s.finishedWork=m,s.finishedLanes=f,l){case 0:case 1:throw Error(t(345));case 2:Ur(s,sn,Pi);break;case 3:if(or(s,f),(f&130023424)===f&&(l=_h+500-He(),10<l)){if(ea(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){Qt(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=Gc(Ur.bind(null,s,sn,Pi),l);break}Ur(s,sn,Pi);break;case 4:if(or(s,f),(f&4194240)===f)break;for(l=s.eventTimes,m=-1;0<f;){var x=31-zn(f);y=1<<x,x=l[x],x>m&&(m=x),f&=~y}if(f=m,f=He()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*QS(f/1960))-f,10<f){s.timeoutHandle=Gc(Ur.bind(null,s,sn,Pi),f);break}Ur(s,sn,Pi);break;case 5:Ur(s,sn,Pi);break;default:throw Error(t(329))}}}return on(s,He()),s.callbackNode===c?Rg.bind(null,s):null}function Vh(s,l){var c=Go;return s.current.memoizedState.isDehydrated&&(Wr(s,l).flags|=256),s=Ka(s,l),s!==2&&(l=sn,sn=c,l!==null&&Wh(l)),s}function Wh(s){sn===null?sn=s:sn.push.apply(sn,s)}function XS(s){for(var l=s;;){if(l.flags&16384){var c=l.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],y=m.getSnapshot;m=m.value;try{if(!_n(y(),m))return!1}catch{return!1}}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function or(s,l){for(l&=~zh,l&=~ja,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var c=31-zn(l),f=1<<c;s[c]=-1,l&=~f}}function Og(s){if((We&6)!==0)throw Error(t(327));Fs();var l=ea(s,0);if((l&1)===0)return on(s,He()),null;var c=Ka(s,l);if(s.tag!==0&&c===2){var f=Sc(s);f!==0&&(l=f,c=Vh(s,f))}if(c===1)throw c=qo,Wr(s,0),or(s,l),on(s,He()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Ur(s,sn,Pi),on(s,He()),null}function Uh(s,l){var c=We;We|=1;try{return s(l)}finally{We=c,We===0&&(Is=He()+500,wa&&Zi())}}function Vr(s){rr!==null&&rr.tag===0&&(We&6)===0&&Fs();var l=We;We|=1;var c=Mn.transition,f=qe;try{if(Mn.transition=null,qe=1,s)return s()}finally{qe=f,Mn.transition=c,We=l,(We&6)===0&&Zi()}}function $h(){yn=Bs.current,tt(Bs)}function Wr(s,l){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,AS(c)),yt!==null)for(c=yt.return;c!==null;){var f=c;switch(eh(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ya();break;case 3:Os(),tt(tn),tt(_t),dh();break;case 5:hh(f);break;case 4:Os();break;case 13:tt(lt);break;case 19:tt(lt);break;case 10:oh(f.type._context);break;case 22:case 23:$h()}c=c.return}if(Et=s,yt=s=lr(s.current,null),Rt=yn=l,kt=0,qo=null,zh=ja=Hr=0,sn=Go=null,zr!==null){for(l=0;l<zr.length;l++)if(c=zr[l],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,y=c.pending;if(y!==null){var x=y.next;y.next=m,f.next=x}c.pending=f}zr=null}return s}function Lg(s,l){do{var c=yt;try{if(sh(),Ta.current=La,Pa){for(var f=at.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Pa=!1}if(jr=0,Mt=St=at=null,Ho=!1,Vo=0,Fh.current=null,c===null||c.return===null){kt=1,qo=l,yt=null;break}e:{var y=s,x=c.return,C=c,E=l;if(l=Rt,C.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var I=E,G=C,Q=G.tag;if((G.mode&1)===0&&(Q===0||Q===11||Q===15)){var q=G.alternate;q?(G.updateQueue=q.updateQueue,G.memoizedState=q.memoizedState,G.lanes=q.lanes):(G.updateQueue=null,G.memoizedState=null)}var le=rg(x);if(le!==null){le.flags&=-257,sg(le,x,C,y,l),le.mode&1&&ig(y,I,l),l=le,E=I;var me=l.updateQueue;if(me===null){var ye=new Set;ye.add(E),l.updateQueue=ye}else me.add(E);break e}else{if((l&1)===0){ig(y,I,l),Kh();break e}E=Error(t(426))}}else if(rt&&C.mode&1){var dt=rg(x);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),sg(dt,x,C,y,l),ih(Ls(E,C));break e}}y=E=Ls(E,C),kt!==4&&(kt=2),Go===null?Go=[y]:Go.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,l&=-l,y.lanes|=l;var R=tg(y,E,l);Dm(y,R);break e;case 1:C=E;var D=y.type,L=y.stateNode;if((y.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(ir===null||!ir.has(L)))){y.flags|=65536,l&=-l,y.lanes|=l;var J=ng(y,C,l);Dm(y,J);break e}}y=y.return}while(y!==null)}Ig(c)}catch(we){l=we,yt===c&&c!==null&&(yt=c=c.return);continue}break}while(!0)}function Ng(){var s=_a.current;return _a.current=La,s===null?La:s}function Kh(){(kt===0||kt===3||kt===2)&&(kt=4),Et===null||(Hr&268435455)===0&&(ja&268435455)===0||or(Et,Rt)}function Ka(s,l){var c=We;We|=2;var f=Ng();(Et!==s||Rt!==l)&&(Pi=null,Wr(s,l));do try{JS();break}catch(m){Lg(s,m)}while(!0);if(sh(),We=c,_a.current=f,yt!==null)throw Error(t(261));return Et=null,Rt=0,kt}function JS(){for(;yt!==null;)Bg(yt)}function ZS(){for(;yt!==null&&!ze();)Bg(yt)}function Bg(s){var l=_g(s.alternate,s,yn);s.memoizedProps=s.pendingProps,l===null?Ig(s):yt=l,Fh.current=null}function Ig(s){var l=s;do{var c=l.alternate;if(s=l.return,(l.flags&32768)===0){if(c=$S(c,l,yn),c!==null){yt=c;return}}else{if(c=KS(c,l),c!==null){c.flags&=32767,yt=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{kt=6,yt=null;return}}if(l=l.sibling,l!==null){yt=l;return}yt=l=s}while(l!==null);kt===0&&(kt=5)}function Ur(s,l,c){var f=qe,m=Mn.transition;try{Mn.transition=null,qe=1,ek(s,l,c,f)}finally{Mn.transition=m,qe=f}return null}function ek(s,l,c,f){do Fs();while(rr!==null);if((We&6)!==0)throw Error(t(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=c.lanes|c.childLanes;if(Nx(s,y),s===Et&&(yt=Et=null,Rt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Va||(Va=!0,jg(ms,function(){return Fs(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=Mn.transition,Mn.transition=null;var x=qe;qe=1;var C=We;We|=4,Fh.current=null,GS(s,c),Eg(c,s),xS(Kc),ia=!!$c,Kc=$c=null,s.current=c,YS(c),Tt(),We=C,qe=x,Mn.transition=y}else s.current=c;if(Va&&(Va=!1,rr=s,Wa=m),y=s.pendingLanes,y===0&&(ir=null),Dx(c.stateNode),on(s,He()),l!==null)for(f=s.onRecoverableError,c=0;c<l.length;c++)m=l[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(Ha)throw Ha=!1,s=jh,jh=null,s;return(Wa&1)!==0&&s.tag!==0&&Fs(),y=s.pendingLanes,(y&1)!==0?s===Hh?Yo++:(Yo=0,Hh=s):Yo=0,Zi(),null}function Fs(){if(rr!==null){var s=Cp(Wa),l=Mn.transition,c=qe;try{if(Mn.transition=null,qe=16>s?16:s,rr===null)var f=!1;else{if(s=rr,rr=null,Wa=0,(We&6)!==0)throw Error(t(331));var m=We;for(We|=4,de=s.current;de!==null;){var y=de,x=y.child;if((de.flags&16)!==0){var C=y.deletions;if(C!==null){for(var E=0;E<C.length;E++){var I=C[E];for(de=I;de!==null;){var G=de;switch(G.tag){case 0:case 11:case 15:Ko(8,G,y)}var Q=G.child;if(Q!==null)Q.return=G,de=Q;else for(;de!==null;){G=de;var q=G.sibling,le=G.return;if(Sg(G),G===I){de=null;break}if(q!==null){q.return=le,de=q;break}de=le}}}var me=y.alternate;if(me!==null){var ye=me.child;if(ye!==null){me.child=null;do{var dt=ye.sibling;ye.sibling=null,ye=dt}while(ye!==null)}}de=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,de=x;else e:for(;de!==null;){if(y=de,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ko(9,y,y.return)}var R=y.sibling;if(R!==null){R.return=y.return,de=R;break e}de=y.return}}var D=s.current;for(de=D;de!==null;){x=de;var L=x.child;if((x.subtreeFlags&2064)!==0&&L!==null)L.return=x,de=L;else e:for(x=D;de!==null;){if(C=de,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:za(9,C)}}catch(we){ft(C,C.return,we)}if(C===x){de=null;break e}var J=C.sibling;if(J!==null){J.return=C.return,de=J;break e}de=C.return}}if(We=m,Zi(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(Xl,s)}catch{}f=!0}return f}finally{qe=c,Mn.transition=l}}return!1}function Fg(s,l,c){l=Ls(c,l),l=tg(s,l,1),s=tr(s,l,1),l=Qt(),s!==null&&(wo(s,1,l),on(s,l))}function ft(s,l,c){if(s.tag===3)Fg(s,s,c);else for(;l!==null;){if(l.tag===3){Fg(l,s,c);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ir===null||!ir.has(f))){s=Ls(c,s),s=ng(l,s,1),l=tr(l,s,1),s=Qt(),l!==null&&(wo(l,1,s),on(l,s));break}}l=l.return}}function tk(s,l,c){var f=s.pingCache;f!==null&&f.delete(l),l=Qt(),s.pingedLanes|=s.suspendedLanes&c,Et===s&&(Rt&c)===c&&(kt===4||kt===3&&(Rt&130023424)===Rt&&500>He()-_h?Wr(s,0):zh|=c),on(s,l)}function zg(s,l){l===0&&((s.mode&1)===0?l=1:(l=Zl,Zl<<=1,(Zl&130023424)===0&&(Zl=4194304)));var c=Qt();s=Ai(s,l),s!==null&&(wo(s,l,c),on(s,c))}function nk(s){var l=s.memoizedState,c=0;l!==null&&(c=l.retryLane),zg(s,c)}function ik(s,l){var c=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(l),zg(s,c)}var _g;_g=function(s,l,c){if(s!==null)if(s.memoizedProps!==l.pendingProps||tn.current)rn=!0;else{if((s.lanes&c)===0&&(l.flags&128)===0)return rn=!1,US(s,l,c);rn=(s.flags&131072)!==0}else rn=!1,rt&&(l.flags&1048576)!==0&&vm(l,Sa,l.index);switch(l.lanes=0,l.tag){case 2:var f=l.type;Ia(s,l),s=l.pendingProps;var m=Ms(l,_t.current);Rs(l,c),m=gh(null,l,f,s,m,c);var y=yh();return l.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,nn(f)?(y=!0,va(l)):y=!1,l.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,uh(l),m.updater=Na,l.stateNode=m,m._reactInternals=l,bh(l,f,s,c),l=Ah(null,l,f,!0,y,c)):(l.tag=0,rt&&y&&Zc(l),Yt(null,l,m,c),l=l.child),l;case 16:f=l.elementType;e:{switch(Ia(s,l),s=l.pendingProps,m=f._init,f=m(f._payload),l.type=f,m=l.tag=sk(f),s=Hn(f,s),m){case 0:l=Eh(null,l,f,s,c);break e;case 1:l=hg(null,l,f,s,c);break e;case 11:l=og(null,l,f,s,c);break e;case 14:l=lg(null,l,f,Hn(f.type,s),c);break e}throw Error(t(306,f,""))}return l;case 0:return f=l.type,m=l.pendingProps,m=l.elementType===f?m:Hn(f,m),Eh(s,l,f,m,c);case 1:return f=l.type,m=l.pendingProps,m=l.elementType===f?m:Hn(f,m),hg(s,l,f,m,c);case 3:e:{if(fg(l),s===null)throw Error(t(387));f=l.pendingProps,y=l.memoizedState,m=y.element,Am(s,l),Aa(l,f,null,c);var x=l.memoizedState;if(f=x.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){m=Ls(Error(t(423)),l),l=dg(s,l,f,c,m);break e}else if(f!==m){m=Ls(Error(t(424)),l),l=dg(s,l,f,c,m);break e}else for(gn=Qi(l.stateNode.containerInfo.firstChild),mn=l,rt=!0,jn=null,c=Mm(l,null,f,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ds(),f===m){l=Ti(s,l,c);break e}Yt(s,l,f,c)}l=l.child}return l;case 5:return Pm(l),s===null&&nh(l),f=l.type,m=l.pendingProps,y=s!==null?s.memoizedProps:null,x=m.children,qc(f,m)?x=null:y!==null&&qc(f,y)&&(l.flags|=32),cg(s,l),Yt(s,l,x,c),l.child;case 6:return s===null&&nh(l),null;case 13:return pg(s,l,c);case 4:return ch(l,l.stateNode.containerInfo),f=l.pendingProps,s===null?l.child=Ts(l,null,f,c):Yt(s,l,f,c),l.child;case 11:return f=l.type,m=l.pendingProps,m=l.elementType===f?m:Hn(f,m),og(s,l,f,m,c);case 7:return Yt(s,l,l.pendingProps,c),l.child;case 8:return Yt(s,l,l.pendingProps.children,c),l.child;case 12:return Yt(s,l,l.pendingProps.children,c),l.child;case 10:e:{if(f=l.type._context,m=l.pendingProps,y=l.memoizedProps,x=m.value,Ze(Ca,f._currentValue),f._currentValue=x,y!==null)if(_n(y.value,x)){if(y.children===m.children&&!tn.current){l=Ti(s,l,c);break e}}else for(y=l.child,y!==null&&(y.return=l);y!==null;){var C=y.dependencies;if(C!==null){x=y.child;for(var E=C.firstContext;E!==null;){if(E.context===f){if(y.tag===1){E=Di(-1,c&-c),E.tag=2;var I=y.updateQueue;if(I!==null){I=I.shared;var G=I.pending;G===null?E.next=E:(E.next=G.next,G.next=E),I.pending=E}}y.lanes|=c,E=y.alternate,E!==null&&(E.lanes|=c),lh(y.return,c,l),C.lanes|=c;break}E=E.next}}else if(y.tag===10)x=y.type===l.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=c,C=x.alternate,C!==null&&(C.lanes|=c),lh(x,c,l),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===l){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}Yt(s,l,m.children,c),l=l.child}return l;case 9:return m=l.type,f=l.pendingProps.children,Rs(l,c),m=bn(m),f=f(m),l.flags|=1,Yt(s,l,f,c),l.child;case 14:return f=l.type,m=Hn(f,l.pendingProps),m=Hn(f.type,m),lg(s,l,f,m,c);case 15:return ag(s,l,l.type,l.pendingProps,c);case 17:return f=l.type,m=l.pendingProps,m=l.elementType===f?m:Hn(f,m),Ia(s,l),l.tag=1,nn(f)?(s=!0,va(l)):s=!1,Rs(l,c),Zm(l,f,m),bh(l,f,m,c),Ah(null,l,f,!0,s,c);case 19:return gg(s,l,c);case 22:return ug(s,l,c)}throw Error(t(156,l.tag))};function jg(s,l){return Or(s,l)}function rk(s,l,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(s,l,c,f){return new rk(s,l,c,f)}function qh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function sk(s){if(typeof s=="function")return qh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===te)return 11;if(s===Se)return 14}return 2}function lr(s,l){var c=s.alternate;return c===null?(c=En(s.tag,l,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=l,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,l=s.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function qa(s,l,c,f,m,y){var x=2;if(f=s,typeof s=="function")qh(s)&&(x=1);else if(typeof s=="string")x=5;else e:switch(s){case M:return $r(c.children,m,y,l);case ne:x=8,m|=8;break;case Y:return s=En(12,c,l,m|2),s.elementType=Y,s.lanes=y,s;case fe:return s=En(13,c,l,m),s.elementType=fe,s.lanes=y,s;case pe:return s=En(19,c,l,m),s.elementType=pe,s.lanes=y,s;case ve:return Ga(c,m,y,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case re:x=10;break e;case se:x=9;break e;case te:x=11;break e;case Se:x=14;break e;case Te:x=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=En(x,c,l,m),l.elementType=s,l.type=f,l.lanes=y,l}function $r(s,l,c,f){return s=En(7,s,f,l),s.lanes=c,s}function Ga(s,l,c,f){return s=En(22,s,f,l),s.elementType=ve,s.lanes=c,s.stateNode={isHidden:!1},s}function Gh(s,l,c){return s=En(6,s,null,l),s.lanes=c,s}function Yh(s,l,c){return l=En(4,s.children!==null?s.children:[],s.key,l),l.lanes=c,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function ok(s,l,c,f,m){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Qh(s,l,c,f,m,y,x,C,E){return s=new ok(s,l,c,C,E),l===1?(l=1,y===!0&&(l|=8)):l=0,y=En(3,null,null,l),s.current=y,y.stateNode=s,y.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},uh(y),s}function lk(s,l,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:f==null?null:""+f,children:s,containerInfo:l,implementation:c}}function Hg(s){if(!s)return Ji;s=s._reactInternals;e:{if(zt(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(nn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(nn(c))return mm(s,c,l)}return l}function Vg(s,l,c,f,m,y,x,C,E){return s=Qh(c,f,!0,s,m,y,x,C,E),s.context=Hg(null),c=s.current,f=Qt(),m=sr(c),y=Di(f,m),y.callback=l??null,tr(c,y,m),s.current.lanes=m,wo(s,m,f),on(s,f),s}function Ya(s,l,c,f){var m=l.current,y=Qt(),x=sr(m);return c=Hg(c),l.context===null?l.context=c:l.pendingContext=c,l=Di(y,x),l.payload={element:s},f=f===void 0?null:f,f!==null&&(l.callback=f),s=tr(m,l,x),s!==null&&(Un(s,m,x,y),Ea(s,m,x)),x}function Qa(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Wg(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<l?c:l}}function Xh(s,l){Wg(s,l),(s=s.alternate)&&Wg(s,l)}function ak(){return null}var Ug=typeof reportError=="function"?reportError:function(s){console.error(s)};function Jh(s){this._internalRoot=s}Xa.prototype.render=Jh.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));Ya(s,l,null,null)},Xa.prototype.unmount=Jh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Vr(function(){Ya(null,s,null,null)}),l[bi]=null}};function Xa(s){this._internalRoot=s}Xa.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ap();s={blockedOn:null,target:s,priority:l};for(var c=0;c<qi.length&&l!==0&&l<qi[c].priority;c++);qi.splice(c,0,s),c===0&&Pp(s)}};function Zh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Ja(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function $g(){}function uk(s,l,c,f,m){if(m){if(typeof f=="function"){var y=f;f=function(){var I=Qa(x);y.call(I)}}var x=Vg(l,f,s,0,null,!1,!1,"",$g);return s._reactRootContainer=x,s[bi]=x.current,Lo(s.nodeType===8?s.parentNode:s),Vr(),x}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var C=f;f=function(){var I=Qa(E);C.call(I)}}var E=Qh(s,0,!1,null,null,!1,!1,"",$g);return s._reactRootContainer=E,s[bi]=E.current,Lo(s.nodeType===8?s.parentNode:s),Vr(function(){Ya(l,E,c,f)}),E}function Za(s,l,c,f,m){var y=c._reactRootContainer;if(y){var x=y;if(typeof m=="function"){var C=m;m=function(){var E=Qa(x);C.call(E)}}Ya(l,x,s,m)}else x=uk(c,l,s,m,f);return Qa(x)}Mp=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var c=vo(l.pendingLanes);c!==0&&(bc(l,c|1),on(l,He()),(We&6)===0&&(Is=He()+500,Zi()))}break;case 13:Vr(function(){var f=Ai(s,1);if(f!==null){var m=Qt();Un(f,s,1,m)}}),Xh(s,1)}},Cc=function(s){if(s.tag===13){var l=Ai(s,134217728);if(l!==null){var c=Qt();Un(l,s,134217728,c)}Xh(s,134217728)}},Ep=function(s){if(s.tag===13){var l=sr(s),c=Ai(s,l);if(c!==null){var f=Qt();Un(c,s,l,f)}Xh(s,l)}},Ap=function(){return qe},Dp=function(s,l){var c=qe;try{return qe=s,l()}finally{qe=c}},mo=function(s,l,c){switch(l){case"input":if(uo(s,c),l=c.name,c.type==="radio"&&l!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<c.length;l++){var f=c[l];if(f!==s&&f.form===s.form){var m=ga(f);if(!m)throw Error(t(90));Ft(f),uo(f,m)}}}break;case"textarea":ho(s,c);break;case"select":l=c.value,l!=null&&_i(s,!!c.multiple,l,!1)}},B=Uh,V=Vr;var ck={usingClientEntryPoint:!1,Events:[Io,bs,ga,Ql,P,Uh]},Qo={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hk={bundleType:Qo.bundleType,version:Qo.version,rendererPackageName:Qo.rendererPackageName,rendererConfig:Qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=dn(s),s===null?null:s.stateNode},findFiberByHostInstance:Qo.findFiberByHostInstance||ak,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Xl=eu.inject(hk),Xn=eu}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ck,ln.createPortal=function(s,l){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(l))throw Error(t(200));return lk(s,l,null,c)},ln.createRoot=function(s,l){if(!Zh(s))throw Error(t(299));var c=!1,f="",m=Ug;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onRecoverableError!==void 0&&(m=l.onRecoverableError)),l=Qh(s,1,!1,null,null,c,!1,f,m),s[bi]=l.current,Lo(s.nodeType===8?s.parentNode:s),new Jh(l)},ln.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=dn(l),s=s===null?null:s.stateNode,s},ln.flushSync=function(s){return Vr(s)},ln.hydrate=function(s,l,c){if(!Ja(l))throw Error(t(200));return Za(null,s,l,!0,c)},ln.hydrateRoot=function(s,l,c){if(!Zh(s))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,m=!1,y="",x=Ug;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(x=c.onRecoverableError)),l=Vg(l,null,s,1,c??null,m,!1,y,x),s[bi]=l.current,Lo(s),f)for(s=0;s<f.length;s++)c=f[s],m=c._getVersion,m=m(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,m]:l.mutableSourceEagerHydrationData.push(c,m);return new Xa(l)},ln.render=function(s,l,c){if(!Ja(l))throw Error(t(200));return Za(null,s,l,!1,c)},ln.unmountComponentAtNode=function(s){if(!Ja(s))throw Error(t(40));return s._reactRootContainer?(Vr(function(){Za(null,null,s,!1,function(){s._reactRootContainer=null,s[bi]=null})}),!0):!1},ln.unstable_batchedUpdates=Uh,ln.unstable_renderSubtreeIntoContainer=function(s,l,c,f){if(!Ja(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Za(s,l,c,!1,f)},ln.version="18.3.1-next-f1338f8080-20240426",ln}var Zg;function mv(){if(Zg)return nf.exports;Zg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),nf.exports=xk(),nf.exports}var e0;function Sk(){if(e0)return tu;e0=1;var i=mv();return tu.createRoot=i.createRoot,tu.hydrateRoot=i.hydrateRoot,tu}var kk=Sk();function bk(){return O.jsxs("div",{className:"center-container",children:[O.jsx("h1",{children:"Description of RSA"}),O.jsx("h2",{children:"Key Generation"}),O.jsx("p",{children:`RSA is an asymmetric, public-key encryption system. Unlike e.g. a onetime pad, where the same key is used to both encrypt and decrypt the message, RSA has two different keys, a "public key" used to encrypt the message and a "private key" used to decrypt the message. Before we discuss how messages are encrypted and decrypted in RSA, we'll discuss what these keys are and how they're generated.`}),O.jsx("p",{children:`First, two primes p and q of a given bit length are randomly generated. This is done by randomly generating integers of that bit length until primes come up, using a fast probabilistic primality test (e.g. Miller-Rabin) to determine when a prime has been generated. From this, the first part of the public key can be generated: the "modulus" n = pq. As will be seen later, RSA encryption involves doing arithmetic mod n, hence the name. When people talk about, say, "2048-bit" or "4096-bit" RSA, they're referring to the length of this modulus.`}),O.jsx("p",{children:"Larger keys are more secure but slower to generate and use. They also allow for longer messages (as messages must be positive integers less than the modulus), although given that RSA is mainly used to send short messages such as keys for symmetric cryptosystems, this is less relevant to what key length is used than speed and security considerations."}),O.jsx("p",{children:`Now the rest of the keys can be generated: the "encrypting exponent" E and the "decrypting exponent" D. The roles of these will be explained more fully later, but for now, just note that these are just two integers such that ED  1 (mod (p-1)(q-1)). There are many possible pairs of numbers that could work, but usually E is chosen as an arbitrary small integer with gcd(E, (p-1)(q-1)) (in this implementation, it's just the smallest odd integer greater than one that has this property). Once E has been fixed, the existence and uniqueness of D is guaranteed, and D can be found using the extended Euclidean algorithm.`}),O.jsx("h2",{children:"Encrypting and Decrypting"}),O.jsx("p",{children:"Once you have these keys, it's easy to describe how they get used. Let m be your message--a number less than the modulus n, or anything which can be encoded as such a number. To encrypt, you raise m to the power E and then reduce mod n--that is, the encrypted message (call it c) is equal to m^E (mod n). To decrypt, you take c^D (mod n)."}),O.jsx("p",{children:"Without getting too much into the underlying math, note that, since c = m^E (mod n), we have c^D = (m^E)^D = m^(ED) (mod n). But recall that we chose E and D to satisfy the equation ED = 1 (mod (p-1)(q-1)), or in other words ED = k(p-1)(q-1) + 1 for some integer k. Substituting that back into the equation from before, we get c^D = m^(k(p-1)(q-1) + 1) = (m^((p-1)(q-1)))^k * m (mod n). You can prove (it almost follows from Euler's theorem in number theory, though to really prove that you need to handle an annoying extra case where m is divisible by p or q) that m^((p-1)(q-1)) = 1 (mod n), hence (m^((p-1)(q-1)))^k * m = 1^k * m = m (mod n). Thus when we raise c to D and reduce mod n, we get back the original message m. That's all there is to RSA encryption and decryption. "}),O.jsx("h2",{children:"Digital Signatures"}),O.jsx("p",{children:`You can also use RSA to make sure that someone who says they're Bob really is Bob-or at least really has Bob's private key. If Alice sends some data to Bob, in the form of a number m, then Bob can "sign" it by applying his private key to it, i.e. computing m^D (mod n). Alice can then "verify" the signature by applying Bob's public key to the result, getting (m^D)^E = m^(ED) = m (mod n). On the other hand, without knowing Bob's private key, it is hard, for a given value m, to find a number c with c^E = m (mod n). Thus if someone can reliably produce such numbers, for any m that Alice sends, she can know that whoever she's talking to does have Bob's private key.`}),O.jsx("p",{children:`We saw earlier that encrypting and decrypting are formally identical--both involve raising a given number to a constant and then reducing mod another constant. Here we can see that decrypting and signing are not just formally identical but completely identical. This means that, if Bob uses his private key to sign something that's actually a message encrpyed with his public key, he'll get back his original message. (You can test this yourself--encrypt a message, then paste the result into the "sign" form.) Thus if Bob signs any number he's given, he can easily be tricked into decrypting messages sent to him. To get around this, it's standard to hash data before signing it, rather than signing given data directly.`})]})}function Ck(){return O.jsxs("div",{className:"center-container",children:[O.jsx("h1",{children:"Demo of RSA Encryption"}),O.jsx("p",{children:"This page contains a brief introduction to the RSA encryption system and an interactive demo of its use. We first discuss how to use the demo, then give the demo itself, then give the introduction. The demo can handle key generation, encrypting and decrypting messages, and digital signatures."}),O.jsx("p",{children:"Note that this is certainly not intended to be actually used for encryption, as the implementation discussed and used here is a fairly naive one."}),O.jsx("p",{children:`Use the "generate keys" form below to enter the number of digits in each prime. Real RSA keys use primes with 1024 to 2048 bits each (roughly 300-600 digits), but for the purposes of the demo, a key with 5-10 digits (about 16-32 bits) will be fine. (In fact, I would recommend against large keys, since the key generation function is hosted on an AWS Lambda instance which doesn't enough resources for fast generation of large keys and will time out if it takes more than a few seconds to find keys.)`}),O.jsx("p",{children:`Once you've generated keys, pick a number to serve as your message (see the bullet points below for what counts as a good number). Put it into the form next to the "encrypt message" button below and click that to encrypt. Then you can paste the result into the "decrypt message" form; you should get back the number you started with.`}),O.jsx("p",{children:`You can do the same thing with the "sign" form (see the "Digital Signatures" header below the forms for a description of what this does). Once you've produced a signed message, it will be automatically (implicitly) filled into the input used by the "verify" button.`}),O.jsx("p",{children:"Some further notes on usage: "}),O.jsxs("ul",{children:[O.jsx("li",{children:"Make sure to generate keys before using any of the encrypt/decrypt functions, otherwise the latter won't work. (They get automatically fed the keys you generate from the first form.)"}),O.jsxs("li",{children:[`I've set the encrypt, decrypt, and sign forms to only accept numbers between 0 and the modulus (which is itself set to 0 until you generate keys). If your message is longer than the modulus, it won't get decrypted properly, since decryption involves reducing mod the modulus and so always produces something less than the modulus. (If you use primes with n digits, then the modulus will have about 2n digits, so send messages that are at most that long.) Also, if your message is short compared to the modulus, it won't get encrypted much at all: for instance, if you send a message of 10, with a large enough modulus and an encrypting exponent of (say) 7, you'll get an "encrypted" message of 10^7 (= 10 million). Your message needs to be long enough that (message)^(encrypting exponent) `,">"," modulus, so that raising it to the encrypting exponent and reducing mod the modulus gives you something quite different from what you started with, and not easily recognizable. (Incidentally, these are both problems that real implementations of RSA have to deal with.)"]})]})]})}function Mk({prime1:i,prime2:e,publicExp:t,privateExp:n,modulus:r,getKeys:o,showKeyDisplay:a}){function u(h){h.preventDefault();const p=h.target.keygenInput.value;o(p)}return O.jsxs("div",{className:"center-container",children:[O.jsxs("form",{method:"POST",onSubmit:u,className:"center-container",style:{gap:"10px",padding:"10px"},children:[O.jsxs("label",{children:["Number of digits in each prime: ",O.jsx("input",{name:"keygenInput",type:"number",defaultValue:10})]}),O.jsx("button",{type:"submit",className:"navbar-button",children:"Generate keys"})]}),a?O.jsx(Ek,{p:i,q:e,publicExp:t,privateExp:n,modulus:r}):null]})}function Ek({p:i,q:e,publicExp:t,privateExp:n,modulus:r}){return O.jsxs("div",{className:"center-container",children:[O.jsxs("p",{children:["Bob's first secret prime, p: ",i]}),O.jsxs("p",{children:["Bob's second secret prime, q: ",e]}),O.jsxs("p",{children:["Bob then computes the modulus: pq = ",i," * ",e," = ",r]}),O.jsxs("p",{children:["For the public key, Bob chooses an integer E with gcd(E, (p-1)(q-1)) = 1; ",t," works."]}),O.jsxs("p",{children:["For the private key, Bob solves the equation ED  1 (mod (p-1)(q-1)) and gets D = ",n,"."]})]})}function of({publicExp:i,privateExp:e,modulus:t,returnedMessage:n,sendAndReceiveMessage:r,encrypt:o,sign:a,show:u}){function h(g){g.preventDefault();const v=g.target.messageInput.value;r(v,a?e:o?i:e,t,o,a)}const p=a?"sign":o?"encrypt":"decrypt",d=(o&&!a?"Alice ":"Bob ")+"raises the given message to the power "+(o&&!a?i:e)+" and reduces mod "+t+". They get "+n+".";return O.jsxs("div",{className:"center-container",children:[O.jsxs("form",{method:"POST",onSubmit:h,className:"center-container",style:{gap:"10px",padding:"10px"},children:[O.jsxs("label",{children:["Message to ",p,":",O.jsx("input",{name:"messageInput",type:"number",min:0,max:t})]}),O.jsxs("button",{label:"submit",className:"navbar-button",children:[p.charAt(0).toUpperCase()+p.substring(1)," message"]})]}),u?O.jsxs("div",{className:"center-container",children:[O.jsx("p",{children:d}),O.jsxs("p",{children:["Your ",p,"ed message: ",n]})]}):null]})}function Ak({publicExp:i,modulus:e,signedMessage:t,expectedMessage:n}){const[r,o]=W.useState(""),[a,u]=W.useState(""),[h,p]=W.useState(!1);async function d(v,w,S,k){const b="https://x0eii833df.execute-api.us-east-2.amazonaws.com/default/RSADemoEncryptDecrypt?exp="+v+"&message="+S+"&modulus="+w;console.log(b);const N=await(await fetch(b,{method:"POST",mode:"cors"})).json();console.log(N.message.toString()),console.log(k.toString()),console.log(k.toString()===N.message.toString()),u(N.message),o(k.toString()===N.message.toString()),p(!0)}function g(v){v.preventDefault(),d(i,e,t,n)}return O.jsxs(O.Fragment,{children:[O.jsx("form",{method:"POST",onSubmit:g,children:O.jsx("button",{label:"submit",className:"navbar-button",children:"Verify signed message using public key"})}),h?O.jsxs(O.Fragment,{children:[O.jsxs("p",{children:["Verified message: ",a]}),O.jsxs("p",{children:["Verification result: ",r?"True":"False"]})]}):null]})}function Dk(){const[i,e]=W.useState(""),[t,n]=W.useState(""),[r,o]=W.useState(""),[a,u]=W.useState(""),[h,p]=W.useState(""),[d,g]=W.useState(!1),[v,w]=W.useState(0),[S,k]=W.useState(""),[b,A]=W.useState(""),[N,z]=W.useState(""),[j,F]=W.useState(""),[$,M]=W.useState(!1),[ne,Y]=W.useState(!1),[re,se]=W.useState(!1),[te,fe]=W.useState(!1);async function pe(Te){const ve="https://gfmjhvb3yd.execute-api.us-east-2.amazonaws.com/default/RSAKeygen?digits="+Te;console.log(ve);const U=await fetch(ve,{method:"POST",mode:"cors"}),ee=await U.json();if(U.status===400){alert(ee.error);return}e(ee.p),n(ee.q),o(ee.public_exp),u(ee.private_exp),p(ee.modulus),M(!0)}async function Se(Te,ve,U,ee,Z){const T="https://x0eii833df.execute-api.us-east-2.amazonaws.com/default/RSADemoEncryptDecrypt?exp="+ve+"&message="+Te+"&modulus="+U;console.log(T);const ge=await(await fetch(T,{method:"POST",mode:"cors"})).json();console.log(ge.message),Z?(z(ge.message),F(Te),fe(!0)):ee?(k(ge.message),Y(!0)):(A(ge.message),se(!0))}return O.jsxs("div",{className:"center-container",children:[O.jsx(Ck,{}),O.jsx(Mk,{prime1:i,prime2:t,publicExp:r,privateExp:a,modulus:h,getKeys:pe,showKeyDisplay:$}),O.jsx(of,{publicExp:r,privateExp:a,modulus:h,returnedMessage:S,sendAndReceiveMessage:Se,encrypt:!0,sign:!1,show:ne}),O.jsx(of,{publicExp:r,privateExp:a,modulus:h,returnedMessage:b,sendAndReceiveMessage:Se,encrypt:!1,sign:!1,show:re}),O.jsx(of,{publicExp:r,privateExp:a,modulus:h,returnedMessage:N,sendAndReceiveMessage:Se,encrypt:!1,sign:!0,show:te}),O.jsx(Ak,{publicExp:r,modulus:h,signedMessage:N,expectedMessage:j}),O.jsx(bk,{})]})}let If=[],gv=[];(()=>{let i="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<i.length;e++)(e%2?gv:If).push(t=t+i[e])})();function Tk(i){if(i<768)return!1;for(let e=0,t=If.length;;){let n=e+t>>1;if(i<If[n])t=n;else if(i>=gv[n])e=n+1;else return!0;if(e==t)return!1}}function t0(i){return i>=127462&&i<=127487}const n0=8205;function Pk(i,e,t=!0,n=!0){return(t?yv:Rk)(i,e,n)}function yv(i,e,t){if(e==i.length)return e;e&&vv(i.charCodeAt(e))&&wv(i.charCodeAt(e-1))&&e--;let n=lf(i,e);for(e+=i0(n);e<i.length;){let r=lf(i,e);if(n==n0||r==n0||t&&Tk(r))e+=i0(r),n=r;else if(t0(r)){let o=0,a=e-2;for(;a>=0&&t0(lf(i,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function Rk(i,e,t){for(;e>0;){let n=yv(i,e-2,t);if(n<e)return n;e--}return 0}function lf(i,e){let t=i.charCodeAt(e);if(!wv(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return vv(n)?(t-55296<<10)+(n-56320)+65536:t}function vv(i){return i>=56320&&i<57344}function wv(i){return i>=55296&&i<56320}function i0(i){return i<65536?1:2}class $e{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=Xs(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),oi.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Xs(this,e,t);let n=[];return this.decompose(e,t,n,0),oi.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new dl(this),o=new dl(e);for(let a=t,u=t;;){if(r.next(a),o.next(a),a=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(u+=r.value.length,r.done||u>=n)return!0}}iter(e=1){return new dl(this,e)}iterRange(e,t=this.length){return new xv(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Sv(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?$e.empty:e.length<=32?new pt(e):oi.from(pt.split(e,[]))}}class pt extends $e{constructor(e,t=Ok(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let o=0;;o++){let a=this.text[o],u=r+a.length;if((t?n:u)>=e)return new Lk(r,u,n,a);r=u+1,n++}}decompose(e,t,n,r){let o=e<=0&&t>=this.length?this:new pt(r0(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let a=n.pop(),u=Mu(o.text,a.text.slice(),0,o.length);if(u.length<=32)n.push(new pt(u,a.length+o.length));else{let h=u.length>>1;n.push(new pt(u.slice(0,h)),new pt(u.slice(h)))}}else n.push(o)}replace(e,t,n){if(!(n instanceof pt))return super.replace(e,t,n);[e,t]=Xs(this,e,t);let r=Mu(this.text,Mu(n.text,r0(this.text,0,e)),t),o=this.length+n.length-(t-e);return r.length<=32?new pt(r,o):oi.from(pt.split(r,[]),o)}sliceString(e,t=this.length,n=`
`){[e,t]=Xs(this,e,t);let r="";for(let o=0,a=0;o<=t&&a<this.text.length;a++){let u=this.text[a],h=o+u.length;o>e&&a&&(r+=n),e<h&&t>o&&(r+=u.slice(Math.max(0,e-o),t-o)),o=h+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let o of e)n.push(o),r+=o.length+1,n.length==32&&(t.push(new pt(n,r)),n=[],r=-1);return r>-1&&t.push(new pt(n,r)),t}}class oi extends $e{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let o=0;;o++){let a=this.children[o],u=r+a.length,h=n+a.lines-1;if((t?h:u)>=e)return a.lineInner(e,t,n,r);r=u+1,n=h+1}}decompose(e,t,n,r){for(let o=0,a=0;a<=t&&o<this.children.length;o++){let u=this.children[o],h=a+u.length;if(e<=h&&t>=a){let p=r&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!p?n.push(u):u.decompose(e-a,t-a,n,p)}a=h+1}}replace(e,t,n){if([e,t]=Xs(this,e,t),n.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let a=this.children[r],u=o+a.length;if(e>=o&&t<=u){let h=a.replace(e-o,t-o,n),p=this.lines-a.lines+h.lines;if(h.lines<p>>4&&h.lines>p>>6){let d=this.children.slice();return d[r]=h,new oi(d,this.length-(t-e)+n.length)}return super.replace(o,u,h)}o=u+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=Xs(this,e,t);let r="";for(let o=0,a=0;o<this.children.length&&a<=t;o++){let u=this.children[o],h=a+u.length;a>e&&o&&(r+=n),e<h&&t>a&&(r+=u.sliceString(e-a,t-a,n)),a=h+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof oi))return 0;let n=0,[r,o,a,u]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==a||o==u)return n;let h=this.children[r],p=e.children[o];if(h!=p)return n+h.scanIdentical(p,t);n+=h.length+1}}static from(e,t=e.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let w of e)n+=w.lines;if(n<32){let w=[];for(let S of e)S.flatten(w);return new pt(w,t)}let r=Math.max(32,n>>5),o=r<<1,a=r>>1,u=[],h=0,p=-1,d=[];function g(w){let S;if(w.lines>o&&w instanceof oi)for(let k of w.children)g(k);else w.lines>a&&(h>a||!h)?(v(),u.push(w)):w instanceof pt&&h&&(S=d[d.length-1])instanceof pt&&w.lines+S.lines<=32?(h+=w.lines,p+=w.length+1,d[d.length-1]=new pt(S.text.concat(w.text),S.length+1+w.length)):(h+w.lines>r&&v(),h+=w.lines,p+=w.length+1,d.push(w))}function v(){h!=0&&(u.push(d.length==1?d[0]:oi.from(d,p)),p=-1,h=d.length=0)}for(let w of e)g(w);return v(),u.length==1?u[0]:new oi(u,t)}}$e.empty=new pt([""],0);function Ok(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Mu(i,e,t=0,n=1e9){for(let r=0,o=0,a=!0;o<i.length&&r<=n;o++){let u=i[o],h=r+u.length;h>=t&&(h>n&&(u=u.slice(0,n-r)),r<t&&(u=u.slice(t-r)),a?(e[e.length-1]+=u,a=!1):e.push(u)),r=h+1}return e}function r0(i,e,t){return Mu(i,[""],e,t)}class dl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof pt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],o=this.offsets[n],a=o>>1,u=r instanceof pt?r.text.length:r.children.length;if(a==(t>0?u:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof pt){let h=r.text[a+(t<0?-1:0)];if(this.offsets[n]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=r.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof pt?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class xv{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new dl(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Sv{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&($e.prototype[Symbol.iterator]=function(){return this.iter()},dl.prototype[Symbol.iterator]=xv.prototype[Symbol.iterator]=Sv.prototype[Symbol.iterator]=function(){return this});class Lk{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function Xs(i,e,t){return e=Math.max(0,Math.min(i.length,e)),[e,Math.max(e,Math.min(i.length,t))]}function Bt(i,e,t=!0,n=!0){return Pk(i,e,t,n)}function Nk(i){return i>=56320&&i<57344}function Bk(i){return i>=55296&&i<56320}function an(i,e){let t=i.charCodeAt(e);if(!Bk(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return Nk(n)?(t-55296<<10)+(n-56320)+65536:t}function Fd(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function li(i){return i<65536?1:2}const Ff=/\r\n?|\n/;var Xt=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(Xt||(Xt={}));class fi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let o=this.sections[t++],a=this.sections[t++];a<0?(e(n,r,o),r+=o):r+=a,n+=o}}iterChangedRanges(e,t=!1){zf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new fi(e)}composeDesc(e){return this.empty?e:e.empty?this:kv(this,e)}mapDesc(e,t=!1){return e.empty?this:_f(this,e,t)}mapPos(e,t=-1,n=Xt.Simple){let r=0,o=0;for(let a=0;a<this.sections.length;){let u=this.sections[a++],h=this.sections[a++],p=r+u;if(h<0){if(p>e)return o+(e-r);o+=u}else{if(n!=Xt.Simple&&p>=e&&(n==Xt.TrackDel&&r<e&&p>e||n==Xt.TrackBefore&&r<e||n==Xt.TrackAfter&&p>e))return null;if(p>e||p==e&&t<0&&!u)return e==r||t<0?o:o+h;o+=h}r=p}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let o=this.sections[n++],a=this.sections[n++],u=r+o;if(a>=0&&r<=t&&u>=e)return r<e&&u>t?"cover":!0;r=u}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new fi(e)}static create(e){return new fi(e)}}class bt extends fi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return zf(this,(t,n,r,o,a)=>e=e.replace(r,r+(n-t),a),!1),e}mapDesc(e,t=!1){return _f(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,o=0;r<t.length;r+=2){let a=t[r],u=t[r+1];if(u>=0){t[r]=u,t[r+1]=a;let h=r>>1;for(;n.length<h;)n.push($e.empty);n.push(a?e.slice(o,o+a):$e.empty)}o+=a}return new bt(t,n)}compose(e){return this.empty?e:e.empty?this:kv(this,e,!0)}map(e,t=!1){return e.empty?this:_f(this,e,t,!0)}iterChanges(e,t=!1){zf(this,e,t)}get desc(){return fi.create(this.sections)}filter(e){let t=[],n=[],r=[],o=new xl(this);e:for(let a=0,u=0;;){let h=a==e.length?1e9:e[a++];for(;u<h||u==h&&o.len==0;){if(o.done)break e;let d=Math.min(o.len,h-u);Wt(r,d,-1);let g=o.ins==-1?-1:o.off==0?o.ins:0;Wt(t,d,g),g>0&&dr(n,t,o.text),o.forward(d),u+=d}let p=e[a++];for(;u<p;){if(o.done)break e;let d=Math.min(o.len,p-u);Wt(t,d,-1),Wt(r,d,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(d),u+=d}}return{changes:new bt(t,n),filtered:fi.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):r==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],o=[],a=0,u=null;function h(d=!1){if(!d&&!r.length)return;a<t&&Wt(r,t-a,-1);let g=new bt(r,o);u=u?u.compose(g.map(u)):g,r=[],o=[],a=0}function p(d){if(Array.isArray(d))for(let g of d)p(g);else if(d instanceof bt){if(d.length!=t)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${t})`);h(),u=u?u.compose(d.map(u)):d}else{let{from:g,to:v=g,insert:w}=d;if(g>v||g<0||v>t)throw new RangeError(`Invalid change range ${g} to ${v} (in doc of length ${t})`);let S=w?typeof w=="string"?$e.of(w.split(n||Ff)):w:$e.empty,k=S.length;if(g==v&&k==0)return;g<a&&h(),g>a&&Wt(r,g-a,-1),Wt(r,v-g,k),dr(o,r,S),a=v}}return p(e),h(!u),u}static empty(e){return new bt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,u)=>u&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;n.length<r;)n.push($e.empty);n[r]=$e.of(o.slice(1)),t.push(o[0],n[r].length)}}}return new bt(t,n)}static createSet(e,t){return new bt(e,t)}}function Wt(i,e,t,n=!1){if(e==0&&t<=0)return;let r=i.length-2;r>=0&&t<=0&&t==i[r+1]?i[r]+=e:r>=0&&e==0&&i[r]==0?i[r+1]+=t:n?(i[r]+=e,i[r+1]+=t):i.push(e,t)}function dr(i,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<n;)i.push($e.empty);i.push(t)}}function zf(i,e,t){let n=i.inserted;for(let r=0,o=0,a=0;a<i.sections.length;){let u=i.sections[a++],h=i.sections[a++];if(h<0)r+=u,o+=u;else{let p=r,d=o,g=$e.empty;for(;p+=u,d+=h,h&&n&&(g=g.append(n[a-2>>1])),!(t||a==i.sections.length||i.sections[a+1]<0);)u=i.sections[a++],h=i.sections[a++];e(r,p,o,d,g),r=p,o=d}}}function _f(i,e,t,n=!1){let r=[],o=n?[]:null,a=new xl(i),u=new xl(e);for(let h=-1;;){if(a.done&&u.len||u.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&u.ins==-1){let p=Math.min(a.len,u.len);Wt(r,p,-1),a.forward(p),u.forward(p)}else if(u.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(u.len<a.len||u.len==a.len&&!t))){let p=u.len;for(Wt(r,u.ins,-1);p;){let d=Math.min(a.len,p);a.ins>=0&&h<a.i&&a.len<=d&&(Wt(r,0,a.ins),o&&dr(o,r,a.text),h=a.i),a.forward(d),p-=d}u.next()}else if(a.ins>=0){let p=0,d=a.len;for(;d;)if(u.ins==-1){let g=Math.min(d,u.len);p+=g,d-=g,u.forward(g)}else if(u.ins==0&&u.len<d)d-=u.len,u.next();else break;Wt(r,p,h<a.i?a.ins:0),o&&h<a.i&&dr(o,r,a.text),h=a.i,a.forward(a.len-d)}else{if(a.done&&u.done)return o?bt.createSet(r,o):fi.create(r);throw new Error("Mismatched change set lengths")}}}function kv(i,e,t=!1){let n=[],r=t?[]:null,o=new xl(i),a=new xl(e);for(let u=!1;;){if(o.done&&a.done)return r?bt.createSet(n,r):fi.create(n);if(o.ins==0)Wt(n,o.len,0,u),o.next();else if(a.len==0&&!a.done)Wt(n,0,a.ins,u),r&&dr(r,n,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(o.len2,a.len),p=n.length;if(o.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;Wt(n,h,d,u),r&&d&&dr(r,n,a.text)}else a.ins==-1?(Wt(n,o.off?0:o.len,h,u),r&&dr(r,n,o.textBit(h))):(Wt(n,o.off?0:o.len,a.off?0:a.ins,u),r&&!a.off&&dr(r,n,a.text));u=(o.ins>h||a.ins>=0&&a.len>h)&&(u||n.length>p),o.forward2(h),a.forward(h)}}}}class xl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?$e.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?$e.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Yr{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Yr(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return K.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return K.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return K.range(e.anchor,e.head)}static create(e,t,n){return new Yr(e,t,n)}}class K{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:K.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new K([this.main],0)}addRange(e,t=!0){return K.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,K.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new K(e.ranges.map(t=>Yr.fromJSON(t)),e.main)}static single(e,t=e){return new K([K.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=n:o.from<n)return K.normalized(e.slice(),t);n=o.to}return new K(e,t)}static cursor(e,t=0,n,r){return Yr.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(r??16777215)<<6)}static range(e,t,n,r){let o=(n??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?Yr.create(t,e,48|o):Yr.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let n=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(n);for(let r=1;r<e.length;r++){let o=e[r],a=e[r-1];if(o.empty?o.from<=a.to:o.from<a.to){let u=a.from,h=Math.max(o.to,a.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?K.range(h,u):K.range(u,h))}}return new K(e,t)}}function bv(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let zd=0;class he{constructor(e,t,n,r,o){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=zd++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new he(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:_d),!!e.static,e.enables)}of(e){return new Eu([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Eu(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Eu(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function _d(i,e){return i==e||i.length==e.length&&i.every((t,n)=>t===e[n])}class Eu{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=zd++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,o=this.id,a=e[o]>>1,u=this.type==2,h=!1,p=!1,d=[];for(let g of this.dependencies)g=="doc"?h=!0:g=="selection"?p=!0:(((t=e[g.id])!==null&&t!==void 0?t:1)&1)==0&&d.push(e[g.id]);return{create(g){return g.values[a]=n(g),1},update(g,v){if(h&&v.docChanged||p&&(v.docChanged||v.selection)||jf(g,d)){let w=n(g);if(u?!s0(w,g.values[a],r):!r(w,g.values[a]))return g.values[a]=w,1}return 0},reconfigure:(g,v)=>{let w,S=v.config.address[o];if(S!=null){let k=Fu(v,S);if(this.dependencies.every(b=>b instanceof he?v.facet(b)===g.facet(b):b instanceof It?v.field(b,!1)==g.field(b,!1):!0)||(u?s0(w=n(g),k,r):r(w=n(g),k)))return g.values[a]=k,0}else w=n(g);return g.values[a]=w,1}}}}function s0(i,e,t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}function jf(i,e){let t=!1;for(let n of e)pl(i,n)&1&&(t=!0);return t}function Ik(i,e,t){let n=t.map(h=>i[h.id]),r=t.map(h=>h.type),o=n.filter(h=>!(h&1)),a=i[e.id]>>1;function u(h){let p=[];for(let d=0;d<n.length;d++){let g=Fu(h,n[d]);if(r[d]==2)for(let v of g)p.push(v);else p.push(g)}return e.combine(p)}return{create(h){for(let p of n)pl(h,p);return h.values[a]=u(h),1},update(h,p){if(!jf(h,o))return 0;let d=u(h);return e.compare(d,h.values[a])?0:(h.values[a]=d,1)},reconfigure(h,p){let d=jf(h,n),g=p.config.facets[e.id],v=p.facet(e);if(g&&!d&&_d(t,g))return h.values[a]=v,0;let w=u(h);return e.compare(w,v)?(h.values[a]=v,0):(h.values[a]=w,1)}}}const nu=he.define({static:!0});class It{constructor(e,t,n,r,o){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new It(zd++,e.create,e.update,e.compare||((n,r)=>n===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(nu).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,r)=>{let o=n.values[t],a=this.updateF(o,r);return this.compareF(o,a)?0:(n.values[t]=a,1)},reconfigure:(n,r)=>{let o=n.facet(nu),a=r.facet(nu),u;return(u=o.find(h=>h.field==this))&&u!=a.find(h=>h.field==this)?(n.values[t]=u.create(n),1):r.config.address[this.id]!=null?(n.values[t]=r.field(this),0):(n.values[t]=this.create(n),1)}}}init(e){return[this,nu.of({field:this,create:e})]}get extension(){return this}}const qr={lowest:4,low:3,default:2,high:1,highest:0};function Jo(i){return e=>new Cv(e,i)}const as={highest:Jo(qr.highest),high:Jo(qr.high),default:Jo(qr.default),low:Jo(qr.low),lowest:Jo(qr.lowest)};class Cv{constructor(e,t){this.inner=e,this.prec=t}}class oc{of(e){return new Hf(this,e)}reconfigure(e){return oc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Hf{constructor(e,t){this.compartment=e,this.inner=t}}class Iu{constructor(e,t,n,r,o,a){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],o=Object.create(null),a=new Map;for(let v of Fk(e,t,a))v instanceof It?r.push(v):(o[v.facet.id]||(o[v.facet.id]=[])).push(v);let u=Object.create(null),h=[],p=[];for(let v of r)u[v.id]=p.length<<1,p.push(w=>v.slot(w));let d=n==null?void 0:n.config.facets;for(let v in o){let w=o[v],S=w[0].facet,k=d&&d[v]||[];if(w.every(b=>b.type==0))if(u[S.id]=h.length<<1|1,_d(k,w))h.push(n.facet(S));else{let b=S.combine(w.map(A=>A.value));h.push(n&&S.compare(b,n.facet(S))?n.facet(S):b)}else{for(let b of w)b.type==0?(u[b.id]=h.length<<1|1,h.push(b.value)):(u[b.id]=p.length<<1,p.push(A=>b.dynamicSlot(A)));u[S.id]=p.length<<1,p.push(b=>Ik(b,S,w))}}let g=p.map(v=>v(u));return new Iu(e,a,g,u,h,o)}}function Fk(i,e,t){let n=[[],[],[],[],[]],r=new Map;function o(a,u){let h=r.get(a);if(h!=null){if(h<=u)return;let p=n[h].indexOf(a);p>-1&&n[h].splice(p,1),a instanceof Hf&&t.delete(a.compartment)}if(r.set(a,u),Array.isArray(a))for(let p of a)o(p,u);else if(a instanceof Hf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let p=e.get(a.compartment)||a.inner;t.set(a.compartment,p),o(p,u)}else if(a instanceof Cv)o(a.inner,a.prec);else if(a instanceof It)n[u].push(a),a.provides&&o(a.provides,u);else if(a instanceof Eu)n[u].push(a),a.facet.extensions&&o(a.facet.extensions,qr.default);else{let p=a.extension;if(!p)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(p,u)}}return o(i,qr.default),n.reduce((a,u)=>a.concat(u))}function pl(i,e){if(e&1)return 2;let t=e>>1,n=i.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[t]=4;let r=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|r}function Fu(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const Mv=he.define(),Vf=he.define({combine:i=>i.some(e=>e),static:!0}),Ev=he.define({combine:i=>i.length?i[0]:void 0,static:!0}),Av=he.define(),Dv=he.define(),Tv=he.define(),Pv=he.define({combine:i=>i.length?i[0]:!1});class pi{constructor(e,t){this.type=e,this.value=t}static define(){return new zk}}class zk{of(e){return new pi(this,e)}}class _k{constructor(e){this.map=e}of(e){return new Ne(this,e)}}class Ne{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ne(this.type,t)}is(e){return this.type==e}static define(e={}){return new _k(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let o=r.map(t);o&&n.push(o)}return n}}Ne.reconfigure=Ne.define();Ne.appendConfig=Ne.define();class Ct{constructor(e,t,n,r,o,a){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,n&&bv(n,t.newLength),o.some(u=>u.type==Ct.time)||(this.annotations=o.concat(Ct.time.of(Date.now())))}static create(e,t,n,r,o,a){return new Ct(e,t,n,r,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ct.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ct.time=pi.define();Ct.userEvent=pi.define();Ct.addToHistory=pi.define();Ct.remote=pi.define();function jk(i,e){let t=[];for(let n=0,r=0;;){let o,a;if(n<i.length&&(r==e.length||e[r]>=i[n]))o=i[n++],a=i[n++];else if(r<e.length)o=e[r++],a=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Rv(i,e,t){var n;let r,o,a;return t?(r=e.changes,o=bt.empty(e.changes.length),a=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),o=i.changes.mapDesc(e.changes,!0),a=i.changes.compose(r)),{changes:a,selection:e.selection?e.selection.map(o):(n=i.selection)===null||n===void 0?void 0:n.map(r),effects:Ne.mapEffects(i.effects,r).concat(Ne.mapEffects(e.effects,o)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function Wf(i,e,t){let n=e.selection,r=$s(e.annotations);return e.userEvent&&(r=r.concat(Ct.userEvent.of(e.userEvent))),{changes:e.changes instanceof bt?e.changes:bt.of(e.changes||[],t,i.facet(Ev)),selection:n&&(n instanceof K?n:K.single(n.anchor,n.head)),effects:$s(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Ov(i,e,t){let n=Wf(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let a=!!e[o].sequential;n=Rv(n,Wf(i,e[o],a?n.changes.newLength:i.doc.length),a)}let r=Ct.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return Vk(t?Hk(r):r)}function Hk(i){let e=i.startState,t=!0;for(let r of e.facet(Av)){let o=r(i);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:jk(t,o))}if(t!==!0){let r,o;if(t===!1)o=i.changes.invertedDesc,r=bt.empty(e.doc.length);else{let a=i.changes.filter(t);r=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}i=Ct.create(e,r,i.selection&&i.selection.map(o),Ne.mapEffects(i.effects,o),i.annotations,i.scrollIntoView)}let n=e.facet(Dv);for(let r=n.length-1;r>=0;r--){let o=n[r](i);o instanceof Ct?i=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Ct?i=o[0]:i=Ov(e,$s(o),!1)}return i}function Vk(i){let e=i.startState,t=e.facet(Tv),n=i;for(let r=t.length-1;r>=0;r--){let o=t[r](i);o&&Object.keys(o).length&&(n=Rv(n,Wf(e,o,i.changes.newLength),!0))}return n==i?i:Ct.create(e,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}const Wk=[];function $s(i){return i==null?Wk:Array.isArray(i)?i:[i]}var ot=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(ot||(ot={}));const Uk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Uf;try{Uf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $k(i){if(Uf)return Uf.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Uk.test(t)))return!0}return!1}function Kk(i){return e=>{if(!/\S/.test(e))return ot.Space;if($k(e))return ot.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return ot.Word;return ot.Other}}class _e{constructor(e,t,n,r,o,a){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)pl(this,u<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return pl(this,n),Fu(this,n)}update(...e){return Ov(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:r}=t;for(let u of e.effects)u.is(oc.reconfigure)?(t&&(r=new Map,t.compartments.forEach((h,p)=>r.set(p,h)),t=null),r.set(u.value.compartment,u.value.extension)):u.is(Ne.reconfigure)?(t=null,n=u.value):u.is(Ne.appendConfig)&&(t=null,n=$s(n).concat(u.value));let o;t?o=e.startState.values.slice():(t=Iu.resolve(n,r,this),o=new _e(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,p)=>p.reconfigure(h,this),null).values);let a=e.startState.facet(Vf)?e.newSelection:e.newSelection.asSingle();new _e(t,e.newDoc,a,o,(u,h)=>h.update(u,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:K.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),o=[n.range],a=$s(n.effects);for(let u=1;u<t.ranges.length;u++){let h=e(t.ranges[u]),p=this.changes(h.changes),d=p.map(r);for(let v=0;v<u;v++)o[v]=o[v].map(d);let g=r.mapDesc(p,!0);o.push(h.range.map(g)),r=r.compose(d),a=Ne.mapEffects(a,d).concat(Ne.mapEffects($s(h.effects),g))}return{changes:r,selection:K.create(o,t.mainIndex),effects:a}}changes(e=[]){return e instanceof bt?e:bt.of(e,this.doc.length,this.facet(_e.lineSeparator))}toText(e){return $e.of(e.split(this.facet(_e.lineSeparator)||Ff))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(pl(this,t),Fu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof It&&this.config.address[r.id]!=null&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let o in n)if(Object.prototype.hasOwnProperty.call(e,o)){let a=n[o],u=e[o];r.push(a.init(h=>a.spec.fromJSON(u,h)))}}return _e.create({doc:e.doc,selection:K.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Iu.resolve(e.extensions||[],new Map),n=e.doc instanceof $e?e.doc:$e.of((e.doc||"").split(t.staticFacet(_e.lineSeparator)||Ff)),r=e.selection?e.selection instanceof K?e.selection:K.single(e.selection.anchor,e.selection.head):K.single(0);return bv(r,n.length),t.staticFacet(Vf)||(r=r.asSingle()),new _e(t,n,r,t.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(_e.tabSize)}get lineBreak(){return this.facet(_e.lineSeparator)||`
`}get readOnly(){return this.facet(Pv)}phrase(e,...t){for(let n of this.facet(_e.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?n:t[o-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let o of this.facet(Mv))for(let a of o(this,t,n))Object.prototype.hasOwnProperty.call(a,e)&&r.push(a[e]);return r}charCategorizer(e){return Kk(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-n,u=e-n;for(;a>0;){let h=Bt(t,a,!1);if(o(t.slice(h,a))!=ot.Word)break;a=h}for(;u<r;){let h=Bt(t,u);if(o(t.slice(u,h))!=ot.Word)break;u=h}return a==u?null:K.range(a+n,u+n)}}_e.allowMultipleSelections=Vf;_e.tabSize=he.define({combine:i=>i.length?i[0]:4});_e.lineSeparator=Ev;_e.readOnly=Pv;_e.phrases=he.define({compare(i,e){let t=Object.keys(i),n=Object.keys(e);return t.length==n.length&&t.every(r=>i[r]==e[r])}});_e.languageData=Mv;_e.changeFilter=Av;_e.transactionFilter=Dv;_e.transactionExtender=Tv;oc.reconfigure=Ne.define();function mi(i,e,t={}){let n={};for(let r of i)for(let o of Object.keys(r)){let a=r[o],u=n[o];if(u===void 0)n[o]=a;else if(!(u===a||a===void 0))if(Object.hasOwnProperty.call(t,o))n[o]=t[o](u,a);else throw new Error("Config merge conflict for field "+o)}for(let r in e)n[r]===void 0&&(n[r]=e[r]);return n}class ts{eq(e){return this==e}range(e,t=e){return $f.create(e,t,this)}}ts.prototype.startSide=ts.prototype.endSide=0;ts.prototype.point=!1;ts.prototype.mapMode=Xt.TrackDel;let $f=class Lv{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Lv(e,t,n)}};function Kf(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class jd{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let o=n?this.to:this.from;for(let a=r,u=o.length;;){if(a==u)return a;let h=a+u>>1,p=o[h]-e||(n?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return p>=0?a:u;p>=0?u=h:a=h+1}}between(e,t,n,r){for(let o=this.findIndex(t,-1e9,!0),a=this.findIndex(n,1e9,!1,o);o<a;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let n=[],r=[],o=[],a=-1,u=-1;for(let h=0;h<this.value.length;h++){let p=this.value[h],d=this.from[h]+e,g=this.to[h]+e,v,w;if(d==g){let S=t.mapPos(d,p.startSide,p.mapMode);if(S==null||(v=w=S,p.startSide!=p.endSide&&(w=t.mapPos(d,p.endSide),w<v)))continue}else if(v=t.mapPos(d,p.startSide),w=t.mapPos(g,p.endSide),v>w||v==w&&p.startSide>0&&p.endSide<=0)continue;(w-v||p.endSide-p.startSide)<0||(a<0&&(a=v),p.point&&(u=Math.max(u,w-v)),n.push(p),r.push(v-a),o.push(w-a))}return{mapped:n.length?new jd(r,o,n,u):null,pos:a}}}class Ue{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Ue(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:o=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(n&&(t=t.slice().sort(Kf)),this.isEmpty)return t.length?Ue.of(t):this;let u=new Nv(this,null,-1).goto(0),h=0,p=[],d=new Ni;for(;u.value||h<t.length;)if(h<t.length&&(u.from-t[h].from||u.startSide-t[h].value.startSide)>=0){let g=t[h++];d.addInner(g.from,g.to,g.value)||p.push(g)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(u.chunkIndex)<t[h].from)&&(!a||r>this.chunkEnd(u.chunkIndex)||o<this.chunkPos[u.chunkIndex])&&d.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!a||r>u.to||o<u.from||a(u.from,u.to,u.value))&&(d.addInner(u.from,u.to,u.value)||p.push($f.create(u.from,u.to,u.value))),u.next());return d.finishInner(this.nextLayer.isEmpty&&!p.length?Ue.empty:this.nextLayer.update({add:p,filter:a,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let a=0;a<this.chunk.length;a++){let u=this.chunkPos[a],h=this.chunk[a],p=e.touchesRange(u,u+h.length);if(p===!1)r=Math.max(r,h.maxPoint),t.push(h),n.push(e.mapPos(u));else if(p===!0){let{mapped:d,pos:g}=h.map(u,e);d&&(r=Math.max(r,d.maxPoint),t.push(d),n.push(g))}}let o=this.nextLayer.map(e);return t.length==0?o:new Ue(n,t,o||Ue.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],a=this.chunk[r];if(t>=o&&e<=o+a.length&&a.between(o,e-o,t-o,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Sl.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Sl.from(e).goto(t)}static compare(e,t,n,r,o=-1){let a=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),u=t.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),h=o0(a,u,n),p=new Zo(a,h,o),d=new Zo(u,h,o);n.iterGaps((g,v,w)=>l0(p,g,d,v,w,r)),n.empty&&n.length==0&&l0(p,0,d,0,0,r)}static eq(e,t,n=0,r){r==null&&(r=999999999);let o=e.filter(d=>!d.isEmpty&&t.indexOf(d)<0),a=t.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let u=o0(o,a),h=new Zo(o,u,0).goto(n),p=new Zo(a,u,0).goto(n);for(;;){if(h.to!=p.to||!qf(h.active,p.active)||h.point&&(!p.point||!h.point.eq(p.point)))return!1;if(h.to>r)return!0;h.next(),p.next()}}static spans(e,t,n,r,o=-1){let a=new Zo(e,null,o).goto(t),u=t,h=a.openStart;for(;;){let p=Math.min(a.to,n);if(a.point){let d=a.activeForPoint(a.to),g=a.pointFrom<t?d.length+1:a.point.startSide<0?d.length:Math.min(d.length,h);r.point(u,p,a.point,d,g,a.pointRank),h=Math.min(a.openEnd(p),d.length)}else p>u&&(r.span(u,p,a.active,h),h=a.openEnd(p));if(a.to>n)return h+(a.point&&a.to>n?1:0);u=a.to,a.next()}}static of(e,t=!1){let n=new Ni;for(let r of e instanceof $f?[e]:t?qk(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return Ue.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=Ue.empty;r=r.nextLayer)t=new Ue(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Ue.empty=new Ue([],[],null,-1);function qk(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let n=i[t];if(Kf(e,n)>0)return i.slice().sort(Kf);e=n}return i}Ue.empty.nextLayer=Ue.empty;class Ni{finishChunk(e){this.chunks.push(new jd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Ni)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Ue.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ue.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function o0(i,e,t){let n=new Map;for(let o of i)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&n.set(o.chunk[a],o.chunkPos[a]);let r=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let u=n.get(o.chunk[a]);u!=null&&(t?t.mapPos(u):u)==o.chunkPos[a]&&!(t!=null&&t.touchesRange(u,u+o.chunk[a].length))&&r.add(o.chunk[a])}return r}class Nv{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Sl{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=n&&r.push(new Nv(a,t,n,o));return r.length==1?r[0]:new Sl(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)af(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)af(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),af(this.heap,0)}}}function af(i,e){for(let t=i[e];;){let n=(e<<1)+1;if(n>=i.length)break;let r=i[n];if(n+1<i.length&&r.compare(i[n+1])>=0&&(r=i[n+1],n++),t.compare(r)<0)break;i[n]=t,i[e]=r,e=n}}class Zo{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Sl.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){iu(this.active,e),iu(this.activeTo,e),iu(this.activeRank,e),this.minActive=a0(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;ru(this.active,t,n),ru(this.activeTo,t,r),ru(this.activeRank,t,o),e&&ru(e,t,this.cursor.from),this.minActive=a0(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&iu(n,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let r=n.length-1;r>=0&&n[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function l0(i,e,t,n,r,o){i.goto(e),t.goto(n);let a=n+r,u=n,h=n-e;for(;;){let p=i.to+h-t.to,d=p||i.endSide-t.endSide,g=d<0?i.to+h:t.to,v=Math.min(g,a);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&qf(i.activeForPoint(i.to),t.activeForPoint(t.to))||o.comparePoint(u,v,i.point,t.point):v>u&&!qf(i.active,t.active)&&o.compareRange(u,v,i.active,t.active),g>a)break;(p||i.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(g),u=g,d<=0&&i.next(),d>=0&&t.next()}}function qf(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function iu(i,e){for(let t=e,n=i.length-1;t<n;t++)i[t]=i[t+1];i.pop()}function ru(i,e,t){for(let n=i.length-1;n>=e;n--)i[n+1]=i[n];i[e]=t}function a0(i,e){let t=-1,n=1e9;for(let r=0;r<e.length;r++)(e[r]-n||i[r].endSide-i[t].endSide)<0&&(t=r,n=e[r]);return t}function so(i,e,t=i.length){let n=0;for(let r=0;r<t&&r<i.length;)i.charCodeAt(r)==9?(n+=e-n%e,r++):(n++,r=Bt(i,r));return n}function Gf(i,e,t,n){for(let r=0,o=0;;){if(o>=e)return r;if(r==i.length)break;o+=i.charCodeAt(r)==9?t-o%t:1,r=Bt(i,r)}return n===!0?-1:i.length}const Yf="",u0=typeof Symbol>"u"?"__"+Yf:Symbol.for(Yf),Qf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class vr{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,u,h,p){let d=[],g=/^@(\w+)\b/.exec(a[0]),v=g&&g[1]=="keyframes";if(g&&u==null)return h.push(a[0]+";");for(let w in u){let S=u[w];if(/&/.test(w))o(w.split(/,\s*/).map(k=>a.map(b=>k.replace(/&/,b))).reduce((k,b)=>k.concat(b)),S,h);else if(S&&typeof S=="object"){if(!g)throw new RangeError("The value of a property ("+w+") should be a primitive value.");o(r(w),S,d,v)}else S!=null&&d.push(w.replace(/_.*/,"").replace(/[A-Z]/g,k=>"-"+k.toLowerCase())+": "+S+";")}(d.length||v)&&h.push((n&&!g&&!p?a.map(n):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)o(r(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=c0[u0]||1;return c0[u0]=e+1,Yf+e.toString(36)}static mount(e,t,n){let r=e[Qf],o=n&&n.nonce;r?o&&r.setNonce(o):r=new Gk(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let h0=new Map;class Gk{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=h0.get(n);if(o)return e[Qf]=o;this.sheet=new r.CSSStyleSheet,h0.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Qf]=this}mount(e,t){let n=this.sheet,r=0,o=0;for(let a=0;a<e.length;a++){let u=e[a],h=this.modules.indexOf(u);if(h<o&&h>-1&&(this.modules.splice(h,1),o--,h=-1),h==-1){if(this.modules.splice(o++,0,u),n)for(let p=0;p<u.rules.length;p++)n.insertRule(u.rules[p],r++)}else{for(;o<h;)r+=this.modules[o++].rules.length;r+=u.rules.length,o++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let u=t.head||t;this.styleTag.parentNode!=u&&u.insertBefore(this.styleTag,u.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var wr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},kl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Yk=typeof navigator<"u"&&/Mac/.test(navigator.platform),Qk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Lt=0;Lt<10;Lt++)wr[48+Lt]=wr[96+Lt]=String(Lt);for(var Lt=1;Lt<=24;Lt++)wr[Lt+111]="F"+Lt;for(var Lt=65;Lt<=90;Lt++)wr[Lt]=String.fromCharCode(Lt+32),kl[Lt]=String.fromCharCode(Lt);for(var uf in wr)kl.hasOwnProperty(uf)||(kl[uf]=wr[uf]);function Xk(i){var e=Yk&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||Qk&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?kl:wr)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function bl(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function Xf(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function Au(i,e){if(!e.anchorNode)return!1;try{return Xf(i,e.anchorNode)}catch{return!1}}function Js(i){return i.nodeType==3?is(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function ml(i,e,t,n){return t?f0(i,e,t,n,-1)||f0(i,e,t,n,1):!1}function ns(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function zu(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}function f0(i,e,t,n,r){for(;;){if(i==t&&e==n)return!0;if(e==(r<0?0:di(i))){if(i.nodeName=="DIV")return!1;let o=i.parentNode;if(!o||o.nodeType!=1)return!1;e=ns(i)+(r<0?0:1),i=o}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?di(i):0}else return!1}}function di(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function Fl(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function Jk(i){let e=i.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function Bv(i,e){let t=e.width/i.offsetWidth,n=e.height/i.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-i.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-i.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function Zk(i,e,t,n,r,o,a,u){let h=i.ownerDocument,p=h.defaultView||window;for(let d=i,g=!1;d&&!g;)if(d.nodeType==1){let v,w=d==h.body,S=1,k=1;if(w)v=Jk(p);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(g=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let N=d.getBoundingClientRect();({scaleX:S,scaleY:k}=Bv(d,N)),v={left:N.left,right:N.left+d.clientWidth*S,top:N.top,bottom:N.top+d.clientHeight*k}}let b=0,A=0;if(r=="nearest")e.top<v.top?(A=e.top-(v.top+a),t>0&&e.bottom>v.bottom+A&&(A=e.bottom-v.bottom+a)):e.bottom>v.bottom&&(A=e.bottom-v.bottom+a,t<0&&e.top-A<v.top&&(A=e.top-(v.top+a)));else{let N=e.bottom-e.top,z=v.bottom-v.top;A=(r=="center"&&N<=z?e.top+N/2-z/2:r=="start"||r=="center"&&t<0?e.top-a:e.bottom-z+a)-v.top}if(n=="nearest"?e.left<v.left?(b=e.left-(v.left+o),t>0&&e.right>v.right+b&&(b=e.right-v.right+o)):e.right>v.right&&(b=e.right-v.right+o,t<0&&e.left<v.left+b&&(b=e.left-(v.left+o))):b=(n=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:n=="start"==u?e.left-o:e.right-(v.right-v.left)+o)-v.left,b||A)if(w)p.scrollBy(b,A);else{let N=0,z=0;if(A){let j=d.scrollTop;d.scrollTop+=A/k,z=(d.scrollTop-j)*k}if(b){let j=d.scrollLeft;d.scrollLeft+=b/S,N=(d.scrollLeft-j)*S}e={left:e.left-N,top:e.top-z,right:e.right-N,bottom:e.bottom-z},N&&Math.abs(N-b)<1&&(n="nearest"),z&&Math.abs(z-A)<1&&(r="nearest")}if(w)break;(e.top<v.top||e.bottom>v.bottom||e.left<v.left||e.right>v.right)&&(e={left:Math.max(e.left,v.left),right:Math.min(e.right,v.right),top:Math.max(e.top,v.top),bottom:Math.min(e.bottom,v.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function eb(i){let e=i.ownerDocument,t,n;for(let r=i.parentNode;r&&!(r==e.body||t&&n);)if(r.nodeType==1)!n&&r.scrollHeight>r.clientHeight&&(n=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:n}}class tb{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?di(t):0),n,Math.min(e.focusOffset,n?di(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let zs=null;function Iv(i){if(i.setActive)return i.setActive();if(zs)return i.focus(zs);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(zs==null?{get preventScroll(){return zs={preventScroll:!0},!0}}:void 0),!zs){zs=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],o=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=o&&(n.scrollLeft=o)}}}let d0;function is(i,e,t=e){let n=d0||(d0=document.createRange());return n.setEnd(i,t),n.setStart(i,e),n}function Ks(i,e,t,n){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=n);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,i.dispatchEvent(o);let a=new KeyboardEvent("keyup",r);return a.synthetic=!0,i.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function nb(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function Fv(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function ib(i,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,di(t));;)if(n){if(t.nodeType!=1)return!1;let r=t.childNodes[n-1];r.contentEditable=="false"?n--:(t=r,n=di(t))}else{if(t==i)return!0;n=ns(t),t=t.parentNode}}function zv(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}function _v(i,e){for(let t=i,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=di(t)}else if(t.parentNode&&!zu(t))n=ns(t),t=t.parentNode;else return null}}function jv(i,e){for(let t=i,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!zu(t))n=ns(t)+1,t=t.parentNode;else return null}}class Ut{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Ut(e.parentNode,ns(e),t)}static after(e,t){return new Ut(e.parentNode,ns(e)+1,t)}}const Hd=[];class Qe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,r=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=r?r.nextSibling:n.firstChild)){let u=Qe.get(o);(!u||!u.parent&&u.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,t),a.flags&=-8}if(o=r?r.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&o!=a.dom&&(t.written=!0),a.dom.parentNode==n)for(;o&&o!=a.dom;)o=p0(o);else n.insertBefore(a.dom,o);r=a.dom}for(o=r?r.nextSibling:n.firstChild,o&&t&&t.node==n&&(t.written=!0);o;)o=p0(o)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=di(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Qe.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,o=0;;r++){let a=this.children[r];if(a.dom==n)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,o=-1,a=-1,u=-1;for(let h=0,p=n,d=n;h<this.children.length;h++){let g=this.children[h],v=p+g.length;if(p<e&&v>t)return g.domBoundsAround(e,t,p);if(v>=e&&r==-1&&(r=h,o=p),p>t&&g.dom.parentNode==this.dom){a=h,u=d;break}d=v,p=v+g.breakAfter}return{from:o,to:u<0?n+this.length:u,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=Hd){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&n.indexOf(o)<0&&o.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Hv(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Qe.prototype.breakAfter=0;function p0(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class Hv{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Vv(i,e,t,n,r,o,a,u,h){let{children:p}=i,d=p.length?p[e]:null,g=o.length?o[o.length-1]:null,v=g?g.breakAfter:a;if(!(e==n&&d&&!a&&!v&&o.length<2&&d.merge(t,r,o.length?g:null,t==0,u,h))){if(n<p.length){let w=p[n];w&&(r<w.length||w.breakAfter&&(g!=null&&g.breakAfter))?(e==n&&(w=w.split(r),r=0),!v&&g&&w.merge(0,r,g,!0,0,h)?o[o.length-1]=w:((r||w.children.length&&!w.children[0].length)&&w.merge(0,r,null,!1,0,h),o.push(w))):w!=null&&w.breakAfter&&(g?g.breakAfter=1:a=1),n++}for(d&&(d.breakAfter=a,t>0&&(!a&&o.length&&d.merge(t,d.length,o[0],!1,u,0)?d.breakAfter=o.shift().breakAfter:(t<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(t,d.length,null,!1,u,0),e++));e<n&&o.length;)if(p[n-1].become(o[o.length-1]))n--,o.pop(),h=o.length?0:u;else if(p[e].become(o[0]))e++,o.shift(),u=o.length?0:h;else break;!o.length&&e&&n<p.length&&!p[e-1].breakAfter&&p[n].merge(0,0,p[e-1],!1,u,h)&&e--,(e<n||o.length)&&i.replaceChildren(e,n,o)}}function Wv(i,e,t,n,r,o){let a=i.childCursor(),{i:u,off:h}=a.findPos(t,1),{i:p,off:d}=a.findPos(e,-1),g=e-t;for(let v of n)g+=v.length;i.length+=g,Vv(i,p,d,u,h,n,0,r,o)}let un=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Jf=typeof document<"u"?document:{documentElement:{style:{}}};const Zf=/Edge\/(\d+)/.exec(un.userAgent),Uv=/MSIE \d/.test(un.userAgent),ed=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(un.userAgent),lc=!!(Uv||ed||Zf),m0=!lc&&/gecko\/(\d+)/i.test(un.userAgent),cf=!lc&&/Chrome\/(\d+)/.exec(un.userAgent),rb="webkitFontSmoothing"in Jf.documentElement.style,$v=!lc&&/Apple Computer/.test(un.vendor),g0=$v&&(/Mobile\/\w+/.test(un.userAgent)||un.maxTouchPoints>2);var ce={mac:g0||/Mac/.test(un.platform),windows:/Win/.test(un.platform),linux:/Linux|X11/.test(un.platform),ie:lc,ie_version:Uv?Jf.documentMode||6:ed?+ed[1]:Zf?+Zf[1]:0,gecko:m0,gecko_version:m0?+(/Firefox\/(\d+)/.exec(un.userAgent)||[0,0])[1]:0,chrome:!!cf,chrome_version:cf?+cf[1]:0,ios:g0,android:/Android\b/.test(un.userAgent),safari:$v,webkit_version:rb?+(/\bAppleWebKit\/(\d+)/.exec(un.userAgent)||[0,0])[1]:0,tabSize:Jf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const sb=256;class Kn extends Qe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof Kn)||this.length-(t-e)+n.length>sb||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Kn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Ut(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return ob(this.dom,e,t)}}class Bi extends Qe{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(Fv(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,o,a){return n&&(!(n instanceof Bi&&n.mark.eq(this.mark))||e&&o<=0||t<this.length&&a<=0)?!1:(Wv(this,e,t,n?n.children.slice():[],o-1,a-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,o=0;for(let u of this.children){let h=n+u.length;h>e&&t.push(n<e?u.split(e-n):u),r<0&&n>=e&&(r=o),n=h,o++}let a=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Bi(this.mark,t,a)}domAtPos(e){return Kv(this,e)}coordsAt(e,t){return Gv(this,e,t)}}function ob(i,e,t){let n=i.nodeValue.length;e>n&&(e=n);let r=e,o=e,a=0;e==0&&t<0||e==n&&t>=0?ce.chrome||ce.gecko||(e?(r--,a=1):o<n&&(o++,a=-1)):t<0?r--:o<n&&o++;let u=is(i,r,o).getClientRects();if(!u.length)return null;let h=u[(a?a<0:t>=0)?0:u.length-1];return ce.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(u,p=>p.width)||h),a?Fl(h,a<0):h||null}class pr extends Qe{static create(e,t,n){return new pr(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=pr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,r,o,a){return n&&(!(n instanceof pr)||!this.widget.compare(n.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof pr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return $e.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):$e.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ut.before(this.dom):Ut.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let a=this.side?this.side<0:e>0;for(let u=a?r.length-1:0;o=r[u],!(e>0?u==0:u==r.length-1||o.top<o.bottom);u+=a?-1:1);return Fl(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zs extends Qe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Zs&&e.side==this.side}split(){return new Zs(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ut.before(this.dom):Ut.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return $e.empty}get isHidden(){return!0}}Kn.prototype.children=pr.prototype.children=Zs.prototype.children=Hd;function Kv(i,e){let t=i.dom,{children:n}=i,r=0;for(let o=0;r<n.length;r++){let a=n[r],u=o+a.length;if(!(u==o&&a.getSide()<=0)){if(e>o&&e<u&&a.dom.parentNode==t)return a.domAtPos(e-o);if(e<=o)break;o=u}}for(let o=r;o>0;o--){let a=n[o-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let o=r;o<n.length;o++){let a=n[o];if(a.dom.parentNode==t)return a.domAtPos(0)}return new Ut(t,0)}function qv(i,e,t){let n,{children:r}=i;t>0&&e instanceof Bi&&r.length&&(n=r[r.length-1])instanceof Bi&&n.mark.eq(e.mark)?qv(n,e.children[0],t-1):(r.push(e),e.setParent(i)),i.length+=e.length}function Gv(i,e,t){let n=null,r=-1,o=null,a=-1;function u(p,d){for(let g=0,v=0;g<p.children.length&&v<=d;g++){let w=p.children[g],S=v+w.length;S>=d&&(w.children.length?u(w,d-v):(!o||o.isHidden&&(t>0||ab(o,w)))&&(S>d||v==S&&w.getSide()>0)?(o=w,a=d-v):(v<d||v==S&&w.getSide()<0&&!w.isHidden)&&(n=w,r=d-v)),v=S}}u(i,e);let h=(t<0?n:o)||n||o;return h?h.coordsAt(Math.max(0,h==n?r:a),t):lb(i)}function lb(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=Js(e);return t[t.length-1]||null}function ab(i,e){let t=i.coordsAt(0,1),n=e.coordsAt(0,1);return t&&n&&n.top<t.bottom}function td(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}const y0=Object.create(null);function _u(i,e,t){if(i==e)return!0;i||(i=y0),e||(e=y0);let n=Object.keys(i),r=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of n)if(o!=t&&(r.indexOf(o)==-1||i[o]!==e[o]))return!1;return!0}function nd(i,e,t){let n=!1;if(e)for(let r in e)t&&r in t||(n=!0,r=="style"?i.style.cssText="":i.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(n=!0,r=="style"?i.style.cssText=t[r]:i.setAttribute(r,t[r]));return n}function ub(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let n=i.attributes[t];e[n.name]=n.value}return e}class Fi{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Jt=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Jt||(Jt={}));class ke extends ts{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new zl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new xr(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,r;if(e.isBlockGap)n=-5e8,r=4e8;else{let{start:o,end:a}=Yv(e,t);n=(o?t?-3e8:-1:5e8)-1,r=(a?t?2e8:1:-6e8)+1}return new xr(e,n,r,t,e.widget||null,!0)}static line(e){return new _l(e)}static set(e,t=!1){return Ue.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ke.none=Ue.empty;class zl extends ke{constructor(e){let{start:t,end:n}=Yv(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof zl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&_u(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}zl.prototype.point=!1;class _l extends ke{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof _l&&this.spec.class==e.spec.class&&_u(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}_l.prototype.mapMode=Xt.TrackBefore;_l.prototype.point=!0;class xr extends ke{constructor(e,t,n,r,o,a){super(t,n,o,e),this.block=r,this.isReplace=a,this.mapMode=r?t<=0?Xt.TrackBefore:Xt.TrackAfter:Xt.TrackDel}get type(){return this.startSide!=this.endSide?Jt.WidgetRange:this.startSide<=0?Jt.WidgetBefore:Jt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof xr&&cb(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}xr.prototype.point=!0;function Yv(i,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=i;return t==null&&(t=i.inclusive),n==null&&(n=i.inclusive),{start:t??e,end:n??e}}function cb(i,e){return i==e||!!(i&&e&&i.compare(e))}function Du(i,e,t,n=0){let r=t.length-1;r>=0&&t[r]+n>=i?t[r]=Math.max(t[r],e):t.push(i,e)}class wt extends Qe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,o,a){if(n){if(!(n instanceof wt))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),Wv(this,e,t,n?n.children.slice():[],o,a),!0}split(e){let t=new wt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let o=n;o<this.children.length;o++)t.append(this.children[o],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){_u(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){qv(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=td(t,this.attrs||{})),n&&(this.attrs=td({class:n},this.attrs||{}))}domAtPos(e){return Kv(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(Fv(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(nd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&Qe.get(r)instanceof Bi;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((n=Qe.get(r))===null||n===void 0?void 0:n.isEditable)==!1&&(!ce.ios||!this.children.some(o=>o instanceof Kn))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof Kn)||/[^ -~]/.test(n.text))return null;let r=Js(n.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=Gv(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=n.bottom-n.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let a=(o-r.textHeight)/2;return{top:n.top+a,bottom:n.bottom-a,left:n.left,right:n.left}}}return n}become(e){return e instanceof wt&&this.children.length==0&&e.children.length==0&&_u(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let o=e.children[n],a=r+o.length;if(a>=t){if(o instanceof wt)return o;if(a>t)break}r=a+o.breakAfter}return null}}class Oi extends Qe{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,o,a){return n&&(!(n instanceof Oi)||!this.widget.compare(n.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Ut.before(this.dom):Ut.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Oi(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Hd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):$e.empty}domBoundsAround(){return null}become(e){return e instanceof Oi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof id?null:Fl(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class id extends Fi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class gl{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Oi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new wt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(su(new Zs(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Oi)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(su(new Kn(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,o,a){if(this.disallowBlockEffectsFor[a]&&n instanceof xr){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=t-e;if(n instanceof xr)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Oi(n.widget||eo.block,u,n));else{let h=pr.create(n.widget||eo.inline,u,u?0:n.startSide),p=this.atCursorPos&&!h.isEditable&&o<=r.length&&(e<t||n.startSide>0),d=!h.isEditable&&(e<t||o>r.length||n.startSide<=0),g=this.getLine();this.pendingBuffer==2&&!p&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),p&&(g.append(su(new Zs(1),r),o),o=r.length+Math.max(0,o-r.length)),g.append(su(h,r),o),this.atCursorPos=d,this.pendingBuffer=d?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,n,r,o){let a=new gl(e,t,n,o);return a.openEnd=Ue.spans(r,t,n,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function su(i,e){for(let t of e)i=new Bi(t,[i],i.length);return i}class eo extends Fi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}eo.inline=new eo("span");eo.block=new eo("div");var it=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(it||(it={}));const rs=it.LTR,Vd=it.RTL;function Qv(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const hb=Qv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),fb=Qv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),rd=Object.create(null),ni=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);rd[e]=t,rd[t]=-e}function Xv(i){return i<=247?hb[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?fb[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8204?256:64336<=i&&i<=65023?4:1}const db=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class mr{get dir(){return this.level%2?Vd:rs}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,r){let o=-1;for(let a=0;a<e.length;a++){let u=e[a];if(u.from<=t&&u.to>=t){if(u.level==n)return a;(o<0||(r!=0?r<0?u.from<t:u.to>t:e[o].level>u.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}function Jv(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++){let n=i[t],r=e[t];if(n.from!=r.from||n.to!=r.to||n.direction!=r.direction||!Jv(n.inner,r.inner))return!1}return!0}const Ye=[];function pb(i,e,t,n,r){for(let o=0;o<=n.length;o++){let a=o?n[o-1].to:e,u=o<n.length?n[o].from:t,h=o?256:r;for(let p=a,d=h,g=h;p<u;p++){let v=Xv(i.charCodeAt(p));v==512?v=d:v==8&&g==4&&(v=16),Ye[p]=v==4?2:v,v&7&&(g=v),d=v}for(let p=a,d=h,g=h;p<u;p++){let v=Ye[p];if(v==128)p<u-1&&d==Ye[p+1]&&d&24?v=Ye[p]=d:Ye[p]=256;else if(v==64){let w=p+1;for(;w<u&&Ye[w]==64;)w++;let S=p&&d==8||w<t&&Ye[w]==8?g==1?1:8:256;for(let k=p;k<w;k++)Ye[k]=S;p=w-1}else v==8&&g==1&&(Ye[p]=1);d=v,v&7&&(g=v)}}}function mb(i,e,t,n,r){let o=r==1?2:1;for(let a=0,u=0,h=0;a<=n.length;a++){let p=a?n[a-1].to:e,d=a<n.length?n[a].from:t;for(let g=p,v,w,S;g<d;g++)if(w=rd[v=i.charCodeAt(g)])if(w<0){for(let k=u-3;k>=0;k-=3)if(ni[k+1]==-w){let b=ni[k+2],A=b&2?r:b&4?b&1?o:r:0;A&&(Ye[g]=Ye[ni[k]]=A),u=k;break}}else{if(ni.length==189)break;ni[u++]=g,ni[u++]=v,ni[u++]=h}else if((S=Ye[g])==2||S==1){let k=S==r;h=k?0:1;for(let b=u-3;b>=0;b-=3){let A=ni[b+2];if(A&2)break;if(k)ni[b+2]|=2;else{if(A&4)break;ni[b+2]|=4}}}}}function gb(i,e,t,n){for(let r=0,o=n;r<=t.length;r++){let a=r?t[r-1].to:i,u=r<t.length?t[r].from:e;for(let h=a;h<u;){let p=Ye[h];if(p==256){let d=h+1;for(;;)if(d==u){if(r==t.length)break;d=t[r++].to,u=r<t.length?t[r].from:e}else if(Ye[d]==256)d++;else break;let g=o==1,v=(d<e?Ye[d]:n)==1,w=g==v?g?1:2:n;for(let S=d,k=r,b=k?t[k-1].to:i;S>h;)S==b&&(S=t[--k].from,b=k?t[k-1].to:i),Ye[--S]=w;h=d}else o=p,h++}}}function sd(i,e,t,n,r,o,a){let u=n%2?2:1;if(n%2==r%2)for(let h=e,p=0;h<t;){let d=!0,g=!1;if(p==o.length||h<o[p].from){let k=Ye[h];k!=u&&(d=!1,g=k==16)}let v=!d&&u==1?[]:null,w=d?n:n+1,S=h;e:for(;;)if(p<o.length&&S==o[p].from){if(g)break e;let k=o[p];if(!d)for(let b=k.to,A=p+1;;){if(b==t)break e;if(A<o.length&&o[A].from==b)b=o[A++].to;else{if(Ye[b]==u)break e;break}}if(p++,v)v.push(k);else{k.from>h&&a.push(new mr(h,k.from,w));let b=k.direction==rs!=!(w%2);od(i,b?n+1:n,r,k.inner,k.from,k.to,a),h=k.to}S=k.to}else{if(S==t||(d?Ye[S]!=u:Ye[S]==u))break;S++}v?sd(i,h,S,n+1,r,v,a):h<S&&a.push(new mr(h,S,w)),h=S}else for(let h=t,p=o.length;h>e;){let d=!0,g=!1;if(!p||h>o[p-1].to){let k=Ye[h-1];k!=u&&(d=!1,g=k==16)}let v=!d&&u==1?[]:null,w=d?n:n+1,S=h;e:for(;;)if(p&&S==o[p-1].to){if(g)break e;let k=o[--p];if(!d)for(let b=k.from,A=p;;){if(b==e)break e;if(A&&o[A-1].to==b)b=o[--A].from;else{if(Ye[b-1]==u)break e;break}}if(v)v.push(k);else{k.to<h&&a.push(new mr(k.to,h,w));let b=k.direction==rs!=!(w%2);od(i,b?n+1:n,r,k.inner,k.from,k.to,a),h=k.from}S=k.from}else{if(S==e||(d?Ye[S-1]!=u:Ye[S-1]==u))break;S--}v?sd(i,S,h,n+1,r,v,a):S<h&&a.push(new mr(S,h,w)),h=S}}function od(i,e,t,n,r,o,a){let u=e%2?2:1;pb(i,r,o,n,u),mb(i,r,o,n,u),gb(r,o,n,u),sd(i,r,o,e,t,n,a)}function yb(i,e,t){if(!i)return[new mr(0,0,e==Vd?1:0)];if(e==rs&&!t.length&&!db.test(i))return Zv(i.length);if(t.length)for(;i.length>Ye.length;)Ye[Ye.length]=256;let n=[],r=e==rs?0:1;return od(i,r,r,t,0,i.length,n),n}function Zv(i){return[new mr(0,i,0)]}let e1="";function vb(i,e,t,n,r){var o;let a=n.head-i.from,u=mr.find(e,a,(o=n.bidiLevel)!==null&&o!==void 0?o:-1,n.assoc),h=e[u],p=h.side(r,t);if(a==p){let v=u+=r?1:-1;if(v<0||v>=e.length)return null;h=e[u=v],a=h.side(!r,t),p=h.side(r,t)}let d=Bt(i.text,a,h.forward(r,t));(d<h.from||d>h.to)&&(d=p),e1=i.text.slice(Math.min(a,d),Math.max(a,d));let g=u==(r?e.length-1:0)?null:e[u+(r?1:-1)];return g&&d==p&&g.level+(r?0:1)<h.level?K.cursor(g.side(!r,t)+i.from,g.forward(r,t)?1:-1,g.level):K.cursor(d+i.from,h.forward(r,t)?-1:1,h.level)}function wb(i,e,t){for(let n=e;n<t;n++){let r=Xv(i.charCodeAt(n));if(r==1)return rs;if(r==2||r==4)return Vd}return rs}const t1=he.define(),n1=he.define(),i1=he.define(),r1=he.define(),ld=he.define(),s1=he.define(),o1=he.define(),Wd=he.define(),Ud=he.define(),l1=he.define({combine:i=>i.some(e=>e)}),a1=he.define({combine:i=>i.some(e=>e)}),u1=he.define();class qs{constructor(e,t="nearest",n="nearest",r=5,o=5,a=!1){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=o,this.isSnapshot=a}map(e){return e.empty?this:new qs(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new qs(K.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ou=Ne.define({map:(i,e)=>i.map(e)}),c1=Ne.define();function hn(i,e,t){let n=i.facet(r1);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Ri=he.define({combine:i=>i.length?i[0]:!0});let xb=0;const ll=he.define();class mt{constructor(e,t,n,r,o){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.extension=o(this)}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:o,decorations:a}=t||{};return new mt(xb++,e,n,r,u=>{let h=[ll.of(u)];return a&&h.push(Cl.of(p=>{let d=p.plugin(u);return d?a(d):ke.none})),o&&h.push(o(u)),h})}static fromClass(e,t){return mt.define(n=>new e(n),t)}}class hf{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(hn(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){hn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){hn(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const h1=he.define(),$d=he.define(),Cl=he.define(),f1=he.define(),Kd=he.define(),d1=he.define();function v0(i,e){let t=i.state.facet(d1);if(!t.length)return t;let n=t.map(o=>o instanceof Function?o(i):o),r=[];return Ue.spans(n,e.from,e.to,{point(){},span(o,a,u,h){let p=o-e.from,d=a-e.from,g=r;for(let v=u.length-1;v>=0;v--,h--){let w=u[v].spec.bidiIsolate,S;if(w==null&&(w=wb(e.text,p,d)),h>0&&g.length&&(S=g[g.length-1]).to==p&&S.direction==w)S.to=d,g=S.inner;else{let k={from:p,to:d,direction:w,inner:[]};g.push(k),g=k.inner}}}}),r}const p1=he.define();function qd(i){let e=0,t=0,n=0,r=0;for(let o of i.state.facet(p1)){let a=o(i);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(n=Math.max(n,a.top)),a.bottom!=null&&(r=Math.max(r,a.bottom)))}return{left:e,right:t,top:n,bottom:r}}const al=he.define();class On{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new On(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let r=0,o=0,a=0,u=0;;r++){let h=r==e.length?null:e[r],p=a-u,d=h?h.fromB:1e9;for(;o<t.length&&t[o]<d;){let g=t[o],v=t[o+1],w=Math.max(u,g),S=Math.min(d,v);if(w<=S&&new On(w+p,S+p,w,S).addToSet(n),v>d)break;o+=2}if(!h)return n;new On(h.fromA,h.toA,h.fromB,h.toB).addToSet(n),a=h.toA,u=h.toB}}}class ju{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=bt.empty(this.startState.doc.length);for(let o of n)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,a,u,h)=>r.push(new On(o,a,u,h))),this.changedRanges=r}static create(e,t,n){return new ju(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class w0 extends Qe{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ke.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new wt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new On(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:p,toA:d})=>d<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!Ab(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?kb(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:p,to:d}=this.hasComposition;n=new On(p,d,e.changes.mapPos(p,-1),e.changes.mapPos(d,1)).addToSet(n.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(ce.ie||ce.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,u=this.updateDeco(),h=Mb(a,u,e.changes);return n=On.extendWithRanges(n,h),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=ce.chrome||ce.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||r.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Oi&&a.widget instanceof id&&o.push(a.dom);r.updateGaps(o)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let a=r.length-1;;a--){let u=a>=0?r[a]:null;if(!u)break;let{fromA:h,toA:p,fromB:d,toB:g}=u,v,w,S,k;if(n&&n.range.fromB<g&&n.range.toB>d){let j=gl.build(this.view.state.doc,d,n.range.fromB,this.decorations,this.dynamicDecorationMap),F=gl.build(this.view.state.doc,n.range.toB,g,this.decorations,this.dynamicDecorationMap);w=j.breakAtStart,S=j.openStart,k=F.openEnd;let $=this.compositionView(n);F.breakAtStart?$.breakAfter=1:F.content.length&&$.merge($.length,$.length,F.content[0],!1,F.openStart,0)&&($.breakAfter=F.content[0].breakAfter,F.content.shift()),j.content.length&&$.merge(0,0,j.content[j.content.length-1],!0,0,j.openEnd)&&j.content.pop(),v=j.content.concat($).concat(F.content)}else({content:v,breakAtStart:w,openStart:S,openEnd:k}=gl.build(this.view.state.doc,d,g,this.decorations,this.dynamicDecorationMap));let{i:b,off:A}=o.findPos(p,1),{i:N,off:z}=o.findPos(h,-1);Vv(this,N,z,b,A,v,w,S,k)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(c1)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new Kn(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new Bi(r,[t],t.length);let n=new wt;return n.append(t,0),n}fixCompositionDOM(e){let t=(o,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let u=Qe.get(o);u&&u!=a&&(u.dom=null),a.setDOM(o)},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)n=r.childPos(n.off,1),r=r.children[n.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,o=!r&&!(this.view.state.facet(Ri)||this.dom.tabIndex>-1)&&Au(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||o))return;let a=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(u.anchor)),p=u.empty?h:this.moveToLine(this.domAtPos(u.head));if(ce.gecko&&u.empty&&!this.hasComposition&&Sb(h)){let g=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(g,h.node.childNodes[h.offset]||null)),h=p=new Ut(g,0),a=!0}let d=this.view.observer.selectionRange;(a||!d.focusNode||(!ml(h.node,h.offset,d.anchorNode,d.anchorOffset)||!ml(p.node,p.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,u))&&(this.view.observer.ignore(()=>{ce.android&&ce.chrome&&this.dom.contains(d.focusNode)&&Eb(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let g=bl(this.view.root);if(g)if(u.empty){if(ce.gecko){let v=bb(h.node,h.offset);if(v&&v!=3){let w=(v==1?_v:jv)(h.node,h.offset);w&&(h=new Ut(w.node,w.offset))}}g.collapse(h.node,h.offset),u.bidiLevel!=null&&g.caretBidiLevel!==void 0&&(g.caretBidiLevel=u.bidiLevel)}else if(g.extend){g.collapse(h.node,h.offset);try{g.extend(p.node,p.offset)}catch{}}else{let v=document.createRange();u.anchor>u.head&&([h,p]=[p,h]),v.setEnd(p.node,p.offset),v.setStart(h.node,h.offset),g.removeAllRanges(),g.addRange(v)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(h,p)),this.impreciseAnchor=h.precise?null:new Ut(d.anchorNode,d.anchorOffset),this.impreciseHead=p.precise?null:new Ut(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&ml(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=bl(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let a=wt.find(this,t.head);if(!a)return;let u=a.posAtStart;if(t.head==u||t.head==u+a.length)return;let h=this.coordsAt(t.head,-1),p=this.coordsAt(t.head,1);if(!h||!p||h.bottom>p.top)return;let d=this.domAtPos(t.head+t.assoc);n.collapse(d.node,d.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=t.from&&n.collapse(r,o)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let r=e.offset;!n&&r<t.childNodes.length;r++){let o=Qe.get(t.childNodes[r]);o instanceof wt&&(n=o.domAtPos(0))}for(let r=e.offset-1;!n&&r>=0;r--){let o=Qe.get(t.childNodes[r]);o instanceof wt&&(n=o.domAtPos(o.length))}return n?new Ut(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=Qe.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(n<r.length||r instanceof wt)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,r=0;for(let o=this.length,a=this.children.length-1;a>=0;a--){let u=this.children[a],h=o-u.breakAfter,p=h-u.length;if(h<e)break;if(p<=e&&(p<e||u.covers(-1))&&(h>e||u.covers(1))&&(!n||u instanceof wt&&!(n instanceof wt&&t>=0)))n=u,r=p;else if(n&&p==e&&h==e&&u instanceof Oi&&Math.abs(t)<2){if(u.deco.startSide<0)break;a&&(n=null)}o=p}return n?n.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),r=this.children[t];if(!(r instanceof wt))return null;for(;r.children.length;){let{i:u,off:h}=r.childPos(n,1);for(;;u++){if(u==r.children.length)return null;if((r=r.children[u]).length)break}n=h}if(!(r instanceof Kn))return null;let o=Bt(r.text,n);if(o==n)return null;let a=is(r.dom,n,o).getClientRects();for(let u=0;u<a.length;u++){let h=a[u];if(u==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,h=this.view.textDirection==it.LTR;for(let p=0,d=0;d<this.children.length;d++){let g=this.children[d],v=p+g.length;if(v>r)break;if(p>=n){let w=g.dom.getBoundingClientRect();if(t.push(w.height),a){let S=g.dom.lastChild,k=S?Js(S):[];if(k.length){let b=k[k.length-1],A=h?b.right-w.left:w.right-b.left;A>u&&(u=A,this.minWidth=o,this.minWidthFrom=p,this.minWidthTo=v)}}}p=v+g.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?it.RTL:it.LTR}measureTextSize(){for(let o of this.children)if(o instanceof wt){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),t,n,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=Js(e.firstChild)[0];t=e.getBoundingClientRect().height,n=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Hv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],a=o?o.from-1:this.length;if(a>n){let u=(t.lineBlockAt(a).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(ke.replace({widget:new id(u),block:!0,inclusive:!0,isBlockGap:!0}).range(n,a))}if(!o)break;n=o.to+1}return ke.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Cl).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),n=!1,r=this.view.state.facet(f1).map((o,a)=>{let u=typeof o=="function";return u&&(n=!0),u?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=n,t.push(Ue.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let p=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=p.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let p of this.view.state.facet(u1))try{if(p(this.view,e.range,e))return!0}catch(d){hn(this.view.state,d,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!n)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let o=qd(this.view),a={left:n.left-o.left,top:n.top-o.top,right:n.right+o.right,bottom:n.bottom+o.bottom},{offsetWidth:u,offsetHeight:h}=this.view.scrollDOM;Zk(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,u),-u),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==it.LTR)}}function Sb(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}function m1(i,e){let t=i.observer.selectionRange;if(!t.focusNode)return null;let n=_v(t.focusNode,t.focusOffset),r=jv(t.focusNode,t.focusOffset),o=n||r;if(r&&n&&r.node!=n.node){let u=Qe.get(r.node);if(!u||u instanceof Kn&&u.text!=r.node.nodeValue)o=r;else if(i.docView.lastCompositionAfterCursor){let h=Qe.get(n.node);!h||h instanceof Kn&&h.text!=n.node.nodeValue||(o=r)}}if(i.docView.lastCompositionAfterCursor=o!=n,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function kb(i,e,t){let n=m1(i,t);if(!n)return null;let{node:r,from:o,to:a}=n,u=r.nodeValue;if(/[\n\r]/.test(u)||i.state.doc.sliceString(n.from,n.to)!=u)return null;let h=e.invertedDesc,p=new On(h.mapPos(o),h.mapPos(a),o,a),d=[];for(let g=r.parentNode;;g=g.parentNode){let v=Qe.get(g);if(v instanceof Bi)d.push({node:g,deco:v.mark});else{if(v instanceof wt||g.nodeName=="DIV"&&g.parentNode==i.contentDOM)return{range:p,text:r,marks:d,line:g};if(g!=i.contentDOM)d.push({node:g,deco:new zl({inclusive:!0,attributes:ub(g),tagName:g.tagName.toLowerCase()})});else return null}}}function bb(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}let Cb=class{constructor(){this.changes=[]}compareRange(e,t){Du(e,t,this.changes)}comparePoint(e,t){Du(e,t,this.changes)}boundChange(e){Du(e,e,this.changes)}};function Mb(i,e,t){let n=new Cb;return Ue.compare(i,e,t,n),n.changes}function Eb(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Ab(i,e){let t=!1;return e&&i.iterChangedRanges((n,r)=>{n<e.to&&r>e.from&&(t=!0)}),t}function Db(i,e,t=1){let n=i.charCategorizer(e),r=i.doc.lineAt(e),o=e-r.from;if(r.length==0)return K.cursor(e);o==0?t=1:o==r.length&&(t=-1);let a=o,u=o;t<0?a=Bt(r.text,o,!1):u=Bt(r.text,o);let h=n(r.text.slice(a,u));for(;a>0;){let p=Bt(r.text,a,!1);if(n(r.text.slice(p,a))!=h)break;a=p}for(;u<r.length;){let p=Bt(r.text,u);if(n(r.text.slice(u,p))!=h)break;u=p}return K.range(a+r.from,u+r.from)}function Tb(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function Pb(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function ff(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function x0(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function S0(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function ad(i,e,t){let n,r,o,a,u=!1,h,p,d,g;for(let S=i.firstChild;S;S=S.nextSibling){let k=Js(S);for(let b=0;b<k.length;b++){let A=k[b];r&&ff(r,A)&&(A=x0(S0(A,r.bottom),r.top));let N=Tb(e,A),z=Pb(t,A);if(N==0&&z==0)return S.nodeType==3?k0(S,e,t):ad(S,e,t);if(!n||a>z||a==z&&o>N){n=S,r=A,o=N,a=z;let j=z?t<A.top?-1:1:N?e<A.left?-1:1:0;u=!j||(j>0?b<k.length-1:b>0)}N==0?t>A.bottom&&(!d||d.bottom<A.bottom)?(h=S,d=A):t<A.top&&(!g||g.top>A.top)&&(p=S,g=A):d&&ff(d,A)?d=S0(d,A.bottom):g&&ff(g,A)&&(g=x0(g,A.top))}}if(d&&d.bottom>=t?(n=h,r=d):g&&g.top<=t&&(n=p,r=g),!n)return{node:i,offset:0};let v=Math.max(r.left,Math.min(r.right,e));if(n.nodeType==3)return k0(n,v,t);if(u&&n.contentEditable!="false")return ad(n,v,t);let w=Array.prototype.indexOf.call(i.childNodes,n)+(e>=(r.left+r.right)/2?1:0);return{node:i,offset:w}}function k0(i,e,t){let n=i.nodeValue.length,r=-1,o=1e9,a=0;for(let u=0;u<n;u++){let h=is(i,u,u+1).getClientRects();for(let p=0;p<h.length;p++){let d=h[p];if(d.top==d.bottom)continue;a||(a=e-d.left);let g=(d.top>t?d.top-t:t-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&g<o){let v=e>=(d.left+d.right)/2,w=v;if((ce.chrome||ce.gecko)&&is(i,u).getBoundingClientRect().left==d.right&&(w=!v),g<=0)return{node:i,offset:u+(w?1:0)};r=u+(w?1:0),o=g}}}return{node:i,offset:r>-1?r:a>0?i.nodeValue.length:0}}function g1(i,e,t,n=-1){var r,o;let a=i.contentDOM.getBoundingClientRect(),u=a.top+i.viewState.paddingTop,h,{docHeight:p}=i.viewState,{x:d,y:g}=e,v=g-u;if(v<0)return 0;if(v>p)return i.state.doc.length;for(let j=i.viewState.heightOracle.textHeight/2,F=!1;h=i.elementAtHeight(v),h.type!=Jt.Text;)for(;v=n>0?h.bottom+j:h.top-j,!(v>=0&&v<=p);){if(F)return t?null:0;F=!0,n=-n}g=u+v;let w=h.from;if(w<i.viewport.from)return i.viewport.from==0?0:t?null:b0(i,a,h,d,g);if(w>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:t?null:b0(i,a,h,d,g);let S=i.dom.ownerDocument,k=i.root.elementFromPoint?i.root:S,b=k.elementFromPoint(d,g);b&&!i.contentDOM.contains(b)&&(b=null),b||(d=Math.max(a.left+1,Math.min(a.right-1,d)),b=k.elementFromPoint(d,g),b&&!i.contentDOM.contains(b)&&(b=null));let A,N=-1;if(b&&((r=i.docView.nearest(b))===null||r===void 0?void 0:r.isEditable)!=!1){if(S.caretPositionFromPoint){let j=S.caretPositionFromPoint(d,g);j&&({offsetNode:A,offset:N}=j)}else if(S.caretRangeFromPoint){let j=S.caretRangeFromPoint(d,g);j&&({startContainer:A,startOffset:N}=j,(!i.contentDOM.contains(A)||ce.safari&&Rb(A,N,d)||ce.chrome&&Ob(A,N,d))&&(A=void 0))}A&&(N=Math.min(di(A),N))}if(!A||!i.docView.dom.contains(A)){let j=wt.find(i.docView,w);if(!j)return v>h.top+h.height/2?h.to:h.from;({node:A,offset:N}=ad(j.dom,d,g))}let z=i.docView.nearest(A);if(!z)return null;if(z.isWidget&&((o=z.dom)===null||o===void 0?void 0:o.nodeType)==1){let j=z.dom.getBoundingClientRect();return e.y<j.top||e.y<=j.bottom&&e.x<=(j.left+j.right)/2?z.posAtStart:z.posAtEnd}else return z.localPosFromDOM(A,N)+z.posAtStart}function b0(i,e,t,n,r){let o=Math.round((n-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let u=i.viewState.heightOracle.textHeight,h=Math.floor((r-t.top-(i.defaultLineHeight-u)*.5)/u);o+=h*i.viewState.heightOracle.lineLength}let a=i.state.sliceDoc(t.from,t.to);return t.from+Gf(a,o,i.state.tabSize)}function Rb(i,e,t){let n;if(i.nodeType!=3||e!=(n=i.nodeValue.length))return!1;for(let r=i.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return is(i,n-1,n).getBoundingClientRect().left>t}function Ob(i,e,t){if(e!=0)return!1;for(let r=i;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let n=i.nodeType==1?i.getBoundingClientRect():is(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function ud(i,e,t){let n=i.lineBlockAt(e);if(Array.isArray(n.type)){let r;for(let o of n.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==Jt.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||n}return n}function Lb(i,e,t,n){let r=ud(i,e.head,e.assoc||-1),o=!n||r.type!=Jt.Text||!(i.lineWrapping||r.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let a=i.dom.getBoundingClientRect(),u=i.textDirectionAt(r.from),h=i.posAtCoords({x:t==(u==it.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(h!=null)return K.cursor(h,t?-1:1)}return K.cursor(t?r.to:r.from,t?-1:1)}function C0(i,e,t,n){let r=i.state.doc.lineAt(e.head),o=i.bidiSpans(r),a=i.textDirectionAt(r.from);for(let u=e,h=null;;){let p=vb(r,o,a,u,t),d=e1;if(!p){if(r.number==(t?i.state.doc.lines:1))return u;d=`
`,r=i.state.doc.line(r.number+(t?1:-1)),o=i.bidiSpans(r),p=i.visualLineSide(r,!t)}if(h){if(!h(d))return u}else{if(!n)return p;h=n(d)}u=p}}function Nb(i,e,t){let n=i.state.charCategorizer(e),r=n(t);return o=>{let a=n(o);return r==ot.Space&&(r=a),r==a}}function Bb(i,e,t,n){let r=e.head,o=t?1:-1;if(r==(t?i.state.doc.length:0))return K.cursor(r,e.assoc);let a=e.goalColumn,u,h=i.contentDOM.getBoundingClientRect(),p=i.coordsAtPos(r,e.assoc||-1),d=i.documentTop;if(p)a==null&&(a=p.left-h.left),u=o<0?p.top:p.bottom;else{let w=i.viewState.lineBlockAt(r);a==null&&(a=Math.min(h.right-h.left,i.defaultCharacterWidth*(r-w.from))),u=(o<0?w.top:w.bottom)+d}let g=h.left+a,v=n??i.viewState.heightOracle.textHeight>>1;for(let w=0;;w+=10){let S=u+(v+w)*o,k=g1(i,{x:g,y:S},!1,o);if(S<h.top||S>h.bottom||(o<0?k<r:k>r)){let b=i.docView.coordsForChar(k),A=!b||S<b.top?-1:1;return K.cursor(k,A,void 0,a)}}}function Tu(i,e,t){for(;;){let n=0;for(let r of i)r.between(e-1,e+1,(o,a,u)=>{if(e>o&&e<a){let h=n||t||(e-o<a-e?-1:1);e=h<0?o:a,n=h}});if(!n)return e}}function df(i,e,t){let n=Tu(i.state.facet(Kd).map(r=>r(i)),t.from,e.head>t.from?-1:1);return n==t.from?t:K.cursor(n,n<t.from?1:-1)}const ul="";class Ib{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(_e.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ul}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let o=this.text.length;this.readNode(r);let a=r.nextSibling;if(a==t)break;let u=Qe.get(r),h=Qe.get(a);(u&&h?u.breakAfter:(u?u.breakAfter:zu(r))||zu(a)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&this.lineBreak(),r=a}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,u;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(u=r.exec(t))&&(o=u.index,a=u[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);n=o+a}}readNode(e){if(e.cmIgnore)return;let t=Qe.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(Fb(e,n.node,n.offset)?t:0))}}function Fb(i,e,t){for(;;){if(!e||t<di(e))return!1;if(e==i)return!0;t=ns(e)+1,e=e.parentNode}}class M0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class zb{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let u=o||a?[]:Hb(e),h=new Ib(u,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=Vb(u,this.bounds.from)}else{let u=e.observer.selectionRange,h=o&&o.node==u.focusNode&&o.offset==u.focusOffset||!Xf(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),p=a&&a.node==u.anchorNode&&a.offset==u.anchorOffset||!Xf(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset),d=e.viewport;if((ce.ios||ce.chrome)&&e.state.selection.main.empty&&h!=p&&(d.from>0||d.to<e.state.doc.length)){let g=Math.min(h,p),v=Math.max(h,p),w=d.from-g,S=d.to-v;(w==0||w==1||g==0)&&(S==0||S==-1||v==e.state.doc.length)&&(h=0,p=e.state.doc.length)}this.newSel=K.single(p,h)}}}function y1(i,e){let t,{newSel:n}=e,r=i.state.selection.main,o=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:u}=e.bounds,h=r.from,p=null;(o===8||ce.android&&e.text.length<u-a)&&(h=r.to,p="end");let d=jb(i.state.doc.sliceString(a,u,ul),e.text,h-a,p);d&&(ce.chrome&&o==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==ul+ul&&d.toB--,t={from:a+d.from,to:a+d.toA,insert:$e.of(e.text.slice(d.from,d.toB).split(ul))})}else n&&(!i.hasFocus&&i.state.facet(Ri)||n.main.eq(r))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!r.empty&&n&&n.main.empty?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:(ce.mac||ce.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=K.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:$e.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,r.to))}:ce.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(n&&(n=K.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:$e.of([" "])}),t)return Gd(i,t,n,o);if(n&&!n.main.eq(r)){let a=!1,u="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(a=!0),u=i.inputState.lastSelectionOrigin),i.dispatch({selection:n,scrollIntoView:a,userEvent:u}),!0}else return!1}function Gd(i,e,t,n=-1){if(ce.ios&&i.inputState.flushIOSKey(e))return!0;let r=i.state.selection.main;if(ce.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&i.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ks(i.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Ks(i.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Ks(i.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let a,u=()=>a||(a=_b(i,e,t));return i.state.facet(s1).some(h=>h(i,e.from,e.to,o,u))||i.dispatch(u()),!0}function _b(i,e,t){let n,r=i.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let u=o.from<e.from?r.sliceDoc(o.from,e.from):"",h=o.to>e.to?r.sliceDoc(e.to,o.to):"";n=r.replaceSelection(i.state.toText(u+e.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let u=r.changes(e),h=t&&t.main.to<=u.newLength?t.main:void 0;if(r.selection.ranges.length>1&&i.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let p=i.state.sliceDoc(e.from,e.to),d,g=t&&m1(i,t.main.head);if(g){let S=e.insert.length-(e.to-e.from);d={from:g.from,to:g.to-S}}else d=i.state.doc.lineAt(o.head);let v=o.to-e.to,w=o.to-o.from;n=r.changeByRange(S=>{if(S.from==o.from&&S.to==o.to)return{changes:u,range:h||S.map(u)};let k=S.to-v,b=k-p.length;if(S.to-S.from!=w||i.state.sliceDoc(b,k)!=p||S.to>=d.from&&S.from<=d.to)return{range:S};let A=r.changes({from:b,to:k,insert:e.insert}),N=S.to-o.to;return{changes:A,range:h?K.range(Math.max(0,h.anchor+N),Math.max(0,h.head+N)):S.map(A)}})}else n={changes:u,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,a+=".compose",i.inputState.compositionFirstChange&&(a+=".start",i.inputState.compositionFirstChange=!1)),r.update(n,{userEvent:a,scrollIntoView:!0})}function jb(i,e,t,n){let r=Math.min(i.length,e.length),o=0;for(;o<r&&i.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&i.length==e.length)return null;let a=i.length,u=e.length;for(;a>0&&u>0&&i.charCodeAt(a-1)==e.charCodeAt(u-1);)a--,u--;if(n=="end"){let h=Math.max(0,o-Math.min(a,u));t-=a+h-o}if(a<o&&i.length<e.length){let h=t<=o&&t>=a?o-t:0;o-=h,u=o+(u-a),a=o}else if(u<o){let h=t<=o&&t>=u?o-t:0;o-=h,a=o+(a-u),u=o}return{from:o,toA:a,toB:u}}function Hb(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:o}=i.observer.selectionRange;return t&&(e.push(new M0(t,n)),(r!=t||o!=n)&&e.push(new M0(r,o))),e}function Vb(i,e){if(i.length==0)return null;let t=i[0].pos,n=i.length==2?i[1].pos:t;return t>-1&&n>-1?K.single(t+e,n+e):null}class Wb{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ce.safari&&e.contentDOM.addEventListener("input",()=>null),ce.gecko&&sC(e.contentDOM.ownerDocument)}handleEvent(e){!Xb(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let r of n.observers)r(this.view,t);for(let r of n.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Ub(e),n=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let a=!t[o].handlers.length,u=n[o];u&&a!=!u.handlers.length&&(r.removeEventListener(o,this.handleEvent),u=null),u||r.addEventListener(o,this.handleEvent,{passive:a})}for(let o in n)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&w1.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ce.android&&ce.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ce.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=v1.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||$b.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ks(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ce.safari&&!ce.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function E0(i,e){return(t,n)=>{try{return e.call(i,n,t)}catch(r){hn(t.state,r)}}}function Ub(i){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of i){let r=n.spec;if(r&&r.domEventHandlers)for(let o in r.domEventHandlers){let a=r.domEventHandlers[o];a&&t(o).handlers.push(E0(n.value,a))}if(r&&r.domEventObservers)for(let o in r.domEventObservers){let a=r.domEventObservers[o];a&&t(o).observers.push(E0(n.value,a))}}for(let n in qn)t(n).handlers.push(qn[n]);for(let n in Nn)t(n).observers.push(Nn[n]);return e}const v1=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],$b="dthko",w1=[16,17,18,20,91,92,224,225],lu=6;function au(i){return Math.max(0,i)*.7+8}function Kb(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}class qb{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=eb(e.contentDOM),this.atoms=e.state.facet(Kd).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(_e.allowMultipleSelections)&&Gb(e,t),this.dragging=Qb(e,t)&&k1(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Kb(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,r=0,o=0,a=this.view.win.innerWidth,u=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:u}=this.scrollParents.y.getBoundingClientRect());let h=qd(this.view);e.clientX-h.left<=r+lu?t=-au(r-e.clientX):e.clientX+h.right>=a-lu&&(t=au(e.clientX-a)),e.clientY-h.top<=o+lu?n=-au(o-e.clientY):e.clientY+h.bottom>=u-lu&&(n=au(e.clientY-u)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],o=null;if(r.empty){let a=Tu(this.atoms,r.from,0);a!=r.from&&(o=K.cursor(a,-1))}else{let a=Tu(this.atoms,r.from,-1),u=Tu(this.atoms,r.to,1);(a!=r.from||u!=r.to)&&(o=K.range(r.from==r.anchor?a:u,r.from==r.head?a:u))}o&&(t||(t=e.ranges.slice()),t[n]=o)}return t?K.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Gb(i,e){let t=i.state.facet(t1);return t.length?t[0](e):ce.mac?e.metaKey:e.ctrlKey}function Yb(i,e){let t=i.state.facet(n1);return t.length?t[0](e):ce.mac?!e.altKey:!e.ctrlKey}function Qb(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let n=bl(i.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let a=r[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function Xb(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=Qe.get(t))&&n.ignoreEvent(e))return!1;return!0}const qn=Object.create(null),Nn=Object.create(null),x1=ce.ie&&ce.ie_version<15||ce.ios&&ce.webkit_version<604;function Jb(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),S1(i,t.value)},50)}function ac(i,e,t){for(let n of i.facet(e))t=n(t,i);return t}function S1(i,e){e=ac(i.state,Wd,e);let{state:t}=i,n,r=1,o=t.toText(e),a=o.lines==t.selection.ranges.length;if(cd!=null&&t.selection.ranges.every(h=>h.empty)&&cd==o.toString()){let h=-1;n=t.changeByRange(p=>{let d=t.doc.lineAt(p.from);if(d.from==h)return{range:p};h=d.from;let g=t.toText((a?o.line(r++).text:e)+t.lineBreak);return{changes:{from:d.from,insert:g},range:K.cursor(p.from+g.length)}})}else a?n=t.changeByRange(h=>{let p=o.line(r++);return{changes:{from:h.from,to:h.to,insert:p.text},range:K.cursor(h.from+p.length)}}):n=t.replaceSelection(o);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Nn.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};qn.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&i.inputState.tabFocusMode!=0&&(i.inputState.tabFocusMode=Date.now()+2e3),!1);Nn.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};Nn.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};qn.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of i.state.facet(i1))if(t=n(i,e),t)break;if(!t&&e.button==0&&(t=tC(i,e)),t){let n=!i.hasFocus;i.inputState.startMouseSelection(new qb(i,e,t,n)),n&&i.observer.ignore(()=>{Iv(i.contentDOM);let o=i.root.activeElement;o&&!o.contains(i.contentDOM)&&o.blur()});let r=i.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function A0(i,e,t,n){if(n==1)return K.cursor(e,t);if(n==2)return Db(i.state,e,t);{let r=wt.find(i.docView,e),o=i.state.doc.lineAt(r?r.posAtEnd:e),a=r?r.posAtStart:o.from,u=r?r.posAtEnd:o.to;return u<i.state.doc.length&&u==o.to&&u++,K.range(a,u)}}let D0=(i,e,t)=>e>=t.top&&e<=t.bottom&&i>=t.left&&i<=t.right;function Zb(i,e,t,n){let r=wt.find(i.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let a=r.coordsAt(o,-1);if(a&&D0(t,n,a))return-1;let u=r.coordsAt(o,1);return u&&D0(t,n,u)?1:a&&a.bottom>=n?-1:1}function T0(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Zb(i,t,e.clientX,e.clientY)}}const eC=ce.ie&&ce.ie_version<=11;let P0=null,R0=0,O0=0;function k1(i){if(!eC)return i.detail;let e=P0,t=O0;return P0=i,O0=Date.now(),R0=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(R0+1)%3:1}function tC(i,e){let t=T0(i,e),n=k1(e),r=i.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,a,u){let h=T0(i,o),p,d=A0(i,h.pos,h.bias,n);if(t.pos!=h.pos&&!a){let g=A0(i,t.pos,t.bias,n),v=Math.min(g.from,d.from),w=Math.max(g.to,d.to);d=v<d.from?K.range(v,w):K.range(w,v)}return a?r.replaceRange(r.main.extend(d.from,d.to)):u&&n==1&&r.ranges.length>1&&(p=nC(r,h.pos))?p:u?r.addRange(d):K.create([d])}}}function nC(i,e){for(let t=0;t<i.ranges.length;t++){let{from:n,to:r}=i.ranges[t];if(n<=e&&r>=e)return K.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}qn.dragstart=(i,e)=>{let{selection:{main:t}}=i.state;if(e.target.draggable){let r=i.docView.nearest(e.target);if(r&&r.isWidget){let o=r.posAtStart,a=o+r.length;(o>=t.to||a<=t.from)&&(t=K.range(o,a))}}let{inputState:n}=i;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",ac(i.state,Ud,i.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};qn.dragend=i=>(i.inputState.draggedContent=null,!1);function L0(i,e,t,n){if(t=ac(i.state,Wd,t),!t)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=i.inputState,a=n&&o&&Yb(i,e)?{from:o.from,to:o.to}:null,u={from:r,insert:t},h=i.state.changes(a?[a,u]:u);i.focus(),i.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"}),i.inputState.draggedContent=null}qn.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),r=0,o=()=>{++r==t.length&&L0(i,e,n.filter(a=>a!=null).join(i.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let u=new FileReader;u.onerror=o,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(n[a]=u.result),o()},u.readAsText(t[a])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return L0(i,e,n,!0),!0}return!1};qn.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let t=x1?null:e.clipboardData;return t?(S1(i,t.getData("text/plain")||t.getData("text/uri-list")),!0):(Jb(i),!1)};function iC(i,e){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function rC(i){let e=[],t=[],n=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of i.selection.ranges){let a=i.doc.lineAt(o);a.number>r&&(e.push(a.text),t.push({from:a.from,to:Math.min(i.doc.length,a.to+1)})),r=a.number}n=!0}return{text:ac(i,Ud,e.join(i.lineBreak)),ranges:t,linewise:n}}let cd=null;qn.copy=qn.cut=(i,e)=>{let{text:t,ranges:n,linewise:r}=rC(i.state);if(!t&&!r)return!1;cd=r?t:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let o=x1?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(iC(i,t),!1)};const b1=pi.define();function C1(i,e){let t=[];for(let n of i.facet(o1)){let r=n(i,e);r&&t.push(r)}return t.length?i.update({effects:t,annotations:b1.of(!0)}):null}function M1(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=C1(i.state,e);t?i.dispatch(t):i.update([])}},10)}Nn.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),M1(i)};Nn.blur=i=>{i.observer.clearSelectionRange(),M1(i)};Nn.compositionstart=Nn.compositionupdate=i=>{i.observer.editContext||(i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0))};Nn.compositionend=i=>{i.observer.editContext||(i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,ce.chrome&&ce.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50))};Nn.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};qn.beforeinput=(i,e)=>{var t,n;if(e.inputType=="insertReplacementText"&&i.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(o&&a.length){let u=a[0],h=i.posAtDOM(u.startContainer,u.startOffset),p=i.posAtDOM(u.endContainer,u.endOffset);return Gd(i,{from:h,to:p,insert:i.state.toText(o)},null),!0}}let r;if(ce.chrome&&ce.android&&(r=v1.find(o=>o.inputType==e.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return ce.ios&&e.inputType=="deleteContentForward"&&i.observer.flushSoon(),ce.safari&&e.inputType=="insertText"&&i.inputState.composing>=0&&setTimeout(()=>Nn.compositionend(i,e),20),!1};const N0=new Set;function sC(i){N0.has(i)||(N0.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}const B0=["pre-wrap","normal","pre-line","break-spaces"];let to=!1;function I0(){to=!1}class oC{constructor(e){this.lineWrapping=e,this.doc=$e.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return B0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,n,r,o,a){let u=B0.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=o,h){this.heightSamples={};for(let p=0;p<a.length;p++){let d=a[p];d<0?p++:this.heightSamples[Math.floor(d*10)]=!0}}return h}}class lC{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ai{constructor(e,t,n,r,o){this.from=e,this.length=t,this.top=n,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Jt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof xr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ai(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var nt=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(nt||(nt={}));const Pu=.001;class Zt{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Pu&&(to=!0),this.height=e)}replace(e,t,n){return Zt.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let o=this,a=n.doc;for(let u=r.length-1;u>=0;u--){let{fromA:h,toA:p,fromB:d,toB:g}=r[u],v=o.lineAt(h,nt.ByPosNoHeight,n.setDoc(t),0,0),w=v.to>=p?v:o.lineAt(p,nt.ByPosNoHeight,n,0,0);for(g+=w.to-p,p=w.to;u>0&&v.from<=r[u-1].toA;)h=r[u-1].fromA,d=r[u-1].fromB,u--,h<v.from&&(v=o.lineAt(h,nt.ByPosNoHeight,n,0,0));d+=v.from-h,h=v.from;let S=Yd.build(n.setDoc(a),e,d,g);o=Hu(o,o.replace(h,p,S))}return o.updateHeight(n,0)}static empty(){return new wn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,r=0,o=0;for(;;)if(t==n)if(r>o*2){let u=e[t-1];u.break?e.splice(--t,1,u.left,null,u.right):e.splice(--t,1,u.left,u.right),n+=1+u.break,r-=u.size}else if(o>r*2){let u=e[n];u.break?e.splice(n,1,u.left,null,u.right):e.splice(n,1,u.left,u.right),n+=2+u.break,o-=u.size}else break;else if(r<o){let u=e[t++];u&&(r+=u.size)}else{let u=e[--n];u&&(o+=u.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,n++),new aC(Zt.of(e.slice(0,t)),a,Zt.of(e.slice(n)))}}function Hu(i,e){return i==e?i:(i.constructor!=e.constructor&&(to=!0),e)}Zt.prototype.size=1;class E1 extends Zt{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new ai(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,o){return this.blockAt(0,n,r,o)}forEachLine(e,t,n,r,o,a){e<=o+this.length&&t>=o&&a(this.blockAt(0,n,r,o))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class wn extends E1{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new ai(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return n.length==1&&(r instanceof wn||r instanceof Ot&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ot?r=new wn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Zt.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ot extends Zt{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-n+1,a,u=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*o);a=h/o,this.length>o+1&&(u=(this.height-h)/(this.length-o-1))}else a=this.height/o;return{firstLine:n,lastLine:r,perLine:a,perChar:u}}blockAt(e,t,n,r){let{firstLine:o,lastLine:a,perLine:u,perChar:h}=this.heightMetrics(t,r);if(t.lineWrapping){let p=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),d=t.doc.lineAt(p),g=u+d.length*h,v=Math.max(n,e-g/2);return new ai(d.from,d.length,v,g,0)}else{let p=Math.max(0,Math.min(a-o,Math.floor((e-n)/u))),{from:d,length:g}=t.doc.line(o+p);return new ai(d,g,n+u*p,u,0)}}lineAt(e,t,n,r,o){if(t==nt.ByHeight)return this.blockAt(e,n,r,o);if(t==nt.ByPosNoHeight){let{from:w,to:S}=n.doc.lineAt(e);return new ai(w,S-w,0,0,0)}let{firstLine:a,perLine:u,perChar:h}=this.heightMetrics(n,o),p=n.doc.lineAt(e),d=u+p.length*h,g=p.number-a,v=r+u*g+h*(p.from-o-g);return new ai(p.from,p.length,Math.max(r,Math.min(v,r+this.height-d)),d,0)}forEachLine(e,t,n,r,o,a){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:u,perLine:h,perChar:p}=this.heightMetrics(n,o);for(let d=e,g=r;d<=t;){let v=n.doc.lineAt(d);if(d==e){let S=v.number-u;g+=h*S+p*(e-o-S)}let w=h+p*v.length;a(new ai(v.from,v.length,g,w,0)),g+=w,d=v.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let o=n[n.length-1];o instanceof Ot?n[n.length-1]=new Ot(o.length+r):n.push(null,new Ot(r-1))}if(e>0){let o=n[0];o instanceof Ot?n[0]=new Ot(e+o.length):n.unshift(new Ot(e-1),null)}return Zt.of(n)}decomposeLeft(e,t){t.push(new Ot(e-1),null)}decomposeRight(e,t){t.push(null,new Ot(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let a=[],u=Math.max(t,r.from),h=-1;for(r.from>t&&a.push(new Ot(r.from-t-1).updateHeight(e,t));u<=o&&r.more;){let d=e.doc.lineAt(u).length;a.length&&a.push(null);let g=r.heights[r.index++];h==-1?h=g:Math.abs(g-h)>=Pu&&(h=-2);let v=new wn(d,g);v.outdated=!1,a.push(v),u+=d+1}u<=o&&a.push(null,new Ot(o-u).updateHeight(e,u));let p=Zt.of(a);return(h<0||Math.abs(p.height-this.height)>=Pu||Math.abs(h-this.heightMetrics(e,t).perLine)>=Pu)&&(to=!0),Hu(this,p)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class aC extends Zt{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,r){let o=n+this.left.height;return e<o?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,n,r,o){let a=r+this.left.height,u=o+this.left.length+this.break,h=t==nt.ByHeight?e<a:e<u,p=h?this.left.lineAt(e,t,n,r,o):this.right.lineAt(e,t,n,a,u);if(this.break||(h?p.to<u:p.from>u))return p;let d=t==nt.ByPosNoHeight?nt.ByPosNoHeight:nt.ByPos;return h?p.join(this.right.lineAt(u,d,n,a,u)):this.left.lineAt(u,d,n,r,o).join(p)}forEachLine(e,t,n,r,o,a){let u=r+this.left.height,h=o+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,n,r,o,a),t>=h&&this.right.forEachLine(e,t,n,u,h,a);else{let p=this.lineAt(h,nt.ByPos,n,r,o);e<p.from&&this.left.forEachLine(e,p.from-1,n,r,o,a),p.to>=e&&p.from<=t&&a(p),t>p.to&&this.right.forEachLine(p.to+1,t,n,u,h,a)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let u of n)o.push(u);if(e>0&&F0(o,a-1),t<this.length){let u=o.length;this.decomposeRight(t,o),F0(o,u)}return Zt.of(o)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Zt.of(this.break?[e,null,t]:[e,t]):(this.left=Hu(this.left,e),this.right=Hu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:o,right:a}=this,u=t+o.length+this.break,h=null;return r&&r.from<=t+o.length&&r.more?h=o=o.updateHeight(e,t,n,r):o.updateHeight(e,t,n),r&&r.from<=u+a.length&&r.more?h=a=a.updateHeight(e,u,n,r):a.updateHeight(e,u,n),h?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function F0(i,e){let t,n;i[e]==null&&(t=i[e-1])instanceof Ot&&(n=i[e+1])instanceof Ot&&i.splice(e-1,3,new Ot(t.length+1+n.length))}const uC=5;class Yd{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof wn?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new wn(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,o=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let a=t-e;n.block?this.addBlock(new E1(a,r,n)):(a||o||r>=uC)&&this.addLineDeco(r,o,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new wn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Ot(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof wn)return e;let t=new wn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof wn)&&!this.isCovered?this.nodes.push(new wn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let r of this.nodes)r instanceof wn&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let o=new Yd(n,e);return Ue.spans(t,n,r,o,0),o.finish(n)}}function cC(i,e,t){let n=new hC;return Ue.compare(i,e,t,n,0),n.changes}class hC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Du(e,t,this.changes,5)}}function fC(i,e){let t=i.getBoundingClientRect(),n=i.ownerDocument,r=n.defaultView||window,o=Math.max(0,t.left),a=Math.min(r.innerWidth,t.right),u=Math.max(0,t.top),h=Math.min(r.innerHeight,t.bottom);for(let p=i.parentNode;p&&p!=n.body;)if(p.nodeType==1){let d=p,g=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&g.overflow!="visible"){let v=d.getBoundingClientRect();o=Math.max(o,v.left),a=Math.min(a,v.right),u=Math.max(u,v.top),h=Math.min(p==i.parentNode?r.innerHeight:h,v.bottom)}p=g.position=="absolute"||g.position=="fixed"?d.offsetParent:d.parentNode}else if(p.nodeType==11)p=p.host;else break;return{left:o-t.left,right:Math.max(o,a)-t.left,top:u-(t.top+e),bottom:Math.max(u,h)-(t.top+e)}}function dC(i){let e=i.getBoundingClientRect(),t=i.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function pC(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class pf{constructor(e,t,n,r){this.from=e,this.to=t,this.size=n,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return ke.replace({widget:new mC(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class mC extends Fi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class z0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=_0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=it.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet($d).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new oC(t),this.stateDeco=e.facet(Cl).filter(n=>typeof n!="function"),this.heightMap=Zt.empty().applyChanges(this.stateDeco,$e.empty,this.heightOracle.setDoc(e.doc),[new On(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ke.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:o,to:a})=>r>=o&&r<=a)){let{from:o,to:a}=this.lineBlockAt(r);e.push(new uu(o,a))}}return this.viewports=e.sort((n,r)=>n.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?_0:new Qd(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(cl(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Cl).filter(d=>typeof d!="function");let r=e.changedRanges,o=On.extendWithRanges(r,cC(n,this.stateDeco,e?e.changes:bt.empty(this.state.doc.length))),a=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);I0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||to)&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let h=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let p=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(p||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(a1)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?it.RTL:it.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),u=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let p=0,d=0;if(u.width&&u.height){let{scaleX:j,scaleY:F}=Bv(t,u);(j>.005&&Math.abs(this.scaleX-j)>.005||F>.005&&Math.abs(this.scaleY-F)>.005)&&(this.scaleX=j,this.scaleY=F,p|=16,a=h=!0)}let g=(parseInt(n.paddingTop)||0)*this.scaleY,v=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=v)&&(this.paddingTop=g,this.paddingBottom=v,p|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=16);let w=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=w&&(this.scrollAnchorHeight=-1,this.scrollTop=w),this.scrolledToBottom=zv(e.scrollDOM);let S=(this.printing?pC:fC)(t,this.paddingTop),k=S.top-this.pixelViewport.top,b=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let A=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(A!=this.inView&&(this.inView=A,A&&(h=!0)),!this.inView&&!this.scrollTarget&&!dC(e.dom))return 0;let N=u.width;if((this.contentDOMWidth!=N||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,p|=16),h){let j=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(j)&&(a=!0),a||r.lineWrapping&&Math.abs(N-this.contentDOMWidth)>r.charWidth){let{lineHeight:F,charWidth:$,textHeight:M}=e.docView.measureTextSize();a=F>0&&r.refresh(o,F,$,M,N/$,j),a&&(e.docView.minWidth=0,p|=16)}k>0&&b>0?d=Math.max(k,b):k<0&&b<0&&(d=Math.min(k,b)),I0();for(let F of this.viewports){let $=F.from==this.viewport.from?j:e.docView.measureVisibleLineHeights(F);this.heightMap=(a?Zt.empty().applyChanges(this.stateDeco,$e.empty,this.heightOracle,[new On(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,a,new lC(F.from,$))}to&&(p|=2)}let z=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return z&&(p&2&&(p|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),p|=this.updateForViewport()),(p&2||z)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:u}=this,h=new uu(r.lineAt(a-n*1e3,nt.ByHeight,o,0,0).from,r.lineAt(u+(1-n)*1e3,nt.ByHeight,o,0,0).to);if(t){let{head:p}=t.range;if(p<h.from||p>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=r.lineAt(p,nt.ByPos,o,0,0),v;t.y=="center"?v=(g.top+g.bottom)/2-d/2:t.y=="start"||t.y=="nearest"&&p<h.from?v=g.top:v=g.bottom-d,h=new uu(r.lineAt(v-1e3/2,nt.ByHeight,o,0,0).from,r.lineAt(v+d+1e3/2,nt.ByHeight,o,0,0).to)}}return h}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new uu(this.heightMap.lineAt(n,nt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,nt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,nt.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,nt.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:u}=this;return(e==0||r<=a-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||o>=u+Math.max(10,Math.min(n,250)))&&r>a-2*1e3&&o<u+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new pf(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,o=r>>1,a=r<<1;if(this.defaultTextDirection!=it.LTR&&!n)return[];let u=[],h=(d,g,v,w)=>{if(g-d<o)return;let S=this.state.selection.main,k=[S.from];S.empty||k.push(S.to);for(let A of k)if(A>d&&A<g){h(d,A-10,v,w),h(A+10,g,v,w);return}let b=yC(e,A=>A.from>=v.from&&A.to<=v.to&&Math.abs(A.from-d)<o&&Math.abs(A.to-g)<o&&!k.some(N=>A.from<N&&A.to>N));if(!b){if(g<v.to&&t&&n&&t.visibleRanges.some(z=>z.from<=g&&z.to>=g)){let z=t.moveToLineBoundary(K.cursor(g),!1,!0).head;z>d&&(g=z)}let A=this.gapSize(v,d,g,w),N=n||A<2e6?A:2e6;b=new pf(d,g,A,N)}u.push(b)},p=d=>{if(d.length<a||d.type!=Jt.Text)return;let g=gC(d.from,d.to,this.stateDeco);if(g.total<a)return;let v=this.scrollTarget?this.scrollTarget.range.head:null,w,S;if(n){let k=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,A;if(v!=null){let N=hu(g,v),z=((this.visibleBottom-this.visibleTop)/2+k)/d.height;b=N-z,A=N+z}else b=(this.visibleTop-d.top-k)/d.height,A=(this.visibleBottom-d.top+k)/d.height;w=cu(g,b),S=cu(g,A)}else{let k=g.total*this.heightOracle.charWidth,b=r*this.heightOracle.charWidth,A=0;if(k>2e6)for(let $ of e)$.from>=d.from&&$.from<d.to&&$.size!=$.displaySize&&$.from*this.heightOracle.charWidth+A<this.pixelViewport.left&&(A=$.size-$.displaySize);let N=this.pixelViewport.left+A,z=this.pixelViewport.right+A,j,F;if(v!=null){let $=hu(g,v),M=((z-N)/2+b)/k;j=$-M,F=$+M}else j=(N-b)/k,F=(z+b)/k;w=cu(g,j),S=cu(g,F)}w>d.from&&h(d.from,w,d,g),S<d.to&&h(S,d.to,d,g)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(p):p(d);return u}gapSize(e,t,n,r){let o=hu(r,n)-hu(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){pf.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ke.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Ue.spans(t,this.viewport.from,this.viewport.to,{span(o,a){n.push({from:o,to:a})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let o=0;o<n.length&&!(r&8);o++){let a=this.visibleRanges[o],u=n[o];(a.from!=u.from||a.to!=u.to)&&(r|=4,e&&e.mapPos(a.from,-1)==u.from&&e.mapPos(a.to,1)==u.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||cl(this.heightMap.lineAt(e,nt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||cl(this.heightMap.lineAt(this.scaler.fromDOM(e),nt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return cl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class uu{constructor(e,t){this.from=e,this.to=t}}function gC(i,e,t){let n=[],r=i,o=0;return Ue.spans(t,i,e,{span(){},point(a,u){a>r&&(n.push({from:r,to:a}),o+=a-r),r=u}},20),r<e&&(n.push({from:r,to:e}),o+=e-r),{total:o,ranges:n}}function cu({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(i*t);for(let r=0;;r++){let{from:o,to:a}=e[r],u=a-o;if(n<=u)return o+n;n-=u}}function hu(i,e){let t=0;for(let{from:n,to:r}of i.ranges){if(e<=r){t+=e-n;break}t+=r-n}return t/i.total}function yC(i,e){for(let t of i)if(e(t))return t}const _0={toDOM(i){return i},fromDOM(i){return i},scale:1,eq(i){return i==this}};class Qd{constructor(e,t,n){let r=0,o=0,a=0;this.viewports=n.map(({from:u,to:h})=>{let p=t.lineAt(u,nt.ByPos,e,0,0).top,d=t.lineAt(h,nt.ByPos,e,0,0).bottom;return r+=d-p,{from:u,to:h,top:p,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let u of this.viewports)u.domTop=a+(u.top-o)*this.scale,a=u.domBottom=u.domTop+(u.bottom-u.top),o=u.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-n)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);n=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return n+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);n=o.bottom,r=o.domBottom}}eq(e){return e instanceof Qd?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function cl(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),n=e.toDOM(i.bottom);return new ai(i.from,i.length,t,n-t,Array.isArray(i._content)?i._content.map(r=>cl(r,e)):i._content)}const fu=he.define({combine:i=>i.join(" ")}),hd=he.define({combine:i=>i.indexOf(!0)>-1}),fd=vr.newName(),A1=vr.newName(),D1=vr.newName(),T1={"&light":"."+A1,"&dark":"."+D1};function dd(i,e,t){return new vr(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return i;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):i+" "+n}})}const vC=dd("."+fd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},T1),wC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},mf=ce.ie&&ce.ie_version<=11;class xC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new tb,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(ce.ie&&ce.ie_version<=11||ce.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(ce.chrome&&ce.chrome_version<126)&&(this.editContext=new kC(e),e.state.facet(Ri)&&(e.contentDOM.editContext=this.editContext.editContext)),mf&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Ri)?n.root.activeElement!=this.dom:!Au(this.dom,r))return;let o=r.anchorNode&&n.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ce.ie&&ce.ie_version<=11||ce.android&&ce.chrome)&&!n.state.selection.main.empty&&r.focusNode&&ml(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=bl(e.root);if(!t)return!1;let n=ce.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&SC(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let r=Au(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&ib(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,wC),mf&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),mf&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Ks(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(r=!0),t==-1?{from:t,to:n}=a:(t=Math.min(a.from,t),n=Math.max(a.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Au(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new zb(this.view,e,t,n);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=y1(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=j0(t,e.previousSibling||e.target.previousSibling,-1),r=j0(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ri)!=e.state.facet(Ri)&&(e.view.contentDOM.editContext=e.state.facet(Ri)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function j0(i,e,t){for(;e;){let n=Qe.get(e);if(n&&n.parent==i)return n;let r=e.parentNode;e=r!=i.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function H0(i,e){let t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset,a=i.docView.domAtPos(i.state.selection.main.anchor);return ml(a.node,a.offset,r,o)&&([t,n,r,o]=[r,o,t,n]),{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:o}}function SC(i,e){if(e.getComposedRanges){let r=e.getComposedRanges(i.root)[0];if(r)return H0(i,r)}let t=null;function n(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return i.contentDOM.addEventListener("beforeinput",n,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",n,!0),t?H0(i,t):null}class kC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let r=e.state.selection.main,{anchor:o,head:a}=r,u=this.toEditorPos(n.updateRangeStart),h=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:u,drifted:!1});let p={from:u,to:h,insert:$e.of(n.text.split(`
`))};if(p.from==this.from&&o<this.from?p.from=o:p.to==this.to&&o>this.to&&(p.to=o),p.from==p.to&&!p.insert.length){let d=K.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));d.main.eq(r)||e.dispatch({selection:d,userEvent:"select"});return}if((ce.mac||ce.android)&&p.from==a-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(p={from:u,to:h,insert:$e.of([n.text.replace("."," ")])}),this.pendingContextChange=p,!e.state.readOnly){let d=this.to-this.from+(p.to-p.from+p.insert.length);Gd(e,p,K.single(this.toEditorPos(n.selectionStart,d),this.toEditorPos(n.selectionEnd,d)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let r=[],o=null;for(let a=this.toEditorPos(n.rangeStart),u=this.toEditorPos(n.rangeEnd);a<u;a++){let h=e.coordsForChar(a);o=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=n=>{let r=[];for(let o of n.getTextFormats()){let a=o.underlineStyle,u=o.underlineThickness;if(a!="None"&&u!="None"){let h=this.toEditorPos(o.rangeStart),p=this.toEditorPos(o.rangeEnd);if(h<p){let d=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${u=="Thin"?1:2}px`;r.push(ke.mark({attributes:{style:d}}).range(h,p))}}}e.dispatch({effects:c1.of(ke.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let r=bl(n.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,a,u,h,p)=>{if(n)return;let d=p.length-(a-o);if(r&&a>=r.to)if(r.from==o&&r.to==a&&r.insert.eq(p)){r=this.pendingContextChange=null,t+=d,this.to+=d;return}else r=null,this.revertPending(e.state);if(o+=t,a+=t,a<=this.from)this.from+=d,this.to+=d;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+p.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),p.toString()),this.to+=d}t+=d}),r&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(n,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class oe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(r=>r.forEach(o=>n(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||nb(e.parent)||document,this.viewState=new z0(e.state||_e.create(e)),e.scrollTo&&e.scrollTo.is(ou)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ll).map(r=>new hf(r));for(let r of this.plugins)r.update(this);this.observer=new xC(this),this.inputState=new Wb(this),this.inputState.ensureHandlers(this.plugins),this.docView=new w0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ct?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,r,o=this.state;for(let v of e){if(v.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=v.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,u=0,h=null;e.some(v=>v.annotation(b1))?(this.inputState.notifiedFocused=a,u=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=C1(o,a),h||(u=1));let p=this.observer.delayedAndroidKey,d=null;if(p?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(d=null)):this.observer.clear(),o.facet(_e.phrases)!=this.state.facet(_e.phrases))return this.setState(o);r=ju.create(this,o,e),r.flags|=u;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(g&&(g=g.map(v.changes)),v.scrollIntoView){let{main:w}=v.state.selection;g=new qs(w.empty?w:K.cursor(w.head,w.head>w.anchor?-1:1))}for(let w of v.effects)w.is(ou)&&(g=w.value.clip(this.state))}this.viewState.update(r,g),this.bidiCache=Vu.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(al)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(fu)!=r.state.facet(fu)&&(this.viewState.mustMeasureContent=!0),(t||n||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let v of this.state.facet(ld))try{v(r)}catch(w){hn(this.state,w,"update listener")}(h||d)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),d&&!y1(this,d)&&p.force&&Ks(this.contentDOM,p.key,p.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new z0(e),this.plugins=e.facet(ll).map(n=>new hf(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new w0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ll),n=e.state.facet(ll);if(t!=n){let r=[];for(let o of n){let a=t.indexOf(o);if(a<0)r.push(new hf(o));else{let u=this.plugins[a];u.mustUpdate=e,r.push(u)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){hn(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let u=0;;u++){if(a<0)if(zv(n))o=-1,a=this.viewState.heightMap.height;else{let w=this.viewState.scrollAnchorAt(r);o=w.from,a=w.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let d=p.map(w=>{try{return w.read(this)}catch(S){return hn(this.state,S),V0}}),g=ju.create(this,this.state,[]),v=!1;g.flags|=h,t?t.flags|=h:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),v=this.docView.update(g),v&&this.docViewUpdate());for(let w=0;w<p.length;w++)if(d[w]!=V0)try{let S=p[w];S.write&&S.write(d[w],this)}catch(S){hn(this.state,S)}if(v&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let S=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(S>1||S<-1){r=r+S,n.scrollTop=r/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let u of this.state.facet(ld))u(t)}get themeClasses(){return fd+" "+(this.state.facet(hd)?D1:A1)+" "+this.state.facet(fu)}updateAttrs(){let e=W0(this,h1,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ri)?"true":"false",class:"cm-content",style:`${ce.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),W0(this,$d,t);let n=this.observer.ignore(()=>{let r=nd(this.contentDOM,this.contentAttrs,t),o=nd(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let r of n.effects)if(r.is(oe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(al);let e=this.state.facet(oe.cspNonce);vr.mount(this.root,this.styleModules.concat(vC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return df(this,e,C0(this,e,t,n))}moveByGroup(e,t){return df(this,e,C0(this,e,t,n=>Nb(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=n[t?n.length-1:0];return K.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,n=!0){return Lb(this,e,t,n)}moveVertically(e,t,n){return df(this,e,Bb(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),g1(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),a=o[mr.find(o,e-r.from,-1,t)];return Fl(n,a.dir==it.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(l1)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>bC)return Zv(e.length);let t=this.textDirectionAt(e.from),n;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||Jv(o.isolates,n=v0(this,e))))return o.order;n||(n=v0(this,e));let r=yb(e.text,t,n);return this.bidiCache.push(new Vu(e.from,e.to,t,n,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ce.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Iv(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return ou.of(new qs(typeof e=="number"?K.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return ou.of(new qs(K.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return mt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return mt.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=vr.newName(),r=[fu.of(n),al.of(dd(`.${n}`,e))];return t&&t.dark&&r.push(hd.of(!0)),r}static baseTheme(e){return as.lowest(al.of(dd("."+fd,e,T1)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&Qe.get(n)||Qe.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}oe.styleModule=al;oe.inputHandler=s1;oe.clipboardInputFilter=Wd;oe.clipboardOutputFilter=Ud;oe.scrollHandler=u1;oe.focusChangeEffect=o1;oe.perLineTextDirection=l1;oe.exceptionSink=r1;oe.updateListener=ld;oe.editable=Ri;oe.mouseSelectionStyle=i1;oe.dragMovesSelection=n1;oe.clickAddsSelectionRange=t1;oe.decorations=Cl;oe.outerDecorations=f1;oe.atomicRanges=Kd;oe.bidiIsolatedRanges=d1;oe.scrollMargins=p1;oe.darkTheme=hd;oe.cspNonce=he.define({combine:i=>i.length?i[0]:""});oe.contentAttributes=$d;oe.editorAttributes=h1;oe.lineWrapping=oe.contentAttributes.of({class:"cm-lineWrapping"});oe.announce=Ne.define();const bC=4096,V0={};class Vu{constructor(e,t,n,r,o,a){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=o,this.order=a}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:it.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==r&&!t.touchesRange(a.from,a.to)&&n.push(new Vu(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return n}}function W0(i,e,t){for(let n=i.state.facet(e),r=n.length-1;r>=0;r--){let o=n[r],a=typeof o=="function"?o(i):o;a&&td(a,t)}return t}const CC=ce.mac?"mac":ce.windows?"win":ce.linux?"linux":"key";function MC(i,e){const t=i.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let r,o,a,u;for(let h=0;h<t.length-1;++h){const p=t[h];if(/^(cmd|meta|m)$/i.test(p))u=!0;else if(/^a(lt)?$/i.test(p))r=!0;else if(/^(c|ctrl|control)$/i.test(p))o=!0;else if(/^s(hift)?$/i.test(p))a=!0;else if(/^mod$/i.test(p))e=="mac"?u=!0:o=!0;else throw new Error("Unrecognized modifier name: "+p)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),u&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function du(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const EC=as.default(oe.domEventHandlers({keydown(i,e){return R1(P1(e.state),i,e,"editor")}})),uc=he.define({enables:EC}),U0=new WeakMap;function P1(i){let e=i.facet(uc),t=U0.get(e);return t||U0.set(e,t=TC(e.reduce((n,r)=>n.concat(r),[]))),t}function AC(i,e,t){return R1(P1(i.state),e,i,t)}let fr=null;const DC=4e3;function TC(i,e=CC){let t=Object.create(null),n=Object.create(null),r=(a,u)=>{let h=n[a];if(h==null)n[a]=u;else if(h!=u)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,u,h,p,d)=>{var g,v;let w=t[a]||(t[a]=Object.create(null)),S=u.split(/ (?!$)/).map(A=>MC(A,e));for(let A=1;A<S.length;A++){let N=S.slice(0,A).join(" ");r(N,!0),w[N]||(w[N]={preventDefault:!0,stopPropagation:!1,run:[z=>{let j=fr={view:z,prefix:N,scope:a};return setTimeout(()=>{fr==j&&(fr=null)},DC),!0}]})}let k=S.join(" ");r(k,!1);let b=w[k]||(w[k]={preventDefault:!1,stopPropagation:!1,run:((v=(g=w._any)===null||g===void 0?void 0:g.run)===null||v===void 0?void 0:v.slice())||[]});h&&b.run.push(h),p&&(b.preventDefault=!0),d&&(b.stopPropagation=!0)};for(let a of i){let u=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let p of u){let d=t[p]||(t[p]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=a;for(let v in d)d[v].run.push(w=>g(w,pd))}let h=a[e]||a.key;if(h)for(let p of u)o(p,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(p,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return t}let pd=null;function R1(i,e,t,n){pd=e;let r=Xk(e),o=an(r,0),a=li(o)==r.length&&r!=" ",u="",h=!1,p=!1,d=!1;fr&&fr.view==t&&fr.scope==n&&(u=fr.prefix+" ",w1.indexOf(e.keyCode)<0&&(p=!0,fr=null));let g=new Set,v=b=>{if(b){for(let A of b.run)if(!g.has(A)&&(g.add(A),A(t)))return b.stopPropagation&&(d=!0),!0;b.preventDefault&&(b.stopPropagation&&(d=!0),p=!0)}return!1},w=i[n],S,k;return w&&(v(w[u+du(r,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ce.windows&&e.ctrlKey&&e.altKey)&&(S=wr[e.keyCode])&&S!=r?(v(w[u+du(S,e,!0)])||e.shiftKey&&(k=kl[e.keyCode])!=r&&k!=S&&v(w[u+du(k,e,!1)]))&&(h=!0):a&&e.shiftKey&&v(w[u+du(r,e,!0)])&&(h=!0),!h&&v(w._any)&&(h=!0)),p&&(h=!0),h&&d&&e.stopPropagation(),pd=null,h}class jl{constructor(e,t,n,r,o){this.className=e,this.left=t,this.top=n,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let o=O1(e);return[new jl(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return PC(e,t,n)}}function O1(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==it.LTR?e.left:e.right-i.scrollDOM.clientWidth*i.scaleX)-i.scrollDOM.scrollLeft*i.scaleX,top:e.top-i.scrollDOM.scrollTop*i.scaleY}}function $0(i,e,t,n){let r=i.coordsAtPos(e,t*2);if(!r)return n;let o=i.dom.getBoundingClientRect(),a=(r.top+r.bottom)/2,u=i.posAtCoords({x:o.left+1,y:a}),h=i.posAtCoords({x:o.right-1,y:a});return u==null||h==null?n:{from:Math.max(n.from,Math.min(u,h)),to:Math.min(n.to,Math.max(u,h))}}function PC(i,e,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let n=Math.max(t.from,i.viewport.from),r=Math.min(t.to,i.viewport.to),o=i.textDirection==it.LTR,a=i.contentDOM,u=a.getBoundingClientRect(),h=O1(i),p=a.querySelector(".cm-line"),d=p&&window.getComputedStyle(p),g=u.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),v=u.right-(d?parseInt(d.paddingRight):0),w=ud(i,n,1),S=ud(i,r,-1),k=w.type==Jt.Text?w:null,b=S.type==Jt.Text?S:null;if(k&&(i.lineWrapping||w.widgetLineBreaks)&&(k=$0(i,n,1,k)),b&&(i.lineWrapping||S.widgetLineBreaks)&&(b=$0(i,r,-1,b)),k&&b&&k.from==b.from&&k.to==b.to)return N(z(t.from,t.to,k));{let F=k?z(t.from,null,k):j(w,!1),$=b?z(null,t.to,b):j(S,!0),M=[];return(k||w).to<(b||S).from-(k&&b?1:0)||w.widgetLineBreaks>1&&F.bottom+i.defaultLineHeight/2<$.top?M.push(A(g,F.bottom,v,$.top)):F.bottom<$.top&&i.elementAtHeight((F.bottom+$.top)/2).type==Jt.Text&&(F.bottom=$.top=(F.bottom+$.top)/2),N(F).concat(M).concat(N($))}function A(F,$,M,ne){return new jl(e,F-h.left,$-h.top,M-F,ne-$)}function N({top:F,bottom:$,horizontal:M}){let ne=[];for(let Y=0;Y<M.length;Y+=2)ne.push(A(M[Y],F,M[Y+1],$));return ne}function z(F,$,M){let ne=1e9,Y=-1e9,re=[];function se(pe,Se,Te,ve,U){let ee=i.coordsAtPos(pe,pe==M.to?-2:2),Z=i.coordsAtPos(Te,Te==M.from?2:-2);!ee||!Z||(ne=Math.min(ee.top,Z.top,ne),Y=Math.max(ee.bottom,Z.bottom,Y),U==it.LTR?re.push(o&&Se?g:ee.left,o&&ve?v:Z.right):re.push(!o&&ve?g:Z.left,!o&&Se?v:ee.right))}let te=F??M.from,fe=$??M.to;for(let pe of i.visibleRanges)if(pe.to>te&&pe.from<fe)for(let Se=Math.max(pe.from,te),Te=Math.min(pe.to,fe);;){let ve=i.state.doc.lineAt(Se);for(let U of i.bidiSpans(ve)){let ee=U.from+ve.from,Z=U.to+ve.from;if(ee>=Te)break;Z>Se&&se(Math.max(ee,Se),F==null&&ee<=te,Math.min(Z,Te),$==null&&Z>=fe,U.dir)}if(Se=ve.to+1,Se>=Te)break}return re.length==0&&se(te,F==null,fe,$==null,i.textDirection),{top:ne,bottom:Y,horizontal:re}}function j(F,$){let M=u.top+($?F.top:F.bottom);return{top:M,bottom:M,horizontal:[]}}}function RC(i,e){return i.constructor==e.constructor&&i.eq(e)}class OC{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Ru)!=e.state.facet(Ru)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(Ru);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!RC(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ru=he.define();function L1(i){return[mt.define(e=>new OC(e,i)),Ru.of(i)]}const Ml=he.define({combine(i){return mi(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function LC(i={}){return[Ml.of(i),NC,BC,IC,a1.of(!0)]}function N1(i){return i.startState.facet(Ml)!=i.state.facet(Ml)}const NC=L1({above:!0,markers(i){let{state:e}=i,t=e.facet(Ml),n=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=r.empty?r:K.cursor(r.head,r.head>r.anchor?-1:1);for(let h of jl.forRange(i,a,u))n.push(h)}}return n},update(i,e){i.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=N1(i);return t&&K0(i.state,e),i.docChanged||i.selectionSet||t},mount(i,e){K0(e.state,i)},class:"cm-cursorLayer"});function K0(i,e){e.style.animationDuration=i.facet(Ml).cursorBlinkRate+"ms"}const BC=L1({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:jl.forRange(i,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||N1(i)},class:"cm-selectionLayer"}),IC=as.highest(oe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),B1=Ne.define({map(i,e){return i==null?null:e.mapPos(i)}}),hl=It.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((t,n)=>n.is(B1)?n.value:t,i)}}),FC=mt.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let t=i.state.field(hl);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(hl)!=t||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:i}=this,e=i.state.field(hl),t=e!=null&&i.coordsAtPos(e);if(!t)return null;let n=i.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+i.scrollDOM.scrollLeft*i.scaleX,top:t.top-n.top+i.scrollDOM.scrollTop*i.scaleY,height:t.bottom-t.top}}drawCursor(i){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;i?(this.cursor.style.left=i.left/e+"px",this.cursor.style.top=i.top/t+"px",this.cursor.style.height=i.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(hl)!=i&&this.view.dispatch({effects:B1.of(i)})}},{eventObservers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function zC(){return[hl,FC]}function q0(i,e,t,n,r){e.lastIndex=0;for(let o=i.iterRange(t,n),a=t,u;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;u=e.exec(o.value);)r(a+u.index,u)}function _C(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let n=[];for(let{from:r,to:o}of t)r=Math.max(i.state.doc.lineAt(r).from,r-e),o=Math.min(i.state.doc.lineAt(o).to,o+e),n.length&&n[n.length-1].to>=r?n[n.length-1].to=o:n.push({from:r,to:o});return n}class jC{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:o,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(u,h,p,d)=>r(d,p,p+u[0].length,u,h);else if(typeof n=="function")this.addMatch=(u,h,p,d)=>{let g=n(u,h,p);g&&d(p,p+u[0].length,g)};else if(n)this.addMatch=(u,h,p,d)=>d(p,p+u[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let t=new Ni,n=t.add.bind(t);for(let{from:r,to:o}of _C(e,this.maxLength))q0(e.state.doc,this.regexp,r,o,(a,u)=>this.addMatch(u,e,a,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,a,u,h)=>{h>=e.view.viewport.from&&u<=e.view.viewport.to&&(n=Math.min(u,n),r=Math.max(h,r))}),e.viewportMoved||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let o of e.visibleRanges){let a=Math.max(o.from,n),u=Math.min(o.to,r);if(u>a){let h=e.state.doc.lineAt(a),p=h.to<u?e.state.doc.lineAt(u):h,d=Math.max(o.from,h.from),g=Math.min(o.to,p.to);if(this.boundary){for(;a>h.from;a--)if(this.boundary.test(h.text[a-1-h.from])){d=a;break}for(;u<p.to;u++)if(this.boundary.test(p.text[u-p.from])){g=u;break}}let v=[],w,S=(k,b,A)=>v.push(A.range(k,b));if(h==p)for(this.regexp.lastIndex=d-h.from;(w=this.regexp.exec(h.text))&&w.index<g-h.from;)this.addMatch(w,e,w.index+h.from,S);else q0(e.state.doc,this.regexp,d,g,(k,b)=>this.addMatch(b,e,k,S));t=t.update({filterFrom:d,filterTo:g,filter:(k,b)=>k<d||b>g,add:v})}}return t}}const md=/x/.unicode!=null?"gu":"g",HC=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,md),VC={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let gf=null;function WC(){var i;if(gf==null&&typeof document<"u"&&document.body){let e=document.body.style;gf=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return gf||!1}const Ou=he.define({combine(i){let e=mi(i,{render:null,specialChars:HC,addSpecialChars:null});return(e.replaceTabs=!WC())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,md)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,md)),e}});function UC(i={}){return[Ou.of(i),$C()]}let G0=null;function $C(){return G0||(G0=mt.fromClass(class{constructor(i){this.view=i,this.decorations=ke.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Ou)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new jC({regexp:i.specialChars,decoration:(e,t,n)=>{let{doc:r}=t.state,o=an(e[0],0);if(o==9){let a=r.lineAt(n),u=t.state.tabSize,h=so(a.text,u,n-a.from);return ke.replace({widget:new YC((u-h%u)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=ke.replace({widget:new GC(i,o)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(Ou);i.startState.facet(Ou)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const KC="";function qC(i){return i>=32?KC:i==10?"":String.fromCharCode(9216+i)}class GC extends Fi{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=qC(this.code),n=e.state.phrase("Control character")+" "+(VC[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=n,o.setAttribute("aria-label",n),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class YC extends Fi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function QC(){return JC}const XC=ke.line({class:"cm-activeLine"}),JC=mt.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,t=[];for(let n of i.state.selection.ranges){let r=i.lineBlockAt(n.head);r.from>e&&(t.push(XC.range(r.from)),e=r.from)}return ke.set(t)}},{decorations:i=>i.decorations});class ZC extends Fi{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?Js(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=Fl(t[0],n.direction!="rtl"),o=parseInt(n.lineHeight);return r.bottom-r.top>o*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+o}:r}ignoreEvent(){return!1}}function e2(i){let e=mt.fromClass(class{constructor(t){this.view=t,this.placeholder=i?ke.set([ke.widget({widget:new ZC(i),side:1}).range(0)]):ke.none}get decorations(){return this.view.state.doc.length?ke.none:this.placeholder}},{decorations:t=>t.decorations});return typeof i=="string"?[e,oe.contentAttributes.of({"aria-placeholder":i})]:e}const gd=2e3;function t2(i,e,t){let n=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>gd||t.off>gd||e.col<0||t.col<0){let a=Math.min(e.off,t.off),u=Math.max(e.off,t.off);for(let h=n;h<=r;h++){let p=i.doc.line(h);p.length<=u&&o.push(K.range(p.from+a,p.to+u))}}else{let a=Math.min(e.col,t.col),u=Math.max(e.col,t.col);for(let h=n;h<=r;h++){let p=i.doc.line(h),d=Gf(p.text,a,i.tabSize,!0);if(d<0)o.push(K.cursor(p.to));else{let g=Gf(p.text,u,i.tabSize);o.push(K.range(p.from+d,p.from+g))}}}return o}function n2(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function Y0(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),n=i.state.doc.lineAt(t),r=t-n.from,o=r>gd?-1:r==n.length?n2(i,e.clientX):so(n.text,i.state.tabSize,t-n.from);return{line:n.number,col:o,off:r}}function i2(i,e){let t=Y0(i,e),n=i.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),a=r.state.doc.lineAt(o);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},n=n.map(r.changes)}},get(r,o,a){let u=Y0(i,r);if(!u)return n;let h=t2(i.state,t,u);return h.length?a?K.create(h.concat(n.ranges)):K.create(h):n}}:null}function r2(i){let e=t=>t.altKey&&t.button==0;return oe.mouseSelectionStyle.of((t,n)=>e(n)?i2(t,n):null)}const s2={Alt:[18,i=>!!i.altKey],Control:[17,i=>!!i.ctrlKey],Shift:[16,i=>!!i.shiftKey],Meta:[91,i=>!!i.metaKey]},o2={style:"cursor: crosshair"};function l2(i={}){let[e,t]=s2[i.key||"Alt"],n=mt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[n,oe.contentAttributes.of(r=>{var o;return!((o=r.plugin(n))===null||o===void 0)&&o.isDown?o2:null})]}const el="-10000px";class I1{constructor(e,t,n,r){this.facet=t,this.createTooltipView=n,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=n(a,o))}update(e,t){var n;let r=e.state.facet(this.facet),o=r.filter(h=>h);if(r===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let a=[],u=t?[]:null;for(let h=0;h<o.length;h++){let p=o[h],d=-1;if(p){for(let g=0;g<this.tooltips.length;g++){let v=this.tooltips[g];v&&v.create==p.create&&(d=g)}if(d<0)a[h]=this.createTooltipView(p,h?a[h-1]:null),u&&(u[h]=!!p.above);else{let g=a[h]=this.tooltipViews[d];u&&(u[h]=t[d]),g.update&&g.update(e)}}}for(let h of this.tooltipViews)a.indexOf(h)<0&&(this.removeTooltipView(h),(n=h.destroy)===null||n===void 0||n.call(h));return t&&(u.forEach((h,p)=>t[p]=h),t.length=u.length),this.input=r,this.tooltips=o,this.tooltipViews=a,!0}}function a2(i){let e=i.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const yf=he.define({combine:i=>{var e,t,n;return{position:ce.ios?"absolute":((e=i.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=i.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||a2}}}),Q0=new WeakMap,Xd=mt.fromClass(class{constructor(i){this.view=i,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(yf);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new I1(i,Jd,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i,this.above);e&&this.observeIntersection();let t=e||i.geometryChanged,n=i.state.facet(yf);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i,e){let t=i.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=el,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var i,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(i=n.destroy)===null||i===void 0||i.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(ce.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==el&&o.style.left=="0px"){let a=o.getBoundingClientRect();t=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(i=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:i,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),r=qd(this.view);return{visible:{left:n.left+r.left,top:n.top+r.top,right:n.right-r.right,bottom:n.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,a)=>{let u=this.manager.tooltipViews[a];return u.getCoords?u.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(yf).tooltipSpace(this.view),scaleX:i,scaleY:e,makeAbsolute:t}}writeMeasure(i){var e;if(i.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let u of this.manager.tooltipViews)u.dom.style.position="absolute"}let{visible:t,space:n,scaleX:r,scaleY:o}=i,a=[];for(let u=0;u<this.manager.tooltips.length;u++){let h=this.manager.tooltips[u],p=this.manager.tooltipViews[u],{dom:d}=p,g=i.pos[u],v=i.size[u];if(!g||h.clip!==!1&&(g.bottom<=Math.max(t.top,n.top)||g.top>=Math.min(t.bottom,n.bottom)||g.right<Math.max(t.left,n.left)-.1||g.left>Math.min(t.right,n.right)+.1)){d.style.top=el;continue}let w=h.arrow?p.dom.querySelector(".cm-tooltip-arrow"):null,S=w?7:0,k=v.right-v.left,b=(e=Q0.get(p))!==null&&e!==void 0?e:v.bottom-v.top,A=p.offset||c2,N=this.view.textDirection==it.LTR,z=v.width>n.right-n.left?N?n.left:n.right-v.width:N?Math.max(n.left,Math.min(g.left-(w?14:0)+A.x,n.right-k)):Math.min(Math.max(n.left,g.left-k+(w?14:0)-A.x),n.right-k),j=this.above[u];!h.strictSide&&(j?g.top-b-S-A.y<n.top:g.bottom+b+S+A.y>n.bottom)&&j==n.bottom-g.bottom>g.top-n.top&&(j=this.above[u]=!j);let F=(j?g.top-n.top:n.bottom-g.bottom)-S;if(F<b&&p.resize!==!1){if(F<this.view.defaultLineHeight){d.style.top=el;continue}Q0.set(p,b),d.style.height=(b=F)/o+"px"}else d.style.height&&(d.style.height="");let $=j?g.top-b-S-A.y:g.bottom+S+A.y,M=z+k;if(p.overlap!==!0)for(let ne of a)ne.left<M&&ne.right>z&&ne.top<$+b&&ne.bottom>$&&($=j?ne.top-b-2-S:ne.bottom+S+2);if(this.position=="absolute"?(d.style.top=($-i.parent.top)/o+"px",X0(d,(z-i.parent.left)/r)):(d.style.top=$/o+"px",X0(d,z/r)),w){let ne=g.left+(N?A.x:-A.x)-(z+14-7);w.style.left=ne/r+"px"}p.overlap!==!0&&a.push({left:z,top:$,right:M,bottom:$+b}),d.classList.toggle("cm-tooltip-above",j),d.classList.toggle("cm-tooltip-below",!j),p.positioned&&p.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=el}},{eventObservers:{scroll(){this.maybeMeasure()}}});function X0(i,e){let t=parseInt(i.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(i.style.left=e+"px")}const u2=oe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),c2={x:0,y:0},Jd=he.define({enables:[Xd,u2]}),Wu=he.define({combine:i=>i.reduce((e,t)=>e.concat(t),[])});class cc{static create(e){return new cc(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new I1(e,Wu,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let r=n[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const h2=Jd.compute([Wu],i=>{let e=i.facet(Wu);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:cc.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class f2{constructor(e,t,n,r,o){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let r,o=1;if(n instanceof pr)r=n.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let u=e.coordsAtPos(r);if(!u||t.y<u.top||t.y>u.bottom||t.x<u.left-e.defaultCharacterWidth||t.x>u.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(r)).find(d=>d.from<=r&&d.to>=r),p=h&&h.dir==it.RTL?-1:1;o=t.x<u.left?-p:p}let a=this.source(e,r,o);if(a!=null&&a.then){let u=this.pending={pos:r};a.then(h=>{this.pending==u&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>hn(e.state,h,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(Xd),t=e?e.manager.tooltips.findIndex(n=>n.create==cc.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!d2(o.dom,e)||this.pending){let{pos:a}=r[0]||this.pending,u=(n=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:a;(a==u?this.view.posAtCoords(this.lastMove)!=a:!p2(this.view,a,u,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const pu=4;function d2(i,e){let{left:t,right:n,top:r,bottom:o}=i.getBoundingClientRect(),a;if(a=i.querySelector(".cm-tooltip-arrow")){let u=a.getBoundingClientRect();r=Math.min(u.top,r),o=Math.max(u.bottom,o)}return e.clientX>=t-pu&&e.clientX<=n+pu&&e.clientY>=r-pu&&e.clientY<=o+pu}function p2(i,e,t,n,r,o){let a=i.scrollDOM.getBoundingClientRect(),u=i.documentTop+i.documentPadding.top+i.contentHeight;if(a.left>n||a.right<n||a.top>r||Math.min(a.bottom,u)<r)return!1;let h=i.posAtCoords({x:n,y:r},!1);return h>=e&&h<=t}function m2(i,e={}){let t=Ne.define(),n=It.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(a=>!e.hideOn(o,a))),o.docChanged)){let a=[];for(let u of r){let h=o.changes.mapPos(u.pos,-1,Xt.TrackDel);if(h!=null){let p=Object.assign(Object.create(null),u);p.pos=h,p.end!=null&&(p.end=o.changes.mapPos(p.end)),a.push(p)}}r=a}for(let a of o.effects)a.is(t)&&(r=a.value),a.is(g2)&&(r=[]);return r},provide:r=>Wu.from(r)});return{active:n,extension:[n,mt.define(r=>new f2(r,i,n,t,e.hoverTime||300)),h2]}}function F1(i,e){let t=i.plugin(Xd);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const g2=Ne.define(),J0=he.define({combine(i){let e,t;for(let n of i)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function El(i,e){let t=i.plugin(z1),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const z1=mt.fromClass(class{constructor(i){this.input=i.state.facet(Al),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(J0);this.top=new mu(i,!0,e.topContainer),this.bottom=new mu(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(J0);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new mu(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new mu(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(Al);if(t!=this.input){let n=t.filter(h=>h),r=[],o=[],a=[],u=[];for(let h of n){let p=this.specs.indexOf(h),d;p<0?(d=h(i.view),u.push(d)):(d=this.panels[p],d.update&&d.update(i)),r.push(d),(d.top?o:a).push(d)}this.specs=n,this.panels=r,this.top.sync(o),this.bottom.sync(a);for(let h of u)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>oe.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class mu{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Z0(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Z0(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Z0(i){let e=i.nextSibling;return i.remove(),e}const Al=he.define({enables:z1});class Ii extends ts{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ii.prototype.elementClass="";Ii.prototype.toDOM=void 0;Ii.prototype.mapMode=Xt.TrackBefore;Ii.prototype.startSide=Ii.prototype.endSide=-1;Ii.prototype.point=!0;const Lu=he.define(),y2=he.define(),v2={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ue.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},yl=he.define();function w2(i){return[_1(),yl.of(Object.assign(Object.assign({},v2),i))]}const ey=he.define({combine:i=>i.some(e=>e)});function _1(i){return[x2]}const x2=mt.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(yl).map(e=>new ny(i,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!i.state.facet(ey),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(ey)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&this.dom.remove();let t=Ue.iter(this.view.state.facet(Lu),this.view.viewport.from),n=[],r=this.gutters.map(o=>new S2(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(o.type)){let a=!0;for(let u of o.type)if(u.type==Jt.Text&&a){yd(t,n,u.from);for(let h of r)h.line(this.view,u,n);a=!1}else if(u.widget)for(let h of r)h.widget(this.view,u)}else if(o.type==Jt.Text){yd(t,n,o.from);for(let a of r)a.line(this.view,o,n)}else if(o.widget)for(let a of r)a.widget(this.view,o);for(let o of r)o.finish();i&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(i){let e=i.startState.facet(yl),t=i.state.facet(yl),n=i.docChanged||i.heightChanged||i.viewportChanged||!Ue.eq(i.startState.facet(Lu),i.state.facet(Lu),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(i)&&(n=!0);else{n=!0;let r=[];for(let o of t){let a=e.indexOf(o);a<0?r.push(new ny(this.view,o)):(this.gutters[a].update(i),r.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)this.dom.appendChild(o.dom);this.gutters=r}return n}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>oe.scrollMargins.of(e=>{let t=e.plugin(i);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==it.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function ty(i){return Array.isArray(i)?i:[i]}function yd(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class S2{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Ue.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==r.elements.length){let u=new j1(e,a,o,n);r.elements.push(u),r.dom.appendChild(u.dom)}else r.elements[this.i].update(e,a,o,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];yd(this.cursor,r,t.from),n.length&&(r=r.concat(n));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let a=this.gutter;r.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),r=n?[n]:null;for(let o of e.state.facet(y2)){let a=o(e,t.widget,t);a&&(r||(r=[])).push(a)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class ny{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let o=r.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let h=o.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=r.clientY;let u=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[n](e,u,r)&&r.preventDefault()});this.markers=ty(t.markers(e)),t.initialSpacer&&(this.spacer=new j1(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=ty(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let n=e.view.viewport;return!Ue.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class j1{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),k2(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let o=0,a=0;;){let u=a,h=o<t.length?t[o++]:null,p=!1;if(h){let d=h.elementClass;d&&(n+=" "+d);for(let g=a;g<this.markers.length;g++)if(this.markers[g].compare(h)){u=g,p=!0;break}}else u=this.markers.length;for(;a<u;){let d=this.markers[a++];if(d.toDOM){d.destroy(r);let g=r.nextSibling;r.remove(),r=g}}if(!h)break;h.toDOM&&(p?r=r.nextSibling:this.dom.insertBefore(h.toDOM(e),r)),p&&a++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function k2(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const b2=he.define(),C2=he.define(),Vs=he.define({combine(i){return mi(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let o=n[r],a=t[r];n[r]=o?(u,h,p)=>o(u,h,p)||a(u,h,p):a}return n}})}});class vf extends Ii{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function wf(i,e){return i.state.facet(Vs).formatNumber(e,i.state)}const M2=yl.compute([Vs],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(b2)},lineMarker(e,t,n){return n.some(r=>r.toDOM)?null:new vf(wf(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let r of e.state.facet(C2)){let o=r(e,t,n);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Vs)!=e.state.facet(Vs),initialSpacer(e){return new vf(wf(e,iy(e.state.doc.lines)))},updateSpacer(e,t){let n=wf(t.view,iy(t.view.state.doc.lines));return n==e.number?e:new vf(n)},domEventHandlers:i.facet(Vs).domEventHandlers}));function E2(i={}){return[Vs.of(i),_1(),M2]}function iy(i){let e=9;for(;e<i;)e=e*10+9;return e}const A2=new class extends Ii{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},D2=Lu.compute(["selection"],i=>{let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.head).from;r>t&&(t=r,e.push(A2.range(r)))}return Ue.of(e)});function T2(){return D2}const P2=1024;let R2=0;class xf{constructor(e,t){this.from=e,this.to=t}}class je{constructor(e={}){this.id=R2++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Bn.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}je.closedBy=new je({deserialize:i=>i.split(" ")});je.openedBy=new je({deserialize:i=>i.split(" ")});je.group=new je({deserialize:i=>i.split(" ")});je.isolate=new je({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});je.contextHash=new je({perNode:!0});je.lookAhead=new je({perNode:!0});je.mounted=new je({perNode:!0});class Uu{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[je.mounted.id]}}const O2=Object.create(null);class Bn{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):O2,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Bn(e.name||"",t,e.id,n);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(je.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(je.group),o=-1;o<(r?r.length:0);o++){let a=t[o<0?n.name:r[o]];if(a)return a}}}}Bn.none=new Bn("",Object.create(null),0,8);const gu=new WeakMap,ry=new WeakMap;var Nt;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(Nt||(Nt={}));class $t{constructor(e,t,n,r,o){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,u]of o)this.props[typeof a=="number"?a:a.id]=u}}toString(){let e=Uu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new wd(this.topNode,e)}cursorAt(e,t=0,n=0){let r=gu.get(this)||this.topNode,o=new wd(r);return o.moveTo(e,t),gu.set(this,o._tree),o}get topNode(){return new Ln(this,0,0,null)}resolve(e,t=0){let n=Dl(gu.get(this)||this.topNode,e,t,!1);return gu.set(this,n),n}resolveInner(e,t=0){let n=Dl(ry.get(this)||this.topNode,e,t,!0);return ry.set(this,n),n}resolveStack(e,t=0){return B2(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:o=this.length}=e,a=e.mode||0,u=(a&Nt.IncludeAnonymous)>0;for(let h=this.cursor(a|Nt.IncludeAnonymous);;){let p=!1;if(h.from<=o&&h.to>=r&&(!u&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;p=!0}for(;p&&n&&(u||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:tp(Bn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new $t(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new $t(Bn.none,t,n,r)))}static build(e){return I2(e)}}$t.empty=new $t(Bn.none,[],[],0);class Zd{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Zd(this.buffer,this.index)}}class Sr{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Bn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,n==e)return o;let a=[];for(;e<n;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,t,n,r,o){let{buffer:a}=this,u=-1;for(let h=e;h!=t&&!(H1(o,r,a[h+1],a[h+2])&&(u=h,n>0));h=a[h+3]);return u}slice(e,t,n){let r=this.buffer,o=new Uint16Array(t-e),a=0;for(let u=e,h=0;u<t;){o[h++]=r[u++],o[h++]=r[u++]-n;let p=o[h++]=r[u++]-n;o[h++]=r[u++]-e,a=Math.max(a,p)}return new Sr(o,a,this.set)}}function H1(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Dl(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let a=!n&&i instanceof Ln&&i.index<0?null:i.parent;if(!a)return i;i=a}let o=n?0:Nt.IgnoreOverlays;if(n)for(let a=i,u=a.parent;u;a=u,u=a.parent)a instanceof Ln&&a.index<0&&((r=u.enter(e,t,o))===null||r===void 0?void 0:r.from)!=a.from&&(i=u);for(;;){let a=i.enter(e,t,o);if(!a)return i;i=a}}class V1{cursor(e=0){return new wd(this,e)}getChild(e,t=null,n=null){let r=sy(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return sy(this,e,t,n)}resolve(e,t=0){return Dl(this,e,t,!1)}resolveInner(e,t=0){return Dl(this,e,t,!0)}matchContext(e){return vd(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}get node(){return this}get next(){return this.parent}}class Ln extends V1{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,o=0){for(let a=this;;){for(let{children:u,positions:h}=a._tree,p=t>0?u.length:-1;e!=p;e+=t){let d=u[e],g=h[e]+a.from;if(H1(r,n,g,g+d.length)){if(d instanceof Sr){if(o&Nt.ExcludeBuffers)continue;let v=d.findChild(0,d.buffer.length,t,n-g,r);if(v>-1)return new gr(new L2(a,d,e,g),null,v)}else if(o&Nt.IncludeAnonymous||!d.type.isAnonymous||ep(d)){let v;if(!(o&Nt.IgnoreMounts)&&(v=Uu.get(d))&&!v.overlay)return new Ln(v.tree,g,e,a);let w=new Ln(d,g,e,a);return o&Nt.IncludeAnonymous||!w.type.isAnonymous?w:w.nextChild(t<0?d.children.length-1:0,t,n,r)}}}if(o&Nt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&Nt.IgnoreOverlays)&&(r=Uu.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:a,to:u}of r.overlay)if((t>0?a<=o:a<o)&&(t<0?u>=o:u>o))return new Ln(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function sy(i,e,t,n){let r=i.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let a=!1;!a;)if(a=r.type.is(t),!r.nextSibling())return o}for(;;){if(n!=null&&r.type.is(n))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return n==null?o:[]}}function vd(i,e,t=e.length-1){for(let n=i;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class L2{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class gr extends V1{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return o<0?null:new gr(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Nt.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new gr(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new gr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new gr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,o=n.buffer[this.index+3];if(o>r){let a=n.buffer[this.index+1];e.push(n.slice(r,o,a)),t.push(0)}return new $t(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function W1(i){if(!i.length)return null;let e=0,t=i[0];for(let o=1;o<i.length;o++){let a=i[o];(a.from>t.from||a.to<t.to)&&(t=a,e=o)}let n=t instanceof Ln&&t.index<0?null:t.parent,r=i.slice();return n?r[e]=n:r.splice(e,1),new N2(r,t)}class N2{constructor(e,t){this.heads=e,this.node=t}get next(){return W1(this.heads)}}function B2(i,e,t){let n=i.resolveInner(e,t),r=null;for(let o=n instanceof Ln?n:n.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(r||(r=[n])).push(a.resolve(e,t)),o=a}else{let a=Uu.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let u=new Ln(a.tree,a.overlay[0].from+o.from,-1,o);(r||(r=[n])).push(Dl(u,e,t,!1))}}return r?W1(r):n}class wd{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ln)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof Ln?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Nt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Nt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Nt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let o=t+e,a=e<0?-1:n._tree.children.length;o!=a;o+=e){let u=n._tree.children[o];if(this.mode&Nt.IncludeAnonymous||u instanceof Sr||!u.type.isAnonymous||ep(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==r){if(r==this.index)return a;t=a,n=o+1;break e}r=this.stack[--o]}for(let r=n;r<this.stack.length;r++)t=new gr(this.buffer,t,this.stack[r]);return this.bufferNode=new gr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return vd(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return vd(this._tree,e,r);let a=n[t.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[r]&&e[r]!=a.name)return!1;r--}}return!0}}function ep(i){return i.children.some(e=>e instanceof Sr||!e.type.isAnonymous||ep(e))}function I2(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=P2,reused:o=[],minRepeatType:a=n.types.length}=i,u=Array.isArray(t)?new Zd(t,t.length):t,h=n.types,p=0,d=0;function g(F,$,M,ne,Y,re){let{id:se,start:te,end:fe,size:pe}=u,Se=d,Te=p;for(;pe<0;)if(u.next(),pe==-1){let T=o[se];M.push(T),ne.push(te-F);return}else if(pe==-3){p=se;return}else if(pe==-4){d=se;return}else throw new RangeError(`Unrecognized record size: ${pe}`);let ve=h[se],U,ee,Z=te-F;if(fe-te<=r&&(ee=b(u.pos-$,Y))){let T=new Uint16Array(ee.size-ee.skip),_=u.pos-ee.size,ge=T.length;for(;u.pos>_;)ge=A(ee.start,T,ge);U=new Sr(T,fe-ee.start,n),Z=ee.start-F}else{let T=u.pos-pe;u.next();let _=[],ge=[],Me=se>=a?se:-1,De=0,Oe=fe;for(;u.pos>T;)Me>=0&&u.id==Me&&u.size>=0?(u.end<=Oe-r&&(S(_,ge,te,De,u.end,Oe,Me,Se,Te),De=_.length,Oe=u.end),u.next()):re>2500?v(te,T,_,ge):g(te,T,_,ge,Me,re+1);if(Me>=0&&De>0&&De<_.length&&S(_,ge,te,De,te,Oe,Me,Se,Te),_.reverse(),ge.reverse(),Me>-1&&De>0){let Ie=w(ve,Te);U=tp(ve,_,ge,0,_.length,0,fe-te,Ie,Ie)}else U=k(ve,_,ge,fe-te,Se-fe,Te)}M.push(U),ne.push(Z)}function v(F,$,M,ne){let Y=[],re=0,se=-1;for(;u.pos>$;){let{id:te,start:fe,end:pe,size:Se}=u;if(Se>4)u.next();else{if(se>-1&&fe<se)break;se<0&&(se=pe-r),Y.push(te,fe,pe),re++,u.next()}}if(re){let te=new Uint16Array(re*4),fe=Y[Y.length-2];for(let pe=Y.length-3,Se=0;pe>=0;pe-=3)te[Se++]=Y[pe],te[Se++]=Y[pe+1]-fe,te[Se++]=Y[pe+2]-fe,te[Se++]=Se;M.push(new Sr(te,Y[2]-fe,n)),ne.push(fe-F)}}function w(F,$){return(M,ne,Y)=>{let re=0,se=M.length-1,te,fe;if(se>=0&&(te=M[se])instanceof $t){if(!se&&te.type==F&&te.length==Y)return te;(fe=te.prop(je.lookAhead))&&(re=ne[se]+te.length+fe)}return k(F,M,ne,Y,re,$)}}function S(F,$,M,ne,Y,re,se,te,fe){let pe=[],Se=[];for(;F.length>ne;)pe.push(F.pop()),Se.push($.pop()+M-Y);F.push(k(n.types[se],pe,Se,re-Y,te-re,fe)),$.push(Y-M)}function k(F,$,M,ne,Y,re,se){if(re){let te=[je.contextHash,re];se=se?[te].concat(se):[te]}if(Y>25){let te=[je.lookAhead,Y];se=se?[te].concat(se):[te]}return new $t(F,$,M,ne,se)}function b(F,$){let M=u.fork(),ne=0,Y=0,re=0,se=M.end-r,te={size:0,start:0,skip:0};e:for(let fe=M.pos-F;M.pos>fe;){let pe=M.size;if(M.id==$&&pe>=0){te.size=ne,te.start=Y,te.skip=re,re+=4,ne+=4,M.next();continue}let Se=M.pos-pe;if(pe<0||Se<fe||M.start<se)break;let Te=M.id>=a?4:0,ve=M.start;for(M.next();M.pos>Se;){if(M.size<0)if(M.size==-3)Te+=4;else break e;else M.id>=a&&(Te+=4);M.next()}Y=ve,ne+=pe,re+=Te}return($<0||ne==F)&&(te.size=ne,te.start=Y,te.skip=re),te.size>4?te:void 0}function A(F,$,M){let{id:ne,start:Y,end:re,size:se}=u;if(u.next(),se>=0&&ne<a){let te=M;if(se>4){let fe=u.pos-(se-4);for(;u.pos>fe;)M=A(F,$,M)}$[--M]=te,$[--M]=re-F,$[--M]=Y-F,$[--M]=ne}else se==-3?p=ne:se==-4&&(d=ne);return M}let N=[],z=[];for(;u.pos>0;)g(i.start||0,i.bufferStart||0,N,z,-1,0);let j=(e=i.length)!==null&&e!==void 0?e:N.length?z[0]+N[0].length:0;return new $t(h[i.topID],N.reverse(),z.reverse(),j)}const oy=new WeakMap;function Nu(i,e){if(!i.isAnonymous||e instanceof Sr||e.type!=i)return 1;let t=oy.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof $t)){t=1;break}t+=Nu(i,n)}oy.set(e,t)}return t}function tp(i,e,t,n,r,o,a,u,h){let p=0;for(let S=n;S<r;S++)p+=Nu(i,e[S]);let d=Math.ceil(p*1.5/8),g=[],v=[];function w(S,k,b,A,N){for(let z=b;z<A;){let j=z,F=k[z],$=Nu(i,S[z]);for(z++;z<A;z++){let M=Nu(i,S[z]);if($+M>=d)break;$+=M}if(z==j+1){if($>d){let M=S[j];w(M.children,M.positions,0,M.children.length,k[j]+N);continue}g.push(S[j])}else{let M=k[z-1]+S[z-1].length-F;g.push(tp(i,S,k,j,z,F,M,null,h))}v.push(F+N-o)}}return w(e,t,n,r,0),(u||h)(g,v,a)}class Zr{constructor(e,t,n,r,o=!1,a=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new Zr(0,e.length,e,0,!1,n)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],o=1,a=e.length?e[0]:null;for(let u=0,h=0,p=0;;u++){let d=u<t.length?t[u]:null,g=d?d.fromA:1e9;if(g-h>=n)for(;a&&a.from<g;){let v=a;if(h>=v.from||g<=v.to||p){let w=Math.max(v.from,h)-p,S=Math.min(v.to,g)-p;v=w>=S?null:new Zr(w,S,v.tree,v.offset+p,u>0,!!d)}if(v&&r.push(v),a.to>g)break;a=o<e.length?e[o++]:null}if(!d)break;h=d.toA,p=d.toA-d.toB}return r}}class F2{startParse(e,t,n){return typeof e=="string"&&(e=new z2(e)),n=n?n.length?n.map(r=>new xf(r.from,r.to)):[new xf(0,0)]:[new xf(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let o=r.advance();if(o)return o}}}class z2{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new je({perNode:!0});let _2=0;class Dn{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=_2++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof Dn&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let r=new Dn(n,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new $u(e);return n=>n.modified.indexOf(t)>-1?n:$u.get(n.base||n,n.modified.concat(t).sort((r,o)=>r.id-o.id))}}let j2=0;class $u{constructor(e){this.name=e,this.instances=[],this.id=j2++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(u=>u.base==e&&H2(t,u.modified));if(n)return n;let r=[],o=new Dn(e.name,r,e,t);for(let u of t)u.instances.push(o);let a=V2(t);for(let u of e.set)if(!u.modified.length)for(let h of a)r.push($u.get(u,h));return o}}function H2(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function V2(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function W2(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let o=[],a=2,u=r;for(let g=0;;){if(u=="..."&&g>0&&g+3==r.length){a=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!v)throw new RangeError("Invalid path: "+r);if(o.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),g+=v[0].length,g==r.length)break;let w=r[g++];if(g==r.length&&w=="!"){a=0;break}if(w!="/")throw new RangeError("Invalid path: "+r);u=r.slice(g)}let h=o.length-1,p=o[h];if(!p)throw new RangeError("Invalid path: "+r);let d=new Ku(n,a,h>0?o.slice(0,h):null);e[p]=d.sort(e[p])}}return U1.add(e)}const U1=new je;class Ku{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ku.empty=new Ku([],2,null);function $1(i,e){let t=Object.create(null);for(let o of i)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let a of o.tag)t[a.id]=o.class;let{scope:n,all:r=null}=e||{};return{style:o=>{let a=r;for(let u of o)for(let h of u.set){let p=t[h.id];if(p){a=a?a+" "+p:p;break}}return a},scope:n}}function U2(i,e){let t=null;for(let n of i){let r=n.style(e);r&&(t=t?t+" "+r:r)}return t}function $2(i,e,t,n=0,r=i.length){let o=new K2(n,Array.isArray(e)?e:[e],t);o.highlightRange(i.cursor(),n,r,"",o.highlighters),o.flush(r)}class K2{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,o){let{type:a,from:u,to:h}=e;if(u>=n||h<=t)return;a.isTop&&(o=this.highlighters.filter(w=>!w.scope||w.scope(a)));let p=r,d=q2(e)||Ku.empty,g=U2(o,d.tags);if(g&&(p&&(p+=" "),p+=g,d.mode==1&&(r+=(r?" ":"")+g)),this.startSpan(Math.max(t,u),p),d.opaque)return;let v=e.tree&&e.tree.prop(je.mounted);if(v&&v.overlay){let w=e.node.enter(v.overlay[0].from+u,1),S=this.highlighters.filter(b=>!b.scope||b.scope(v.tree.type)),k=e.firstChild();for(let b=0,A=u;;b++){let N=b<v.overlay.length?v.overlay[b]:null,z=N?N.from+u:h,j=Math.max(t,A),F=Math.min(n,z);if(j<F&&k)for(;e.from<F&&(this.highlightRange(e,j,F,r,o),this.startSpan(Math.min(F,e.to),p),!(e.to>=z||!e.nextSibling())););if(!N||z>n)break;A=N.to+u,A>t&&(this.highlightRange(w.cursor(),Math.max(t,N.from+u),Math.min(n,A),"",S),this.startSpan(Math.min(n,A),p))}k&&e.parent()}else if(e.firstChild()){v&&(r="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,o),this.startSpan(Math.min(n,e.to),p)}while(e.nextSibling());e.parent()}}}function q2(i){let e=i.type.prop(U1);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const ie=Dn.define,yu=ie(),cr=ie(),ly=ie(cr),ay=ie(cr),hr=ie(),vu=ie(hr),Sf=ie(hr),si=ie(),Kr=ie(si),ii=ie(),ri=ie(),xd=ie(),tl=ie(xd),wu=ie(),H={comment:yu,lineComment:ie(yu),blockComment:ie(yu),docComment:ie(yu),name:cr,variableName:ie(cr),typeName:ly,tagName:ie(ly),propertyName:ay,attributeName:ie(ay),className:ie(cr),labelName:ie(cr),namespace:ie(cr),macroName:ie(cr),literal:hr,string:vu,docString:ie(vu),character:ie(vu),attributeValue:ie(vu),number:Sf,integer:ie(Sf),float:ie(Sf),bool:ie(hr),regexp:ie(hr),escape:ie(hr),color:ie(hr),url:ie(hr),keyword:ii,self:ie(ii),null:ie(ii),atom:ie(ii),unit:ie(ii),modifier:ie(ii),operatorKeyword:ie(ii),controlKeyword:ie(ii),definitionKeyword:ie(ii),moduleKeyword:ie(ii),operator:ri,derefOperator:ie(ri),arithmeticOperator:ie(ri),logicOperator:ie(ri),bitwiseOperator:ie(ri),compareOperator:ie(ri),updateOperator:ie(ri),definitionOperator:ie(ri),typeOperator:ie(ri),controlOperator:ie(ri),punctuation:xd,separator:ie(xd),bracket:tl,angleBracket:ie(tl),squareBracket:ie(tl),paren:ie(tl),brace:ie(tl),content:si,heading:Kr,heading1:ie(Kr),heading2:ie(Kr),heading3:ie(Kr),heading4:ie(Kr),heading5:ie(Kr),heading6:ie(Kr),contentSeparator:ie(si),list:ie(si),quote:ie(si),emphasis:ie(si),strong:ie(si),link:ie(si),monospace:ie(si),strikethrough:ie(si),inserted:ie(),deleted:ie(),changed:ie(),invalid:ie(),meta:wu,documentMeta:ie(wu),annotation:ie(wu),processingInstruction:ie(wu),definition:Dn.defineModifier("definition"),constant:Dn.defineModifier("constant"),function:Dn.defineModifier("function"),standard:Dn.defineModifier("standard"),local:Dn.defineModifier("local"),special:Dn.defineModifier("special")};for(let i in H){let e=H[i];e instanceof Dn&&(e.name=i)}$1([{tag:H.link,class:"tok-link"},{tag:H.heading,class:"tok-heading"},{tag:H.emphasis,class:"tok-emphasis"},{tag:H.strong,class:"tok-strong"},{tag:H.keyword,class:"tok-keyword"},{tag:H.atom,class:"tok-atom"},{tag:H.bool,class:"tok-bool"},{tag:H.url,class:"tok-url"},{tag:H.labelName,class:"tok-labelName"},{tag:H.inserted,class:"tok-inserted"},{tag:H.deleted,class:"tok-deleted"},{tag:H.literal,class:"tok-literal"},{tag:H.string,class:"tok-string"},{tag:H.number,class:"tok-number"},{tag:[H.regexp,H.escape,H.special(H.string)],class:"tok-string2"},{tag:H.variableName,class:"tok-variableName"},{tag:H.local(H.variableName),class:"tok-variableName tok-local"},{tag:H.definition(H.variableName),class:"tok-variableName tok-definition"},{tag:H.special(H.variableName),class:"tok-variableName2"},{tag:H.definition(H.propertyName),class:"tok-propertyName tok-definition"},{tag:H.typeName,class:"tok-typeName"},{tag:H.namespace,class:"tok-namespace"},{tag:H.className,class:"tok-className"},{tag:H.macroName,class:"tok-macroName"},{tag:H.propertyName,class:"tok-propertyName"},{tag:H.operator,class:"tok-operator"},{tag:H.comment,class:"tok-comment"},{tag:H.meta,class:"tok-meta"},{tag:H.invalid,class:"tok-invalid"},{tag:H.punctuation,class:"tok-punctuation"}]);var kf;const fl=new je,G2=new je;class ui{constructor(e,t,n=[],r=""){this.data=e,this.name=r,_e.prototype.hasOwnProperty("tree")||Object.defineProperty(_e.prototype,"tree",{get(){return Kt(this)}}),this.parser=t,this.extension=[kr.of(this),_e.languageData.of((o,a,u)=>{let h=uy(o,a,u),p=h.type.prop(fl);if(!p)return[];let d=o.facet(p),g=h.type.prop(G2);if(g){let v=h.resolve(a-h.from,u);for(let w of g)if(w.test(v,o)){let S=o.facet(w.facet);return w.type=="replace"?S:S.concat(d)}}return d})].concat(n)}isActiveAt(e,t,n=-1){return uy(e,t,n).type.prop(fl)==this.data}findRegions(e){let t=e.facet(kr);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(o,a)=>{if(o.prop(fl)==this.data){n.push({from:a,to:a+o.length});return}let u=o.prop(je.mounted);if(u){if(u.tree.prop(fl)==this.data){if(u.overlay)for(let h of u.overlay)n.push({from:h.from+a,to:h.to+a});else n.push({from:a,to:a+o.length});return}else if(u.overlay){let h=n.length;if(r(u.tree,u.overlay[0].from+a),n.length>h)return}}for(let h=0;h<o.children.length;h++){let p=o.children[h];p instanceof $t&&r(p,o.positions[h]+a)}};return r(Kt(e),0),n}get allowsNesting(){return!0}}ui.setState=Ne.define();function uy(i,e,t){let n=i.facet(kr),r=Kt(i).topNode;if(!n||n.allowsNesting)for(let o=r;o;o=o.enter(e,t,Nt.ExcludeBuffers))o.type.isTop&&(r=o);return r}function Kt(i){let e=i.field(ui.state,!1);return e?e.tree:$t.empty}class Y2{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let nl=null;class qu{constructor(e,t,n=[],r,o,a,u,h){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=o,this.viewport=a,this.skipped=u,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new qu(e,t,[],$t.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Y2(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=$t.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Zr.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Zr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=nl;nl=this;try{return e()}finally{nl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cy(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:o,viewport:a,skipped:u}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((p,d,g,v)=>h.push({fromA:p,toA:d,fromB:g,toB:v})),n=Zr.applyChanges(n,h),r=$t.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){u=[];for(let p of this.skipped){let d=e.mapPos(p.from,1),g=e.mapPos(p.to,-1);d<g&&u.push({from:d,to:g})}}}return new qu(this.parser,t,n,r,o,a,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:o}=this.skipped[n];r<e.to&&o>e.from&&(this.fragments=cy(this.fragments,r,o),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends F2{createParse(t,n,r){let o=r[0].from,a=r[r.length-1].to;return{parsedPos:o,advance(){let h=nl;if(h){for(let p of r)h.tempSkipped.push(p);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new $t(Bn.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return nl}}function cy(i,e,t){return Zr.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class no{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new no(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=qu.create(e.facet(kr).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new no(n)}}ui.state=It.define({create:no.init,update(i,e){for(let t of e.effects)if(t.is(ui.setState))return t.value;return e.startState.facet(kr)!=e.state.facet(kr)?no.init(e.state):i.apply(e)}});let K1=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(K1=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const bf=typeof navigator<"u"&&(!((kf=navigator.scheduling)===null||kf===void 0)&&kf.isInputPending)?()=>navigator.scheduling.isInputPending():null,Q2=mt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ui.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ui.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=K1(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,o=n.field(ui.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!bf?Math.max(25,e.timeRemaining()-5):1e9),u=o.context.treeLen<r&&n.doc.length>r+1e3,h=o.context.work(()=>bf&&bf()||Date.now()>a,r+(u?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:ui.setState.of(new no(o.context))})),this.chunkBudget>0&&!(h&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>hn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),kr=he.define({combine(i){return i.length?i[0]:null},enables:i=>[ui.state,Q2,oe.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]}),X2=he.define(),hc=he.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function Gu(i){let e=i.facet(hc);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function Tl(i,e){let t="",n=i.tabSize,r=i.facet(hc)[0];if(r=="	"){for(;e>=n;)t+="	",e-=n;r=" "}for(let o=0;o<e;o++)t+=r;return t}function np(i,e){i instanceof _e&&(i=new fc(i));for(let n of i.state.facet(X2)){let r=n(i,e);if(r!==void 0)return r}let t=Kt(i.state);return t.length>=e?Z2(i,t,e):null}class fc{constructor(e,t={}){this.state=e,this.options=t,this.unit=Gu(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=n.from&&r<=n.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),o=this.countColumn(n,e-r),a=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return a>-1&&(o+=a-this.countColumn(n,n.search(/\S|$/))),o}countColumn(e,t=e.length){return so(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let a=o(r);if(a>-1)return a}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const J2=new je;function Z2(i,e,t){let n=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=n.node){let o=[];for(let a=r;a&&!(a.from==n.node.from&&a.type==n.node.type);a=a.parent)o.push(a);for(let a=o.length-1;a>=0;a--)n={node:o[a],next:n}}return q1(n,i,t)}function q1(i,e,t){for(let n=i;n;n=n.next){let r=tM(n.node);if(r)return r(ip.create(e,t,n))}return 0}function eM(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function tM(i){let e=i.type.prop(J2);if(e)return e;let t=i.firstChild,n;if(t&&(n=t.type.prop(je.closedBy))){let r=i.lastChild,o=r&&n.indexOf(r.name)>-1;return a=>sM(a,!0,1,void 0,o&&!eM(a)?r.from:void 0)}return i.parent==null?nM:null}function nM(){return 0}class ip extends fc{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new ip(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(iM(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return q1(this.context.next,this.base,this.pos)}}function iM(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function rM(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,o=i.state.doc.lineAt(t.from),a=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let u=t.to;;){let h=e.childAfter(u);if(!h||h==n)return null;if(!h.type.isSkipped){if(h.from>=a)return null;let p=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+p}}u=h.to}}function sM(i,e,t,n,r){let o=i.textAfter,a=o.match(/^\s*/)[0].length,u=n&&o.slice(a,a+n.length)==n||r==i.pos+a,h=rM(i);return h?u?i.column(h.from):i.column(h.to):i.baseIndent+(u?0:i.unit*t)}const oM=200;function lM(){return _e.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:n}=i.newSelection.main,r=t.lineAt(n);if(n>r.from+oM)return i;let o=t.sliceString(r.from,n);if(!e.some(p=>p.test(o)))return i;let{state:a}=i,u=-1,h=[];for(let{head:p}of a.selection.ranges){let d=a.doc.lineAt(p);if(d.from==u)continue;u=d.from;let g=np(a,d.from);if(g==null)continue;let v=/^\s*/.exec(d.text)[0],w=Tl(a,g);v!=w&&h.push({from:d.from,to:d.from+v.length,insert:w})}return h.length?[i,{changes:h,sequential:!0}]:i})}const aM=he.define(),uM=new je;function cM(i,e,t){let n=Kt(i);if(n.length<t)return null;let r=n.resolveStack(t,1),o=null;for(let a=r;a;a=a.next){let u=a.node;if(u.to<=t||u.from>t)continue;if(o&&u.from<e)break;let h=u.type.prop(uM);if(h&&(u.to<n.length-50||n.length==i.doc.length||!hM(u))){let p=h(u,i);p&&p.from<=t&&p.from>=e&&p.to>t&&(o=p)}}return o}function hM(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function Yu(i,e,t){for(let n of i.facet(aM)){let r=n(i,e,t);if(r)return r}return cM(i,e,t)}function G1(i,e){let t=e.mapPos(i.from,1),n=e.mapPos(i.to,-1);return t>=n?void 0:{from:t,to:n}}const dc=Ne.define({map:G1}),Hl=Ne.define({map:G1});function Y1(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(i.lineBlockAt(t));return e}const ss=It.define({create(){return ke.none},update(i,e){i=i.map(e.changes);for(let t of e.effects)if(t.is(dc)&&!fM(i,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(J1),r=n?ke.replace({widget:new wM(n(e.state,t.value))}):hy;i=i.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(Hl)&&(i=i.update({filter:(n,r)=>t.value.from!=n||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;i.between(n,n,(r,o)=>{r<n&&o>n&&(t=!0)}),t&&(i=i.update({filterFrom:n,filterTo:n,filter:(r,o)=>o<=n||r>=n}))}return i},provide:i=>oe.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(n,r)=>{t.push(n,r)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let n=i[t++],r=i[t++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(hy.range(n,r))}return ke.set(e,!0)}});function Qu(i,e,t){var n;let r=null;return(n=i.field(ss,!1))===null||n===void 0||n.between(e,t,(o,a)=>{(!r||r.from>o)&&(r={from:o,to:a})}),r}function fM(i,e,t){let n=!1;return i.between(e,e,(r,o)=>{r==e&&o==t&&(n=!0)}),n}function Q1(i,e){return i.field(ss,!1)?e:e.concat(Ne.appendConfig.of(Z1()))}const dM=i=>{for(let e of Y1(i)){let t=Yu(i.state,e.from,e.to);if(t)return i.dispatch({effects:Q1(i.state,[dc.of(t),X1(i,t)])}),!0}return!1},pM=i=>{if(!i.state.field(ss,!1))return!1;let e=[];for(let t of Y1(i)){let n=Qu(i.state,t.from,t.to);n&&e.push(Hl.of(n),X1(i,n,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function X1(i,e,t=!0){let n=i.state.doc.lineAt(e.from).number,r=i.state.doc.lineAt(e.to).number;return oe.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${i.state.phrase("to")} ${r}.`)}const mM=i=>{let{state:e}=i,t=[];for(let n=0;n<e.doc.length;){let r=i.lineBlockAt(n),o=Yu(e,r.from,r.to);o&&t.push(dc.of(o)),n=(o?i.lineBlockAt(o.to):r).to+1}return t.length&&i.dispatch({effects:Q1(i.state,t)}),!!t.length},gM=i=>{let e=i.state.field(ss,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(n,r)=>{t.push(Hl.of({from:n,to:r}))}),i.dispatch({effects:t}),!0},yM=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:dM},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:pM},{key:"Ctrl-Alt-[",run:mM},{key:"Ctrl-Alt-]",run:gM}],vM={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},J1=he.define({combine(i){return mi(i,vM)}});function Z1(i){return[ss,kM]}function ew(i,e){let{state:t}=i,n=t.facet(J1),r=a=>{let u=i.lineBlockAt(i.posAtDOM(a.target)),h=Qu(i.state,u.from,u.to);h&&i.dispatch({effects:Hl.of(h)}),a.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(i,r,e);let o=document.createElement("span");return o.textContent=n.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const hy=ke.replace({widget:new class extends Fi{toDOM(i){return ew(i,null)}}});class wM extends Fi{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ew(e,this.value)}}const xM={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Cf extends Ii{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function SM(i={}){let e=Object.assign(Object.assign({},xM),i),t=new Cf(e,!0),n=new Cf(e,!1),r=mt.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(kr)!=a.state.facet(kr)||a.startState.field(ss,!1)!=a.state.field(ss,!1)||Kt(a.startState)!=Kt(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let u=new Ni;for(let h of a.viewportLineBlocks){let p=Qu(a.state,h.from,h.to)?n:Yu(a.state,h.from,h.to)?t:null;p&&u.add(h.from,h.from,p)}return u.finish()}}),{domEventHandlers:o}=e;return[r,w2({class:"cm-foldGutter",markers(a){var u;return((u=a.plugin(r))===null||u===void 0?void 0:u.markers)||Ue.empty},initialSpacer(){return new Cf(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(a,u,h)=>{if(o.click&&o.click(a,u,h))return!0;let p=Qu(a.state,u.from,u.to);if(p)return a.dispatch({effects:Hl.of(p)}),!0;let d=Yu(a.state,u.from,u.to);return d?(a.dispatch({effects:dc.of(d)}),!0):!1}})}),Z1()]}const kM=oe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Vl{constructor(e,t){this.specs=e;let n;function r(u){let h=vr.newName();return(n||(n=Object.create(null)))["."+h]=u,h}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,a=t.scope;this.scope=a instanceof ui?u=>u.prop(fl)==a.data:a?u=>u==a:void 0,this.style=$1(e.map(u=>({tag:u.tag,class:u.class||r(Object.assign({},u,{tag:null}))})),{all:o}).style,this.module=n?new vr(n):null,this.themeType=t.themeType}static define(e,t){return new Vl(e,t||{})}}const Sd=he.define(),tw=he.define({combine(i){return i.length?[i[0]]:null}});function Mf(i){let e=i.facet(Sd);return e.length?e:i.facet(tw)}function nw(i,e){let t=[CM],n;return i instanceof Vl&&(i.module&&t.push(oe.styleModule.of(i.module)),n=i.themeType),e!=null&&e.fallback?t.push(tw.of(i)):n?t.push(Sd.computeN([oe.darkTheme],r=>r.facet(oe.darkTheme)==(n=="dark")?[i]:[])):t.push(Sd.of(i)),t}class bM{constructor(e){this.markCache=Object.create(null),this.tree=Kt(e.state),this.decorations=this.buildDeco(e,Mf(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Kt(e.state),n=Mf(e.state),r=n!=Mf(e.startState),{viewport:o}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&a>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return ke.none;let n=new Ni;for(let{from:r,to:o}of e.visibleRanges)$2(this.tree,t,(a,u,h)=>{n.add(a,u,this.markCache[h]||(this.markCache[h]=ke.mark({class:h})))},r,o);return n.finish()}}const CM=as.high(mt.fromClass(bM,{decorations:i=>i.decorations})),MM=Vl.define([{tag:H.meta,color:"#404740"},{tag:H.link,textDecoration:"underline"},{tag:H.heading,textDecoration:"underline",fontWeight:"bold"},{tag:H.emphasis,fontStyle:"italic"},{tag:H.strong,fontWeight:"bold"},{tag:H.strikethrough,textDecoration:"line-through"},{tag:H.keyword,color:"#708"},{tag:[H.atom,H.bool,H.url,H.contentSeparator,H.labelName],color:"#219"},{tag:[H.literal,H.inserted],color:"#164"},{tag:[H.string,H.deleted],color:"#a11"},{tag:[H.regexp,H.escape,H.special(H.string)],color:"#e40"},{tag:H.definition(H.variableName),color:"#00f"},{tag:H.local(H.variableName),color:"#30a"},{tag:[H.typeName,H.namespace],color:"#085"},{tag:H.className,color:"#167"},{tag:[H.special(H.variableName),H.macroName],color:"#256"},{tag:H.definition(H.propertyName),color:"#00c"},{tag:H.comment,color:"#940"},{tag:H.invalid,color:"#f00"}]),EM=oe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),iw=1e4,rw="()[]{}",sw=he.define({combine(i){return mi(i,{afterCursor:!0,brackets:rw,maxScanDistance:iw,renderMatch:TM})}}),AM=ke.mark({class:"cm-matchingBracket"}),DM=ke.mark({class:"cm-nonmatchingBracket"});function TM(i){let e=[],t=i.matched?AM:DM;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}const PM=It.define({create(){return ke.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let t=[],n=e.state.facet(sw);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=ci(e.state,r.head,-1,n)||r.head>0&&ci(e.state,r.head-1,1,n)||n.afterCursor&&(ci(e.state,r.head,1,n)||r.head<e.state.doc.length&&ci(e.state,r.head+1,-1,n));o&&(t=t.concat(n.renderMatch(o,e.state)))}return ke.set(t,!0)},provide:i=>oe.decorations.from(i)}),RM=[PM,EM];function OM(i={}){return[sw.of(i),RM]}const LM=new je;function kd(i,e,t){let n=i.prop(e<0?je.openedBy:je.closedBy);if(n)return n;if(i.name.length==1){let r=t.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function bd(i){let e=i.type.prop(LM);return e?e(i.node):i}function ci(i,e,t,n={}){let r=n.maxScanDistance||iw,o=n.brackets||rw,a=Kt(i),u=a.resolveInner(e,t);for(let h=u;h;h=h.parent){let p=kd(h.type,t,o);if(p&&h.from<h.to){let d=bd(h);if(d&&(t>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return NM(i,e,t,h,d,p,o)}}return BM(i,e,t,a,u.type,r,o)}function NM(i,e,t,n,r,o,a){let u=n.parent,h={from:r.from,to:r.to},p=0,d=u==null?void 0:u.cursor();if(d&&(t<0?d.childBefore(n.from):d.childAfter(n.to)))do if(t<0?d.to<=n.from:d.from>=n.to){if(p==0&&o.indexOf(d.type.name)>-1&&d.from<d.to){let g=bd(d);return{start:h,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(kd(d.type,t,a))p++;else if(kd(d.type,-t,a)){if(p==0){let g=bd(d);return{start:h,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}p--}}while(t<0?d.prevSibling():d.nextSibling());return{start:h,matched:!1}}function BM(i,e,t,n,r,o,a){let u=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),h=a.indexOf(u);if(h<0||h%2==0!=t>0)return null;let p={from:t<0?e-1:e,to:t>0?e+1:e},d=i.doc.iterRange(e,t>0?i.doc.length:0),g=0;for(let v=0;!d.next().done&&v<=o;){let w=d.value;t<0&&(v+=w.length);let S=e+v*t;for(let k=t>0?0:w.length-1,b=t>0?w.length:-1;k!=b;k+=t){let A=a.indexOf(w[k]);if(!(A<0||n.resolveInner(S+k,1).type!=r))if(A%2==0==t>0)g++;else{if(g==1)return{start:p,end:{from:S+k,to:S+k+1},matched:A>>1==h>>1};g--}}t>0&&(v+=w.length)}return d.done?{start:p,matched:!1}:null}const IM=Object.create(null),fy=[Bn.none],dy=[],py=Object.create(null),FM=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])FM[i]=zM(IM,e);function Ef(i,e){dy.indexOf(i)>-1||(dy.push(i),console.warn(e))}function zM(i,e){let t=[];for(let u of e.split(" ")){let h=[];for(let p of u.split(".")){let d=i[p]||H[p];d?typeof d=="function"?h.length?h=h.map(d):Ef(p,`Modifier ${p} used at start of tag`):h.length?Ef(p,`Tag ${p} used as modifier`):h=Array.isArray(d)?d:[d]:Ef(p,`Unknown highlighting tag ${p}`)}for(let p of h)t.push(p)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),r=n+" "+t.map(u=>u.id),o=py[r];if(o)return o.id;let a=py[r]=Bn.define({id:fy.length,name:n,props:[W2({[n]:t})]});return fy.push(a),a.id}it.RTL,it.LTR;const _M=i=>{let{state:e}=i,t=e.doc.lineAt(e.selection.main.from),n=sp(i.state,t.from);return n.line?jM(i):n.block?VM(i):!1};function rp(i,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=i(e,t);return r?(n(t.update(r)),!0):!1}}const jM=rp($M,0),HM=rp(ow,0),VM=rp((i,e)=>ow(i,e,UM(e)),0);function sp(i,e){let t=i.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const il=50;function WM(i,{open:e,close:t},n,r){let o=i.sliceDoc(n-il,n),a=i.sliceDoc(r,r+il),u=/\s*$/.exec(o)[0].length,h=/^\s*/.exec(a)[0].length,p=o.length-u;if(o.slice(p-e.length,p)==e&&a.slice(h,h+t.length)==t)return{open:{pos:n-u,margin:u&&1},close:{pos:r+h,margin:h&&1}};let d,g;r-n<=2*il?d=g=i.sliceDoc(n,r):(d=i.sliceDoc(n,n+il),g=i.sliceDoc(r-il,r));let v=/^\s*/.exec(d)[0].length,w=/\s*$/.exec(g)[0].length,S=g.length-w-t.length;return d.slice(v,v+e.length)==e&&g.slice(S,S+t.length)==t?{open:{pos:n+v+e.length,margin:/\s/.test(d.charAt(v+e.length))?1:0},close:{pos:r-w-t.length,margin:/\s/.test(g.charAt(S-1))?1:0}}:null}function UM(i){let e=[];for(let t of i.selection.ranges){let n=i.doc.lineAt(t.from),r=t.to<=n.to?n:i.doc.lineAt(t.to);r.from>n.from&&r.from==t.to&&(r=t.to==n.to+1?n:i.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>n.from?e[o].to=r.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:r.to})}return e}function ow(i,e,t=e.selection.ranges){let n=t.map(o=>sp(e,o.from).block);if(!n.every(o=>o))return null;let r=t.map((o,a)=>WM(e,n[a],o.from,o.to));if(i!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,a)=>r[a]?[]:[{from:o.from,insert:n[a].open+" "},{from:o.to,insert:" "+n[a].close}]))};if(i!=1&&r.some(o=>o)){let o=[];for(let a=0,u;a<r.length;a++)if(u=r[a]){let h=n[a],{open:p,close:d}=u;o.push({from:p.pos-h.open.length,to:p.pos+p.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:o}}return null}function $M(i,e,t=e.selection.ranges){let n=[],r=-1;for(let{from:o,to:a}of t){let u=n.length,h=1e9,p=sp(e,o).line;if(p){for(let d=o;d<=a;){let g=e.doc.lineAt(d);if(g.from>r&&(o==a||a>g.from)){r=g.from;let v=/^\s*/.exec(g.text)[0].length,w=v==g.length,S=g.text.slice(v,v+p.length)==p?v:-1;v<g.text.length&&v<h&&(h=v),n.push({line:g,comment:S,token:p,indent:v,empty:w,single:!1})}d=g.to+1}if(h<1e9)for(let d=u;d<n.length;d++)n[d].indent<n[d].line.text.length&&(n[d].indent=h);n.length==u+1&&(n[u].single=!0)}}if(i!=2&&n.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:u,token:h,indent:p,empty:d,single:g}of n)(g||!d)&&o.push({from:u.from+p,insert:h+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(i!=1&&n.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:u,token:h}of n)if(u>=0){let p=a.from+u,d=p+h.length;a.text[d-a.from]==" "&&d++,o.push({from:p,to:d})}return{changes:o}}return null}const Cd=pi.define(),KM=pi.define(),qM=he.define(),lw=he.define({combine(i){return mi(i,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}}),aw=It.define({create(){return hi.empty},update(i,e){let t=e.state.facet(lw),n=e.annotation(Cd);if(n){let h=fn.fromTransaction(e,n.selection),p=n.side,d=p==0?i.undone:i.done;return h?d=Xu(d,d.length,t.minDepth,h):d=hw(d,e.startState.selection),new hi(p==0?n.rest:d,p==0?d:n.rest)}let r=e.annotation(KM);if((r=="full"||r=="before")&&(i=i.isolate()),e.annotation(Ct.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let o=fn.fromTransaction(e),a=e.annotation(Ct.time),u=e.annotation(Ct.userEvent);return o?i=i.addChanges(o,a,u,t,e):e.selection&&(i=i.addSelection(e.startState.selection,a,u,t.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new hi(i.done.map(fn.fromJSON),i.undone.map(fn.fromJSON))}});function GM(i={}){return[aw,lw.of(i),oe.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?uw:e.inputType=="historyRedo"?Md:null;return n?(e.preventDefault(),n(t)):!1}})]}function pc(i,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let r=t.field(aw,!1);if(!r)return!1;let o=r.pop(i,t,e);return o?(n(o),!0):!1}}const uw=pc(0,!1),Md=pc(1,!1),YM=pc(0,!0),QM=pc(1,!0);class fn{constructor(e,t,n,r,o){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new fn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new fn(e.changes&&bt.fromJSON(e.changes),[],e.mapped&&fi.fromJSON(e.mapped),e.startSelection&&K.fromJSON(e.startSelection),e.selectionsAfter.map(K.fromJSON))}static fromTransaction(e,t){let n=Pn;for(let r of e.startState.facet(qM)){let o=r(e);o.length&&(n=n.concat(o))}return!n.length&&e.changes.empty?null:new fn(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Pn)}static selection(e){return new fn(void 0,Pn,void 0,void 0,e)}}function Xu(i,e,t,n){let r=e+1>t+20?e-t-1:0,o=i.slice(r,e);return o.push(n),o}function XM(i,e){let t=[],n=!1;return i.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,a,u)=>{for(let h=0;h<t.length;){let p=t[h++],d=t[h++];u>=p&&a<=d&&(n=!0)}}),n}function JM(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function cw(i,e){return i.length?e.length?i.concat(e):i:e}const Pn=[],ZM=200;function hw(i,e){if(i.length){let t=i[i.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-ZM));return n.length&&n[n.length-1].eq(e)?i:(n.push(e),Xu(i,i.length-1,1e9,t.setSelAfter(n)))}else return[fn.selection([e])]}function eE(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Af(i,e){if(!i.length)return i;let t=i.length,n=Pn;for(;t;){let r=tE(i[t-1],e,n);if(r.changes&&!r.changes.empty||r.effects.length){let o=i.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,n=r.selectionsAfter}return n.length?[fn.selection(n)]:Pn}function tE(i,e,t){let n=cw(i.selectionsAfter.length?i.selectionsAfter.map(u=>u.map(e)):Pn,t);if(!i.changes)return fn.selection(n);let r=i.changes.map(e),o=e.mapDesc(i.changes,!0),a=i.mapped?i.mapped.composeDesc(o):o;return new fn(r,Ne.mapEffects(i.effects,e),a,i.startSelection.map(o),n)}const nE=/^(input\.type|delete)($|\.)/;class hi{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new hi(this.done,this.undone):this}addChanges(e,t,n,r,o){let a=this.done,u=a[a.length-1];return u&&u.changes&&!u.changes.empty&&e.changes&&(!n||nE.test(n))&&(!u.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,XM(u.changes,e.changes))||n=="input.type.compose")?a=Xu(a,a.length-1,r.minDepth,new fn(e.changes.compose(u.changes),cw(Ne.mapEffects(e.effects,u.changes),u.effects),u.mapped,u.startSelection,Pn)):a=Xu(a,a.length,r.minDepth,e),new hi(a,Pn,t,n)}addSelection(e,t,n,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Pn;return o.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&JM(o[o.length-1],e)?this:new hi(hw(this.done,e),this.undone,t,n)}addMapping(e){return new hi(Af(this.done,e),Af(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],a=o.selectionsAfter[0]||t.selection;if(n&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Cd.of({side:e,rest:eE(r),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let u=r.length==1?Pn:r.slice(0,r.length-1);return o.mapped&&(u=Af(u,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Cd.of({side:e,rest:u,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}hi.empty=new hi(Pn,Pn);const iE=[{key:"Mod-z",run:uw,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Md,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Md,preventDefault:!0},{key:"Mod-u",run:YM,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:QM,preventDefault:!0}];function oo(i,e){return K.create(i.ranges.map(e),i.mainIndex)}function gi(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Gn({state:i,dispatch:e},t){let n=oo(i.selection,t);return n.eq(i.selection,!0)?!1:(e(gi(i,n)),!0)}function mc(i,e){return K.cursor(e?i.to:i.from)}function fw(i,e){return Gn(i,t=>t.empty?i.moveByChar(t,e):mc(t,e))}function qt(i){return i.textDirectionAt(i.state.selection.main.head)==it.LTR}const dw=i=>fw(i,!qt(i)),pw=i=>fw(i,qt(i));function mw(i,e){return Gn(i,t=>t.empty?i.moveByGroup(t,e):mc(t,e))}const rE=i=>mw(i,!qt(i)),sE=i=>mw(i,qt(i));function oE(i,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function gc(i,e,t){let n=Kt(i).resolveInner(e.head),r=t?je.closedBy:je.openedBy;for(let h=e.head;;){let p=t?n.childAfter(h):n.childBefore(h);if(!p)break;oE(i,p,r)?n=p:h=t?p.to:p.from}let o=n.type.prop(r),a,u;return o&&(a=t?ci(i,n.from,1):ci(i,n.to,-1))&&a.matched?u=t?a.end.to:a.end.from:u=t?n.to:n.from,K.cursor(u,t?-1:1)}const lE=i=>Gn(i,e=>gc(i.state,e,!qt(i))),aE=i=>Gn(i,e=>gc(i.state,e,qt(i)));function gw(i,e){return Gn(i,t=>{if(!t.empty)return mc(t,e);let n=i.moveVertically(t,e);return n.head!=t.head?n:i.moveToLineBoundary(t,e)})}const yw=i=>gw(i,!1),vw=i=>gw(i,!0);function ww(i){let e=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,t=0,n=0,r;if(e){for(let o of i.state.facet(oe.scrollMargins)){let a=o(i);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(n=Math.max(a==null?void 0:a.bottom,n))}r=i.scrollDOM.clientHeight-t-n}else r=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(i.defaultLineHeight,r-5)}}function xw(i,e){let t=ww(i),{state:n}=i,r=oo(n.selection,a=>a.empty?i.moveVertically(a,e,t.height):mc(a,e));if(r.eq(n.selection))return!1;let o;if(t.selfScroll){let a=i.coordsAtPos(n.selection.main.head),u=i.scrollDOM.getBoundingClientRect(),h=u.top+t.marginTop,p=u.bottom-t.marginBottom;a&&a.top>h&&a.bottom<p&&(o=oe.scrollIntoView(r.main.head,{y:"start",yMargin:a.top-h}))}return i.dispatch(gi(n,r),{effects:o}),!0}const my=i=>xw(i,!1),Ed=i=>xw(i,!0);function br(i,e,t){let n=i.lineBlockAt(e.head),r=i.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?n.to:n.from)&&(r=i.moveToLineBoundary(e,t,!1)),!t&&r.head==n.from&&n.length){let o=/^\s*/.exec(i.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;o&&e.head!=n.from+o&&(r=K.cursor(n.from+o))}return r}const uE=i=>Gn(i,e=>br(i,e,!0)),cE=i=>Gn(i,e=>br(i,e,!1)),hE=i=>Gn(i,e=>br(i,e,!qt(i))),fE=i=>Gn(i,e=>br(i,e,qt(i))),dE=i=>Gn(i,e=>K.cursor(i.lineBlockAt(e.head).from,1)),pE=i=>Gn(i,e=>K.cursor(i.lineBlockAt(e.head).to,-1));function mE(i,e,t){let n=!1,r=oo(i.selection,o=>{let a=ci(i,o.head,-1)||ci(i,o.head,1)||o.head>0&&ci(i,o.head-1,1)||o.head<i.doc.length&&ci(i,o.head+1,-1);if(!a||!a.end)return o;n=!0;let u=a.start.from==o.head?a.end.to:a.end.from;return K.cursor(u)});return n?(e(gi(i,r)),!0):!1}const gE=({state:i,dispatch:e})=>mE(i,e);function In(i,e){let t=oo(i.state.selection,n=>{let r=e(n);return K.range(n.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(i.state.selection)?!1:(i.dispatch(gi(i.state,t)),!0)}function Sw(i,e){return In(i,t=>i.moveByChar(t,e))}const kw=i=>Sw(i,!qt(i)),bw=i=>Sw(i,qt(i));function Cw(i,e){return In(i,t=>i.moveByGroup(t,e))}const yE=i=>Cw(i,!qt(i)),vE=i=>Cw(i,qt(i)),wE=i=>In(i,e=>gc(i.state,e,!qt(i))),xE=i=>In(i,e=>gc(i.state,e,qt(i)));function Mw(i,e){return In(i,t=>i.moveVertically(t,e))}const Ew=i=>Mw(i,!1),Aw=i=>Mw(i,!0);function Dw(i,e){return In(i,t=>i.moveVertically(t,e,ww(i).height))}const gy=i=>Dw(i,!1),yy=i=>Dw(i,!0),SE=i=>In(i,e=>br(i,e,!0)),kE=i=>In(i,e=>br(i,e,!1)),bE=i=>In(i,e=>br(i,e,!qt(i))),CE=i=>In(i,e=>br(i,e,qt(i))),ME=i=>In(i,e=>K.cursor(i.lineBlockAt(e.head).from)),EE=i=>In(i,e=>K.cursor(i.lineBlockAt(e.head).to)),vy=({state:i,dispatch:e})=>(e(gi(i,{anchor:0})),!0),wy=({state:i,dispatch:e})=>(e(gi(i,{anchor:i.doc.length})),!0),xy=({state:i,dispatch:e})=>(e(gi(i,{anchor:i.selection.main.anchor,head:0})),!0),Sy=({state:i,dispatch:e})=>(e(gi(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),AE=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),DE=({state:i,dispatch:e})=>{let t=yc(i).map(({from:n,to:r})=>K.range(n,Math.min(r+1,i.doc.length)));return e(i.update({selection:K.create(t),userEvent:"select"})),!0},TE=({state:i,dispatch:e})=>{let t=oo(i.selection,n=>{let r=Kt(i),o=r.resolveStack(n.from,1);if(n.empty){let a=r.resolveStack(n.from,-1);a.node.from>=o.node.from&&a.node.to<=o.node.to&&(o=a)}for(let a=o;a;a=a.next){let{node:u}=a;if((u.from<n.from&&u.to>=n.to||u.to>n.to&&u.from<=n.from)&&a.next)return K.range(u.to,u.from)}return n});return t.eq(i.selection)?!1:(e(gi(i,t)),!0)},PE=({state:i,dispatch:e})=>{let t=i.selection,n=null;return t.ranges.length>1?n=K.create([t.main]):t.main.empty||(n=K.create([K.cursor(t.main.head)])),n?(e(gi(i,n)),!0):!1};function Wl(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:n}=i,r=n.changeByRange(o=>{let{from:a,to:u}=o;if(a==u){let h=e(o);h<a?(t="delete.backward",h=xu(i,h,!1)):h>a&&(t="delete.forward",h=xu(i,h,!0)),a=Math.min(a,h),u=Math.max(u,h)}else a=xu(i,a,!1),u=xu(i,u,!0);return a==u?{range:o}:{changes:{from:a,to:u},range:K.cursor(a,a<o.head?-1:1)}});return r.changes.empty?!1:(i.dispatch(n.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?oe.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function xu(i,e,t){if(i instanceof oe)for(let n of i.state.facet(oe.atomicRanges).map(r=>r(i)))n.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const Tw=(i,e,t)=>Wl(i,n=>{let r=n.from,{state:o}=i,a=o.doc.lineAt(r),u,h;if(t&&!e&&r>a.from&&r<a.from+200&&!/[^ \t]/.test(u=a.text.slice(0,r-a.from))){if(u[u.length-1]=="	")return r-1;let p=so(u,o.tabSize),d=p%Gu(o)||Gu(o);for(let g=0;g<d&&u[u.length-1-g]==" ";g++)r--;h=r}else h=Bt(a.text,r-a.from,e,e)+a.from,h==r&&a.number!=(e?o.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,r-a.from))&&(h=Bt(a.text,h-a.from,!1,!1)+a.from);return h}),Ad=i=>Tw(i,!1,!0),Pw=i=>Tw(i,!0,!1),Rw=(i,e)=>Wl(i,t=>{let n=t.head,{state:r}=i,o=r.doc.lineAt(n),a=r.charCategorizer(n);for(let u=null;;){if(n==(e?o.to:o.from)){n==t.head&&o.number!=(e?r.doc.lines:1)&&(n+=e?1:-1);break}let h=Bt(o.text,n-o.from,e)+o.from,p=o.text.slice(Math.min(n,h)-o.from,Math.max(n,h)-o.from),d=a(p);if(u!=null&&d!=u)break;(p!=" "||n!=t.head)&&(u=d),n=h}return n}),Ow=i=>Rw(i,!1),RE=i=>Rw(i,!0),OE=i=>Wl(i,e=>{let t=i.lineBlockAt(e.head).to;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),LE=i=>Wl(i,e=>{let t=i.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),NE=i=>Wl(i,e=>{let t=i.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),BE=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:$e.of(["",""])},range:K.cursor(n.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},IE=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>{if(!n.empty||n.from==0||n.from==i.doc.length)return{range:n};let r=n.from,o=i.doc.lineAt(r),a=r==o.from?r-1:Bt(o.text,r-o.from,!1)+o.from,u=r==o.to?r+1:Bt(o.text,r-o.from,!0)+o.from;return{changes:{from:a,to:u,insert:i.doc.slice(r,u).append(i.doc.slice(a,r))},range:K.cursor(u)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function yc(i){let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.from),o=i.doc.lineAt(n.to);if(!n.empty&&n.to==o.from&&(o=i.doc.lineAt(n.to-1)),t>=r.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(n)}else e.push({from:r.from,to:o.to,ranges:[n]});t=o.number+1}return e}function Lw(i,e,t){if(i.readOnly)return!1;let n=[],r=[];for(let o of yc(i)){if(t?o.to==i.doc.length:o.from==0)continue;let a=i.doc.lineAt(t?o.to+1:o.from-1),u=a.length+1;if(t){n.push({from:o.to,to:a.to},{from:o.from,insert:a.text+i.lineBreak});for(let h of o.ranges)r.push(K.range(Math.min(i.doc.length,h.anchor+u),Math.min(i.doc.length,h.head+u)))}else{n.push({from:a.from,to:o.from},{from:o.to,insert:i.lineBreak+a.text});for(let h of o.ranges)r.push(K.range(h.anchor-u,h.head-u))}}return n.length?(e(i.update({changes:n,scrollIntoView:!0,selection:K.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const FE=({state:i,dispatch:e})=>Lw(i,e,!1),zE=({state:i,dispatch:e})=>Lw(i,e,!0);function Nw(i,e,t){if(i.readOnly)return!1;let n=[];for(let r of yc(i))t?n.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):n.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return e(i.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const _E=({state:i,dispatch:e})=>Nw(i,e,!1),jE=({state:i,dispatch:e})=>Nw(i,e,!0),HE=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(yc(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),n=oo(e.selection,r=>{let o;if(i.lineWrapping){let a=i.lineBlockAt(r.head),u=i.coordsAtPos(r.head,r.assoc||1);u&&(o=a.bottom+i.documentTop-u.bottom+i.defaultLineHeight/2)}return i.moveVertically(r,!0,o)}).map(t);return i.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function VE(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Kt(i).resolveInner(e),n=t.childBefore(e),r=t.childAfter(e),o;return n&&r&&n.to<=e&&r.from>=e&&(o=n.type.prop(je.closedBy))&&o.indexOf(r.name)>-1&&i.doc.lineAt(n.to).from==i.doc.lineAt(r.from).from&&!/\S/.test(i.sliceDoc(n.to,r.from))?{from:n.to,to:r.from}:null}const ky=Bw(!1),WE=Bw(!0);function Bw(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{let{from:o,to:a}=r,u=e.doc.lineAt(o),h=!i&&o==a&&VE(e,o);i&&(o=a=(a<=u.to?u:e.doc.lineAt(a)).to);let p=new fc(e,{simulateBreak:o,simulateDoubleBreak:!!h}),d=np(p,o);for(d==null&&(d=so(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));a<u.to&&/\s/.test(u.text[a-u.from]);)a++;h?{from:o,to:a}=h:o>u.from&&o<u.from+100&&!/\S/.test(u.text.slice(0,o))&&(o=u.from);let g=["",Tl(e,d)];return h&&g.push(Tl(e,p.lineIndent(u.from,-1))),{changes:{from:o,to:a,insert:$e.of(g)},range:K.cursor(o+1+g[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function op(i,e){let t=-1;return i.changeByRange(n=>{let r=[];for(let a=n.from;a<=n.to;){let u=i.doc.lineAt(a);u.number>t&&(n.empty||n.to>u.from)&&(e(u,r,n),t=u.number),a=u.to+1}let o=i.changes(r);return{changes:r,range:K.range(o.mapPos(n.anchor,1),o.mapPos(n.head,1))}})}const UE=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),n=new fc(i,{overrideIndentation:o=>{let a=t[o];return a??-1}}),r=op(i,(o,a,u)=>{let h=np(n,o.from);if(h==null)return;/\S/.test(o.text)||(h=0);let p=/^\s*/.exec(o.text)[0],d=Tl(i,h);(p!=d||u.from<o.from+p.length)&&(t[o.from]=h,a.push({from:o.from,to:o.from+p.length,insert:d}))});return r.changes.empty||e(i.update(r,{userEvent:"indent"})),!0},Iw=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(op(i,(t,n)=>{n.push({from:t.from,insert:i.facet(hc)})}),{userEvent:"input.indent"})),!0),Fw=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(op(i,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=so(r,i.tabSize),a=0,u=Tl(i,Math.max(0,o-Gu(i)));for(;a<r.length&&a<u.length&&r.charCodeAt(a)==u.charCodeAt(a);)a++;n.push({from:t.from+a,to:t.from+r.length,insert:u.slice(a)})}),{userEvent:"delete.dedent"})),!0),$E=i=>(i.setTabFocusMode(),!0),KE=[{key:"Ctrl-b",run:dw,shift:kw,preventDefault:!0},{key:"Ctrl-f",run:pw,shift:bw},{key:"Ctrl-p",run:yw,shift:Ew},{key:"Ctrl-n",run:vw,shift:Aw},{key:"Ctrl-a",run:dE,shift:ME},{key:"Ctrl-e",run:pE,shift:EE},{key:"Ctrl-d",run:Pw},{key:"Ctrl-h",run:Ad},{key:"Ctrl-k",run:OE},{key:"Ctrl-Alt-h",run:Ow},{key:"Ctrl-o",run:BE},{key:"Ctrl-t",run:IE},{key:"Ctrl-v",run:Ed}],qE=[{key:"ArrowLeft",run:dw,shift:kw,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:rE,shift:yE,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:hE,shift:bE,preventDefault:!0},{key:"ArrowRight",run:pw,shift:bw,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:sE,shift:vE,preventDefault:!0},{mac:"Cmd-ArrowRight",run:fE,shift:CE,preventDefault:!0},{key:"ArrowUp",run:yw,shift:Ew,preventDefault:!0},{mac:"Cmd-ArrowUp",run:vy,shift:xy},{mac:"Ctrl-ArrowUp",run:my,shift:gy},{key:"ArrowDown",run:vw,shift:Aw,preventDefault:!0},{mac:"Cmd-ArrowDown",run:wy,shift:Sy},{mac:"Ctrl-ArrowDown",run:Ed,shift:yy},{key:"PageUp",run:my,shift:gy},{key:"PageDown",run:Ed,shift:yy},{key:"Home",run:cE,shift:kE,preventDefault:!0},{key:"Mod-Home",run:vy,shift:xy},{key:"End",run:uE,shift:SE,preventDefault:!0},{key:"Mod-End",run:wy,shift:Sy},{key:"Enter",run:ky,shift:ky},{key:"Mod-a",run:AE},{key:"Backspace",run:Ad,shift:Ad},{key:"Delete",run:Pw},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ow},{key:"Mod-Delete",mac:"Alt-Delete",run:RE},{mac:"Mod-Backspace",run:LE},{mac:"Mod-Delete",run:NE}].concat(KE.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),GE=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:lE,shift:wE},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:aE,shift:xE},{key:"Alt-ArrowUp",run:FE},{key:"Shift-Alt-ArrowUp",run:_E},{key:"Alt-ArrowDown",run:zE},{key:"Shift-Alt-ArrowDown",run:jE},{key:"Escape",run:PE},{key:"Mod-Enter",run:WE},{key:"Alt-l",mac:"Ctrl-l",run:DE},{key:"Mod-i",run:TE,preventDefault:!0},{key:"Mod-[",run:Fw},{key:"Mod-]",run:Iw},{key:"Mod-Alt-\\",run:UE},{key:"Shift-Mod-k",run:HE},{key:"Shift-Mod-\\",run:gE},{key:"Mod-/",run:_M},{key:"Alt-A",run:HM},{key:"Ctrl-m",mac:"Shift-Alt-m",run:$E}].concat(qE),YE={key:"Tab",run:Iw,shift:Fw};function Ge(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];typeof r=="string"?i.setAttribute(n,r):r!=null&&(i[n]=r)}e++}for(;e<arguments.length;e++)zw(i,arguments[e]);return i}function zw(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)zw(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}const by=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class io{constructor(e,t,n=0,r=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=o?u=>o(by(u)):by,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return an(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Fd(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=li(e);let r=this.normalize(t);if(r.length)for(let o=0,a=n;;o++){let u=r.charCodeAt(o),h=this.match(u,a,this.bufferPos+this.bufferStart);if(o==r.length-1){if(h)return this.value=h,this;break}a==n&&o<t.length&&t.charCodeAt(o)==u&&a++}}}match(e,t,n){let r=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],u=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?r={from:this.matches[o+1],to:n}:(this.matches[o]++,u=!0)),u||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:n}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(io.prototype[Symbol.iterator]=function(){return this});const _w={from:-1,to:-1,match:/.*/.exec("")},lp="gm"+(/x/.unicode==null?"":"u");class jw{constructor(e,t,n,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=_w,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Hw(e,t,n,r,o);this.re=new RegExp(t,lp+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let a=e.lineAt(r);this.curLineStart=a.from,this.matchPos=Ju(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=Ju(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Df=new WeakMap;class Gs{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=Df.get(e);if(!r||r.from>=n||r.to<=t){let u=new Gs(t,e.sliceString(t,n));return Df.set(e,u),u}if(r.from==t&&r.to==n)return r;let{text:o,from:a}=r;return a>t&&(o=e.sliceString(t,a)+o,a=t),r.to<n&&(o+=e.sliceString(r.to,n)),Df.set(e,new Gs(a,o)),new Gs(t,o.slice(t-a,n-a))}}class Hw{constructor(e,t,n,r,o){this.text=e,this.to=o,this.done=!1,this.value=_w,this.matchPos=Ju(e,r),this.re=new RegExp(t,lp+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=Gs.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,r=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this.matchPos=Ju(this.text,r+(n==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Gs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(jw.prototype[Symbol.iterator]=Hw.prototype[Symbol.iterator]=function(){return this});function QE(i){try{return new RegExp(i,lp),!0}catch{return!1}}function Ju(i,e){if(e>=i.length)return e;let t=i.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function Dd(i){let e=String(i.state.doc.lineAt(i.state.selection.main.head).number),t=Ge("input",{class:"cm-textfield",name:"line",value:e}),n=Ge("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),i.dispatch({effects:vl.of(!1)}),i.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},Ge("label",i.state.phrase("Go to line"),": ",t)," ",Ge("button",{class:"cm-button",type:"submit"},i.state.phrase("go")),Ge("button",{name:"close",onclick:()=>{i.dispatch({effects:vl.of(!1)}),i.focus()},"aria-label":i.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:a}=i,u=a.doc.lineAt(a.selection.main.head),[,h,p,d,g]=o,v=d?+d.slice(1):0,w=p?+p:u.number;if(p&&g){let b=w/100;h&&(b=b*(h=="-"?-1:1)+u.number/a.doc.lines),w=Math.round(a.doc.lines*b)}else p&&h&&(w=w*(h=="-"?-1:1)+u.number);let S=a.doc.line(Math.max(1,Math.min(a.doc.lines,w))),k=K.cursor(S.from+Math.max(0,Math.min(v,S.length)));i.dispatch({effects:[vl.of(!1),oe.scrollIntoView(k.from,{y:"center"})],selection:k}),i.focus()}return{dom:n}}const vl=Ne.define(),Cy=It.define({create(){return!0},update(i,e){for(let t of e.effects)t.is(vl)&&(i=t.value);return i},provide:i=>Al.from(i,e=>e?Dd:null)}),XE=i=>{let e=El(i,Dd);if(!e){let t=[vl.of(!0)];i.state.field(Cy,!1)==null&&t.push(Ne.appendConfig.of([Cy,JE])),i.dispatch({effects:t}),e=El(i,Dd)}return e&&e.dom.querySelector("input").select(),!0},JE=oe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),ZE={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},eA=he.define({combine(i){return mi(i,ZE,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function tA(i){return[oA,sA]}const nA=ke.mark({class:"cm-selectionMatch"}),iA=ke.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function My(i,e,t,n){return(t==0||i(e.sliceDoc(t-1,t))!=ot.Word)&&(n==e.doc.length||i(e.sliceDoc(n,n+1))!=ot.Word)}function rA(i,e,t,n){return i(e.sliceDoc(t,t+1))==ot.Word&&i(e.sliceDoc(n-1,n))==ot.Word}const sA=mt.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=i.state.facet(eA),{state:t}=i,n=t.selection;if(n.ranges.length>1)return ke.none;let r=n.main,o,a=null;if(r.empty){if(!e.highlightWordAroundCursor)return ke.none;let h=t.wordAt(r.head);if(!h)return ke.none;a=t.charCategorizer(r.head),o=t.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<e.minSelectionLength||h>200)return ke.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),a=t.charCategorizer(r.head),!(My(a,t,r.from,r.to)&&rA(a,t,r.from,r.to)))return ke.none}else if(o=t.sliceDoc(r.from,r.to),!o)return ke.none}let u=[];for(let h of i.visibleRanges){let p=new io(t.doc,o,h.from,h.to);for(;!p.next().done;){let{from:d,to:g}=p.value;if((!a||My(a,t,d,g))&&(r.empty&&d<=r.from&&g>=r.to?u.push(iA.range(d,g)):(d>=r.to||g<=r.from)&&u.push(nA.range(d,g)),u.length>e.maxMatches))return ke.none}}return ke.set(u)}},{decorations:i=>i.decorations}),oA=oe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),lA=({state:i,dispatch:e})=>{let{selection:t}=i,n=K.create(t.ranges.map(r=>i.wordAt(r.head)||K.cursor(r.head)),t.mainIndex);return n.eq(t)?!1:(e(i.update({selection:n})),!0)};function aA(i,e){let{main:t,ranges:n}=i.selection,r=i.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let a=!1,u=new io(i.doc,e,n[n.length-1].to);;)if(u.next(),u.done){if(a)return null;u=new io(i.doc,e,0,Math.max(0,n[n.length-1].from-1)),a=!0}else{if(a&&n.some(h=>h.from==u.value.from))continue;if(o){let h=i.wordAt(u.value.from);if(!h||h.from!=u.value.from||h.to!=u.value.to)continue}return u.value}}const uA=({state:i,dispatch:e})=>{let{ranges:t}=i.selection;if(t.some(o=>o.from===o.to))return lA({state:i,dispatch:e});let n=i.sliceDoc(t[0].from,t[0].to);if(i.selection.ranges.some(o=>i.sliceDoc(o.from,o.to)!=n))return!1;let r=aA(i,n);return r?(e(i.update({selection:i.selection.addRange(K.range(r.from,r.to),!1),effects:oe.scrollIntoView(r.to)})),!0):!1},lo=he.define({combine(i){return mi(i,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new SA(e),scrollToMatch:e=>oe.scrollIntoView(e)})}});class Vw{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||QE(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new dA(this):new hA(this)}getCursor(e,t=0,n){let r=e.doc?e:_e.create({doc:e});return n==null&&(n=r.doc.length),this.regexp?Hs(this,r,t,n):js(this,r,t,n)}}class Ww{constructor(e){this.spec=e}}function js(i,e,t,n){return new io(e.doc,i.unquoted,t,n,i.caseSensitive?void 0:r=>r.toLowerCase(),i.wholeWord?cA(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function cA(i,e){return(t,n,r,o)=>((o>t||o+r.length<n)&&(o=Math.max(0,t-2),r=i.sliceString(o,Math.min(i.length,n+2))),(e(Zu(r,t-o))!=ot.Word||e(ec(r,t-o))!=ot.Word)&&(e(ec(r,n-o))!=ot.Word||e(Zu(r,n-o))!=ot.Word))}class hA extends Ww{constructor(e){super(e)}nextMatch(e,t,n){let r=js(this.spec,e,n,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=js(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==n?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),a=js(this.spec,e,o,r),u=null;for(;!a.nextOverlapping().done;)u=a.value;if(u)return u;if(o==t)return null;r-=1e4}}prevMatch(e,t,n){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=n)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=js(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let o=js(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function Hs(i,e,t,n){return new jw(e.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?fA(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function Zu(i,e){return i.slice(Bt(i,e,!1),e)}function ec(i,e){return i.slice(e,Bt(i,e))}function fA(i){return(e,t,n)=>!n[0].length||(i(Zu(n.input,n.index))!=ot.Word||i(ec(n.input,n.index))!=ot.Word)&&(i(ec(n.input,n.index+n[0].length))!=ot.Word||i(Zu(n.input,n.index+n[0].length))!=ot.Word)}class dA extends Ww{nextMatch(e,t,n){let r=Hs(this.spec,e,n,e.doc.length).next();return r.done&&(r=Hs(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let o=Math.max(t,n-r*1e4),a=Hs(this.spec,e,o,n),u=null;for(;!a.next().done;)u=a.value;if(u&&(o==t||u.from>o+10))return u;if(o==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let r=n.length;r>0;r--){let o=+n.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+n.slice(r)}return t})}matchAll(e,t){let n=Hs(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let o=Hs(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const Pl=Ne.define(),ap=Ne.define(),yr=It.define({create(i){return new Tf(Td(i).create(),null)},update(i,e){for(let t of e.effects)t.is(Pl)?i=new Tf(t.value.create(),i.panel):t.is(ap)&&(i=new Tf(i.query,t.value?up:null));return i},provide:i=>Al.from(i,e=>e.panel)});class Tf{constructor(e,t){this.query=e,this.panel=t}}const pA=ke.mark({class:"cm-searchMatch"}),mA=ke.mark({class:"cm-searchMatch cm-searchMatch-selected"}),gA=mt.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(yr))}update(i){let e=i.state.field(yr);(e!=i.startState.field(yr)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:i,panel:e}){if(!e||!i.spec.valid)return ke.none;let{view:t}=this,n=new Ni;for(let r=0,o=t.visibleRanges,a=o.length;r<a;r++){let{from:u,to:h}=o[r];for(;r<a-1&&h>o[r+1].from-2*250;)h=o[++r].to;i.highlight(t.state,u,h,(p,d)=>{let g=t.state.selection.ranges.some(v=>v.from==p&&v.to==d);n.add(p,d,g?mA:pA)})}return n.finish()}},{decorations:i=>i.decorations});function Ul(i){return e=>{let t=e.state.field(yr,!1);return t&&t.query.spec.valid?i(e,t):Kw(e)}}const tc=Ul((i,{query:e})=>{let{to:t}=i.state.selection.main,n=e.nextMatch(i.state,t,t);if(!n)return!1;let r=K.single(n.from,n.to),o=i.state.facet(lo);return i.dispatch({selection:r,effects:[cp(i,n),o.scrollToMatch(r.main,i)],userEvent:"select.search"}),$w(i),!0}),nc=Ul((i,{query:e})=>{let{state:t}=i,{from:n}=t.selection.main,r=e.prevMatch(t,n,n);if(!r)return!1;let o=K.single(r.from,r.to),a=i.state.facet(lo);return i.dispatch({selection:o,effects:[cp(i,r),a.scrollToMatch(o.main,i)],userEvent:"select.search"}),$w(i),!0}),yA=Ul((i,{query:e})=>{let t=e.matchAll(i.state,1e3);return!t||!t.length?!1:(i.dispatch({selection:K.create(t.map(n=>K.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),vA=({state:i,dispatch:e})=>{let t=i.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:r}=t.main,o=[],a=0;for(let u=new io(i.doc,i.sliceDoc(n,r));!u.next().done;){if(o.length>1e3)return!1;u.value.from==n&&(a=o.length),o.push(K.range(u.value.from,u.value.to))}return e(i.update({selection:K.create(o,a),userEvent:"select.search.matches"})),!0},Ey=Ul((i,{query:e})=>{let{state:t}=i,{from:n,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,n,n);if(!o)return!1;let a=o,u=[],h,p,d=[];if(a.from==n&&a.to==r&&(p=t.toText(e.getReplacement(a)),u.push({from:a.from,to:a.to,insert:p}),a=e.nextMatch(t,a.from,a.to),d.push(oe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+"."))),a){let g=u.length==0||u[0].from>=o.to?0:o.to-o.from-p.length;h=K.single(a.from-g,a.to-g),d.push(cp(i,a)),d.push(t.facet(lo).scrollToMatch(h.main,i))}return i.dispatch({changes:u,selection:h,effects:d,userEvent:"input.replace"}),!0}),wA=Ul((i,{query:e})=>{if(i.state.readOnly)return!1;let t=e.matchAll(i.state,1e9).map(r=>{let{from:o,to:a}=r;return{from:o,to:a,insert:e.getReplacement(r)}});if(!t.length)return!1;let n=i.state.phrase("replaced $ matches",t.length)+".";return i.dispatch({changes:t,effects:oe.announce.of(n),userEvent:"input.replace.all"}),!0});function up(i){return i.state.facet(lo).createPanel(i)}function Td(i,e){var t,n,r,o,a;let u=i.selection.main,h=u.empty||u.to>u.from+100?"":i.sliceDoc(u.from,u.to);if(e&&!h)return e;let p=i.facet(lo);return new Vw({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:p.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:p.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:p.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:p.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:p.wholeWord})}function Uw(i){let e=El(i,up);return e&&e.dom.querySelector("[main-field]")}function $w(i){let e=Uw(i);e&&e==i.root.activeElement&&e.select()}const Kw=i=>{let e=i.state.field(yr,!1);if(e&&e.panel){let t=Uw(i);if(t&&t!=i.root.activeElement){let n=Td(i.state,e.query.spec);n.valid&&i.dispatch({effects:Pl.of(n)}),t.focus(),t.select()}}else i.dispatch({effects:[ap.of(!0),e?Pl.of(Td(i.state,e.query.spec)):Ne.appendConfig.of(bA)]});return!0},qw=i=>{let e=i.state.field(yr,!1);if(!e||!e.panel)return!1;let t=El(i,up);return t&&t.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:ap.of(!1)}),!0},xA=[{key:"Mod-f",run:Kw,scope:"editor search-panel"},{key:"F3",run:tc,shift:nc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:tc,shift:nc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:qw,scope:"editor search-panel"},{key:"Mod-Shift-l",run:vA},{key:"Mod-Alt-g",run:XE},{key:"Mod-d",run:uA,preventDefault:!0}];class SA{constructor(e){this.view=e;let t=this.query=e.state.field(yr).query.spec;this.commit=this.commit.bind(this),this.searchField=Ge("input",{value:t.search,placeholder:vn(e,"Find"),"aria-label":vn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ge("input",{value:t.replace,placeholder:vn(e,"Replace"),"aria-label":vn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ge("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ge("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ge("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(r,o,a){return Ge("button",{class:"cm-button",name:r,onclick:o,type:"button"},a)}this.dom=Ge("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,n("next",()=>tc(e),[vn(e,"next")]),n("prev",()=>nc(e),[vn(e,"previous")]),n("select",()=>yA(e),[vn(e,"all")]),Ge("label",null,[this.caseField,vn(e,"match case")]),Ge("label",null,[this.reField,vn(e,"regexp")]),Ge("label",null,[this.wordField,vn(e,"by word")]),...e.state.readOnly?[]:[Ge("br"),this.replaceField,n("replace",()=>Ey(e),[vn(e,"replace")]),n("replaceAll",()=>wA(e),[vn(e,"replace all")])],Ge("button",{name:"close",onclick:()=>qw(e),"aria-label":vn(e,"close"),type:"button"},[""])])}commit(){let e=new Vw({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Pl.of(e)}))}keydown(e){AC(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?nc:tc)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Ey(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(Pl)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(lo).top}}function vn(i,e){return i.state.phrase(e)}const Su=30,ku=/[\s\.,:;?!]/;function cp(i,{from:e,to:t}){let n=i.state.doc.lineAt(e),r=i.state.doc.lineAt(t).to,o=Math.max(n.from,e-Su),a=Math.min(r,t+Su),u=i.state.sliceDoc(o,a);if(o!=n.from){for(let h=0;h<Su;h++)if(!ku.test(u[h+1])&&ku.test(u[h])){u=u.slice(h);break}}if(a!=r){for(let h=u.length-1;h>u.length-Su;h--)if(!ku.test(u[h-1])&&ku.test(u[h])){u=u.slice(0,h);break}}return oe.announce.of(`${i.state.phrase("current match")}. ${u} ${i.state.phrase("on line")} ${n.number}.`)}const kA=oe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),bA=[yr,as.low(gA),kA];class Gw{constructor(e,t,n,r){this.state=e,this.pos=t,this.explicit=n,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Kt(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),o=r.search(Yw(e,!1));return o<0?null:{from:n+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function Ay(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function CA(i){let e=Object.create(null),t=Object.create(null);for(let{label:r}of i){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let n=Ay(e)+Ay(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function MA(i){let e=i.map(r=>typeof r=="string"?{label:r}:r),[t,n]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:CA(e);return r=>{let o=r.matchBefore(n);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class Dy{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function es(i){return i.selection.main.from}function Yw(i,e){var t;let{source:n}=i,r=e&&n[0]!="^",o=n[n.length-1]!="$";return!r&&!o?i:new RegExp(`${r?"^":""}(?:${n})${o?"$":""}`,(t=i.flags)!==null&&t!==void 0?t:i.ignoreCase?"i":"")}const Qw=pi.define();function EA(i,e,t,n){let{main:r}=i.selection,o=t-r.from,a=n-r.from;return Object.assign(Object.assign({},i.changeByRange(u=>{if(u!=r&&t!=n&&i.sliceDoc(u.from+o,u.from+a)!=i.sliceDoc(t,n))return{range:u};let h=i.toText(e);return{changes:{from:u.from+o,to:n==r.from?u.to:u.from+a,insert:h},range:K.cursor(u.from+o+h.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Ty=new WeakMap;function AA(i){if(!Array.isArray(i))return i;let e=Ty.get(i);return e||Ty.set(i,e=MA(i)),e}const ic=Ne.define(),Rl=Ne.define();class DA{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=an(e,t),r=li(n);this.chars.push(n);let o=e.slice(t,t+r),a=o.toUpperCase();this.folded.push(an(a==o?o.toLowerCase():a,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:o,byWord:a}=this;if(t.length==1){let N=an(e,0),z=li(N),j=z==e.length?0:-100;if(N!=t[0])if(N==n[0])j+=-200;else return null;return this.ret(j,[0,z])}let u=e.indexOf(this.pattern);if(u==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=t.length,p=0;if(u<0){for(let N=0,z=Math.min(e.length,200);N<z&&p<h;){let j=an(e,N);(j==t[p]||j==n[p])&&(r[p++]=N),N+=li(j)}if(p<h)return null}let d=0,g=0,v=!1,w=0,S=-1,k=-1,b=/[a-z]/.test(e),A=!0;for(let N=0,z=Math.min(e.length,200),j=0;N<z&&g<h;){let F=an(e,N);u<0&&(d<h&&F==t[d]&&(o[d++]=N),w<h&&(F==t[w]||F==n[w]?(w==0&&(S=N),k=N+1,w++):w=0));let $,M=F<255?F>=48&&F<=57||F>=97&&F<=122?2:F>=65&&F<=90?1:0:($=Fd(F))!=$.toLowerCase()?1:$!=$.toUpperCase()?2:0;(!N||M==1&&b||j==0&&M!=0)&&(t[g]==F||n[g]==F&&(v=!0)?a[g++]=N:a.length&&(A=!1)),j=M,N+=li(F)}return g==h&&a[0]==0&&A?this.result(-100+(v?-200:0),a,e):w==h&&S==0?this.ret(-200-e.length+(k==e.length?0:-100),[0,k]):u>-1?this.ret(-700-e.length,[u,u+this.pattern.length]):w==h?this.ret(-900-e.length,[S,k]):g==h?this.result(-100+(v?-200:0)+-700+(A?0:-1100),a,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,n){let r=[],o=0;for(let a of t){let u=a+(this.astral?li(an(n,a)):1);o&&r[o-1]==a?r[o-1]=u:(r[o++]=a,r[o++]=u)}return this.ret(e-n.length,r)}}class TA{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const Dt=he.define({combine(i){return mi(i,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:PA,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>Py(e(n),t(n)),optionClass:(e,t)=>n=>Py(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Py(i,e){return i?e?i+" "+e:i:e}function PA(i,e,t,n,r,o){let a=i.textDirection==it.RTL,u=a,h=!1,p="top",d,g,v=e.left-r.left,w=r.right-e.right,S=n.right-n.left,k=n.bottom-n.top;if(u&&v<Math.min(S,w)?u=!1:!u&&w<Math.min(S,v)&&(u=!0),S<=(u?v:w))d=Math.max(r.top,Math.min(t.top,r.bottom-k))-e.top,g=Math.min(400,u?v:w);else{h=!0,g=Math.min(400,(a?e.right:r.right-e.left)-30);let N=r.bottom-e.bottom;N>=k||N>e.top?d=t.bottom-e.top:(p="bottom",d=e.bottom-t.top)}let b=(e.bottom-e.top)/o.offsetHeight,A=(e.right-e.left)/o.offsetWidth;return{style:`${p}: ${d/b}px; max-width: ${g/A}px`,class:"cm-completionInfo-"+(h?a?"left-narrow":"right-narrow":u?"left":"right")}}function RA(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,r,o){let a=document.createElement("span");a.className="cm-completionLabel";let u=t.displayLabel||t.label,h=0;for(let p=0;p<o.length;){let d=o[p++],g=o[p++];d>h&&a.appendChild(document.createTextNode(u.slice(h,d)));let v=a.appendChild(document.createElement("span"));v.appendChild(document.createTextNode(u.slice(d,g))),v.className="cm-completionMatchedText",h=g}return h<u.length&&a.appendChild(document.createTextNode(u.slice(h))),a},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function Pf(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let n=Math.floor((i-e)/t);return{from:i-(n+1)*t,to:i-n*t}}class OA{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:a}=r.open,u=e.state.facet(Dt);this.optionContent=RA(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=Pf(o.length,a,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:p}=e.state.field(t).open;for(let d=h.target,g;d&&d!=this.dom;d=d.parentNode)if(d.nodeName=="LI"&&(g=/-(\d+)$/.exec(d.id))&&+g[1]<p.length){this.applyCompletion(e,p[+g[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let p=e.state.field(this.stateField,!1);p&&p.tooltip&&e.state.facet(Dt).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:Rl.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=r){let{options:o,selected:a,disabled:u}=n.open;(!r.open||r.open.options!=o)&&(this.range=Pf(o.length,a,e.state.facet(Dt).maxRenderedOptions),this.showOptions(o,n.id)),this.updateSel(),u!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!u)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Pf(t.options.length,t.selected,this.view.state.facet(Dt).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,n)}).catch(a=>hn(this.view.state,a,"completion info")):this.addInfoPane(o,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;n.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)n.nodeName!="LI"||!n.id?r--:r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&NA(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Dt).positionInfo(this.view,t,r,n,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",a=>{a.target==r&&a.preventDefault()});let o=null;for(let a=n.from;a<n.to;a++){let{completion:u,match:h}=e[a],{section:p}=u;if(p){let v=typeof p=="string"?p:p.name;if(v!=o&&(a>n.from||n.from==0))if(o=v,typeof p!="string"&&p.header)r.appendChild(p.header(p));else{let w=r.appendChild(document.createElement("completion-section"));w.textContent=v}}const d=r.appendChild(document.createElement("li"));d.id=t+"-"+a,d.setAttribute("role","option");let g=this.optionClass(u);g&&(d.className=g);for(let v of this.optionContent){let w=v(u,this.view.state,this.view,h);w&&d.appendChild(w)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function LA(i,e){return t=>new OA(t,i,e)}function NA(i,e){let t=i.getBoundingClientRect(),n=e.getBoundingClientRect(),r=t.height/i.offsetHeight;n.top<t.top?i.scrollTop-=(t.top-n.top)/r:n.bottom>t.bottom&&(i.scrollTop+=(n.bottom-t.bottom)/r)}function Ry(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function BA(i,e){let t=[],n=null,r=p=>{t.push(p);let{section:d}=p.completion;if(d){n||(n=[]);let g=typeof d=="string"?d:d.name;n.some(v=>v.name==g)||n.push(typeof d=="string"?{name:g}:d)}},o=e.facet(Dt);for(let p of i)if(p.hasResult()){let d=p.result.getMatch;if(p.result.filter===!1)for(let g of p.result.options)r(new Dy(g,p.source,d?d(g):[],1e9-t.length));else{let g=e.sliceDoc(p.from,p.to),v,w=o.filterStrict?new TA(g):new DA(g);for(let S of p.result.options)if(v=w.match(S.label)){let k=S.displayLabel?d?d(S,v.matched):[]:v.matched;r(new Dy(S,p.source,k,v.score+(S.boost||0)))}}}if(n){let p=Object.create(null),d=0,g=(v,w)=>{var S,k;return((S=v.rank)!==null&&S!==void 0?S:1e9)-((k=w.rank)!==null&&k!==void 0?k:1e9)||(v.name<w.name?-1:1)};for(let v of n.sort(g))d-=1e5,p[v.name]=d;for(let v of t){let{section:w}=v.completion;w&&(v.score+=p[typeof w=="string"?w:w.name])}}let a=[],u=null,h=o.compareCompletions;for(let p of t.sort((d,g)=>g.score-d.score||h(d.completion,g.completion))){let d=p.completion;!u||u.label!=d.label||u.detail!=d.detail||u.type!=null&&d.type!=null&&u.type!=d.type||u.apply!=d.apply||u.boost!=d.boost?a.push(p):Ry(p.completion)>Ry(u)&&(a[a.length-1]=p),u=p.completion}return a}class Ws{constructor(e,t,n,r,o,a){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=o,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ws(this.options,Oy(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,o,a){if(r&&!a&&e.some(p=>p.isPending))return r.setDisabled();let u=BA(e,t);if(!u.length)return r&&e.some(p=>p.isPending)?r.setDisabled():null;let h=t.facet(Dt).selectOnOpen?0:-1;if(r&&r.selected!=h&&r.selected!=-1){let p=r.options[r.selected].completion;for(let d=0;d<u.length;d++)if(u[d].completion==p){h=d;break}}return new Ws(u,Oy(n,h),{pos:e.reduce((p,d)=>d.hasResult()?Math.min(p,d.from):p,1e8),create:HA,above:o.aboveCursor},r?r.timestamp:Date.now(),h,!1)}map(e){return new Ws(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ws(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class rc{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new rc(_A,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(Dt),o=(n.override||t.languageDataAt("autocomplete",es(t)).map(AA)).map(h=>(this.active.find(d=>d.source==h)||new Rn(h,this.active.some(d=>d.state!=0)?1:0)).update(e,n));o.length==this.active.length&&o.every((h,p)=>h==this.active[p])&&(o=this.active);let a=this.open,u=e.effects.some(h=>h.is(hp));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(h=>h.hasResult()&&e.changes.touchesRange(h.from,h.to))||!IA(o,this.active)||u?a=Ws.build(o,t,this.id,a,n,u):a&&a.disabled&&!o.some(h=>h.isPending)&&(a=null),!a&&o.every(h=>!h.isPending)&&o.some(h=>h.hasResult())&&(o=o.map(h=>h.hasResult()?new Rn(h.source,0):h));for(let h of e.effects)h.is(Jw)&&(a=a&&a.setSelected(h.value,this.id));return o==this.active&&a==this.open?this:new rc(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?FA:zA}}function IA(i,e){if(i==e)return!0;for(let t=0,n=0;;){for(;t<i.length&&!i[t].hasResult();)t++;for(;n<e.length&&!e[n].hasResult();)n++;let r=t==i.length,o=n==e.length;if(r||o)return r==o;if(i[t++].result!=e[n++].result)return!1}}const FA={"aria-autocomplete":"list"},zA={};function Oy(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}const _A=[];function Xw(i,e){if(i.isUserEvent("input.complete")){let n=i.annotation(Qw);if(n&&e.activateOnCompletion(n))return 12}let t=i.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:i.isUserEvent("delete.backward")?2:i.selection?8:i.docChanged?16:0}class Rn{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let n=Xw(e,t),r=this;(n&8||n&16&&this.touches(e))&&(r=new Rn(r.source,0)),n&4&&r.state==0&&(r=new Rn(this.source,1)),r=r.updateFor(e,n);for(let o of e.effects)if(o.is(ic))r=new Rn(r.source,1,o.value);else if(o.is(Rl))r=new Rn(r.source,0);else if(o.is(hp))for(let a of o.value)a.source==r.source&&(r=a);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(es(e.state))}}class Ys extends Rn{constructor(e,t,n,r,o,a){super(e,3,t),this.limit=n,this.result=r,this.from=o,this.to=a}hasResult(){return!0}updateFor(e,t){var n;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),u=es(e.state);if(u>a||!r||t&2&&(es(e.startState)==this.from||u<this.limit))return new Rn(this.source,t&4?1:0);let h=e.changes.mapPos(this.limit);return jA(r.validFor,e.state,o,a)?new Ys(this.source,this.explicit,h,r,o,a):r.update&&(r=r.update(r,o,a,new Gw(e.state,u,!1)))?new Ys(this.source,this.explicit,h,r,r.from,(n=r.to)!==null&&n!==void 0?n:es(e.state)):new Rn(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ys(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Rn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function jA(i,e,t,n){if(!i)return!1;let r=e.sliceDoc(t,n);return typeof i=="function"?i(r,t,n,e):Yw(i,!0).test(r)}const hp=Ne.define({map(i,e){return i.map(t=>t.map(e))}}),Jw=Ne.define(),cn=It.define({create(){return rc.start()},update(i,e){return i.update(e)},provide:i=>[Jd.from(i,e=>e.tooltip),oe.contentAttributes.from(i,e=>e.attrs)]});function fp(i,e){const t=e.completion.apply||e.completion.label;let n=i.state.field(cn).active.find(r=>r.source==e.source);return n instanceof Ys?(typeof t=="string"?i.dispatch(Object.assign(Object.assign({},EA(i.state,t,n.from,n.to)),{annotations:Qw.of(e.completion)})):t(i,e.completion,n.from,n.to),!0):!1}const HA=LA(cn,fp);function bu(i,e="option"){return t=>{let n=t.state.field(cn,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(Dt).interactionDelay)return!1;let r=1,o;e=="page"&&(o=F1(t,n.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=n.open.options,u=n.open.selected>-1?n.open.selected+r*(i?1:-1):i?0:a-1;return u<0?u=e=="page"?0:a-1:u>=a&&(u=e=="page"?a-1:0),t.dispatch({effects:Jw.of(u)}),!0}}const VA=i=>{let e=i.state.field(cn,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<i.state.facet(Dt).interactionDelay?!1:fp(i,e.open.options[e.open.selected])},Ly=i=>i.state.field(cn,!1)?(i.dispatch({effects:ic.of(!0)}),!0):!1,WA=i=>{let e=i.state.field(cn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:Rl.of(null)}),!0)};class UA{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const $A=50,KA=1e3,qA=mt.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of i.state.field(cn).active)e.isPending&&this.startQuery(e)}update(i){let e=i.state.field(cn),t=i.state.facet(Dt);if(!i.selectionSet&&!i.docChanged&&i.startState.field(cn)==e)return;let n=i.transactions.some(o=>{let a=Xw(o,t);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(n||a.context.abortOnDocChange&&i.docChanged||a.updates.length+i.transactions.length>$A&&Date.now()-a.time>KA){for(let u of a.context.abortListeners)try{u()}catch(h){hn(this.view.state,h)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...i.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),i.transactions.some(o=>o.effects.some(a=>a.is(ic)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of i.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:i}=this.view,e=i.field(cn);for(let t of e.active)t.isPending&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Dt).updateSyncTime))}startQuery(i){let{state:e}=this.view,t=es(e),n=new Gw(e,t,i.explicit,this.view),r=new UA(i,n);this.running.push(r),Promise.resolve(i.source(n)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Rl.of(null)}),hn(this.view.state,o)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Dt).updateSyncTime))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Dt),n=this.view.state.field(cn);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let u=es(o.updates.length?o.updates[0].startState:this.view.state),h=Math.min(u,o.done.from+(o.active.explicit?0:1)),p=new Ys(o.active.source,o.active.explicit,h,o.done,o.done.from,(i=o.done.to)!==null&&i!==void 0?i:u);for(let d of o.updates)p=p.update(d,t);if(p.hasResult()){e.push(p);continue}}let a=n.active.find(u=>u.source==o.active.source);if(a&&a.isPending)if(o.done==null){let u=new Rn(o.active.source,0);for(let h of o.updates)u=u.update(h,t);u.isPending||e.push(u)}else this.startQuery(a)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:hp.of(e)})}},{eventHandlers:{blur(i){let e=this.view.state.field(cn,!1);if(e&&e.tooltip&&this.view.state.facet(Dt).closeOnBlur){let t=e.open&&F1(this.view,e.open.tooltip);(!t||!t.dom.contains(i.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Rl.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:ic.of(!1)}),20),this.composing=0}}}),GA=typeof navigator=="object"&&/Win/.test(navigator.platform),YA=as.highest(oe.domEventHandlers({keydown(i,e){let t=e.state.field(cn,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||i.key.length>1||i.ctrlKey&&!(GA&&i.altKey)||i.metaKey)return!1;let n=t.open.options[t.open.selected],r=t.active.find(a=>a.source==n.source),o=n.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(i.key)>-1&&fp(e,n),!1}})),QA=oe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ol={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Qr=Ne.define({map(i,e){let t=e.mapPos(i,-1,Xt.TrackAfter);return t??void 0}}),dp=new class extends ts{};dp.startSide=1;dp.endSide=-1;const Zw=It.define({create(){return Ue.empty},update(i,e){if(i=i.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);i=i.update({filter:n=>n>=t.from&&n<=t.to})}for(let t of e.effects)t.is(Qr)&&(i=i.update({add:[dp.range(t.value,t.value+1)]}));return i}});function XA(){return[ZA,Zw]}const Rf="()[]{}<>";function ex(i){for(let e=0;e<Rf.length;e+=2)if(Rf.charCodeAt(e)==i)return Rf.charAt(e+1);return Fd(i<128?i:i+1)}function tx(i,e){return i.languageDataAt("closeBrackets",e)[0]||Ol}const JA=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ZA=oe.inputHandler.of((i,e,t,n)=>{if((JA?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(n.length>2||n.length==2&&li(an(n,0))==1||e!=r.from||t!=r.to)return!1;let o=nD(i.state,n);return o?(i.dispatch(o),!0):!1}),eD=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=tx(i,i.selection.main.head).brackets||Ol.brackets,r=null,o=i.changeByRange(a=>{if(a.empty){let u=iD(i.doc,a.head);for(let h of n)if(h==u&&vc(i.doc,a.head)==ex(an(h,0)))return{changes:{from:a.head-h.length,to:a.head+h.length},range:K.cursor(a.head-h.length)}}return{range:r=a}});return r||e(i.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},tD=[{key:"Backspace",run:eD}];function nD(i,e){let t=tx(i,i.selection.main.head),n=t.brackets||Ol.brackets;for(let r of n){let o=ex(an(r,0));if(e==r)return o==r?oD(i,r,n.indexOf(r+r+r)>-1,t):rD(i,r,o,t.before||Ol.before);if(e==o&&nx(i,i.selection.main.from))return sD(i,r,o)}return null}function nx(i,e){let t=!1;return i.field(Zw).between(0,i.doc.length,n=>{n==e&&(t=!0)}),t}function vc(i,e){let t=i.sliceString(e,e+2);return t.slice(0,li(an(t,0)))}function iD(i,e){let t=i.sliceString(e-2,e);return li(an(t,0))==t.length?t:t.slice(1)}function rD(i,e,t,n){let r=null,o=i.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Qr.of(a.to+e.length),range:K.range(a.anchor+e.length,a.head+e.length)};let u=vc(i.doc,a.head);return!u||/\s/.test(u)||n.indexOf(u)>-1?{changes:{insert:e+t,from:a.head},effects:Qr.of(a.head+e.length),range:K.cursor(a.head+e.length)}:{range:r=a}});return r?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function sD(i,e,t){let n=null,r=i.changeByRange(o=>o.empty&&vc(i.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:K.cursor(o.head+t.length)}:n={range:o});return n?null:i.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function oD(i,e,t,n){let r=n.stringPrefixes||Ol.stringPrefixes,o=null,a=i.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:Qr.of(u.to+e.length),range:K.range(u.anchor+e.length,u.head+e.length)};let h=u.head,p=vc(i.doc,h),d;if(p==e){if(Ny(i,h))return{changes:{insert:e+e,from:h},effects:Qr.of(h+e.length),range:K.cursor(h+e.length)};if(nx(i,h)){let v=t&&i.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+v.length,insert:v},range:K.cursor(h+v.length)}}}else{if(t&&i.sliceDoc(h-2*e.length,h)==e+e&&(d=By(i,h-2*e.length,r))>-1&&Ny(i,d))return{changes:{insert:e+e+e+e,from:h},effects:Qr.of(h+e.length),range:K.cursor(h+e.length)};if(i.charCategorizer(h)(p)!=ot.Word&&By(i,h,r)>-1&&!lD(i,h,e,r))return{changes:{insert:e+e,from:h},effects:Qr.of(h+e.length),range:K.cursor(h+e.length)}}return{range:o=u}});return o?null:i.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Ny(i,e){let t=Kt(i).resolveInner(e+1);return t.parent&&t.from==e}function lD(i,e,t,n){let r=Kt(i).resolveInner(e,-1),o=n.reduce((a,u)=>Math.max(a,u.length),0);for(let a=0;a<5;a++){let u=i.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),h=u.indexOf(t);if(!h||h>-1&&n.indexOf(u.slice(0,h))>-1){let d=r.firstChild;for(;d&&d.from==r.from&&d.to-d.from>t.length+h;){if(i.sliceDoc(d.to-t.length,d.to)==t)return!1;d=d.firstChild}return!0}let p=r.to==e&&r.parent;if(!p)break;r=p}return!1}function By(i,e,t){let n=i.charCategorizer(e);if(n(i.sliceDoc(e-1,e))!=ot.Word)return e;for(let r of t){let o=e-r.length;if(i.sliceDoc(o,e)==r&&n(i.sliceDoc(o-1,o))!=ot.Word)return o}return-1}function aD(i={}){return[YA,cn,Dt.of(i),qA,uD,QA]}const ix=[{key:"Ctrl-Space",run:Ly},{mac:"Alt-`",run:Ly},{key:"Escape",run:WA},{key:"ArrowDown",run:bu(!0)},{key:"ArrowUp",run:bu(!1)},{key:"PageDown",run:bu(!0,"page")},{key:"PageUp",run:bu(!1,"page")},{key:"Enter",run:VA}],uD=as.highest(uc.computeN([Dt],i=>i.facet(Dt).defaultKeymap?[ix]:[]));class Iy{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class Gr{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=n.facet(Ll).markerFilter;r&&(e=r(e,n));let o=e.slice().sort((d,g)=>d.from-g.from||d.to-g.to),a=new Ni,u=[],h=0;for(let d=0;;){let g=d==o.length?null:o[d];if(!g&&!u.length)break;let v,w;for(u.length?(v=h,w=u.reduce((k,b)=>Math.min(k,b.to),g&&g.from>v?g.from:1e8)):(v=g.from,w=g.to,u.push(g),d++);d<o.length;){let k=o[d];if(k.from==v&&(k.to>k.from||k.to==v))u.push(k),d++,w=Math.min(k.to,w);else{w=Math.min(k.from,w);break}}let S=kD(u);if(u.some(k=>k.from==k.to||k.from==k.to-1&&n.doc.lineAt(k.from).to==k.from))a.add(v,v,ke.widget({widget:new vD(S),diagnostics:u.slice()}));else{let k=u.reduce((b,A)=>A.markClass?b+" "+A.markClass:b,"");a.add(v,w,ke.mark({class:"cm-lintRange cm-lintRange-"+S+k,diagnostics:u.slice(),inclusiveEnd:u.some(b=>b.to>w)}))}h=w;for(let k=0;k<u.length;k++)u[k].to<=h&&u.splice(k--,1)}let p=a.finish();return new Gr(p,t,ro(p))}}function ro(i,e=null,t=0){let n=null;return i.between(t,1e9,(r,o,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!n)n=new Iy(r,o,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new Iy(n.from,o,n.diagnostic)}}),n}function cD(i,e){let t=e.pos,n=e.end||t,r=i.state.facet(Ll).hideOn(i,t,n);if(r!=null)return r;let o=i.startState.doc.lineAt(e.pos);return!!(i.effects.some(a=>a.is(rx))||i.changes.touchesRange(o.from,Math.max(o.to,n)))}function hD(i,e){return i.field(xn,!1)?e:e.concat(Ne.appendConfig.of(bD))}const rx=Ne.define(),pp=Ne.define(),sx=Ne.define(),xn=It.define({create(){return new Gr(ke.none,null,null)},update(i,e){if(e.docChanged&&i.diagnostics.size){let t=i.diagnostics.map(e.changes),n=null,r=i.panel;if(i.selected){let o=e.changes.mapPos(i.selected.from,1);n=ro(t,i.selected.diagnostic,o)||ro(t,null,o)}!t.size&&r&&e.state.facet(Ll).autoPanel&&(r=null),i=new Gr(t,r,n)}for(let t of e.effects)if(t.is(rx)){let n=e.state.facet(Ll).autoPanel?t.value.length?Nl.open:null:i.panel;i=Gr.init(t.value,n,e.state)}else t.is(pp)?i=new Gr(i.diagnostics,t.value?Nl.open:null,i.selected):t.is(sx)&&(i=new Gr(i.diagnostics,i.panel,t.value));return i},provide:i=>[Al.from(i,e=>e.panel),oe.decorations.from(i,e=>e.diagnostics)]}),fD=ke.mark({class:"cm-lintRange cm-lintRange-active"});function dD(i,e,t){let{diagnostics:n}=i.state.field(xn),r,o=-1,a=-1;n.between(e-(t<0?1:0),e+(t>0?1:0),(h,p,{spec:d})=>{if(e>=h&&e<=p&&(h==p||(e>h||t>0)&&(e<p||t<0)))return r=d.diagnostics,o=h,a=p,!1});let u=i.state.facet(Ll).tooltipFilter;return r&&u&&(r=u(r,i.state)),r?{pos:o,end:a,above:i.state.doc.lineAt(o).to<a,create(){return{dom:pD(i,r)}}}:null}function pD(i,e){return Ge("ul",{class:"cm-tooltip-lint"},e.map(t=>lx(i,t,!1)))}const mD=i=>{let e=i.state.field(xn,!1);(!e||!e.panel)&&i.dispatch({effects:hD(i.state,[pp.of(!0)])});let t=El(i,Nl.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Fy=i=>{let e=i.state.field(xn,!1);return!e||!e.panel?!1:(i.dispatch({effects:pp.of(!1)}),!0)},gD=i=>{let e=i.state.field(xn,!1);if(!e)return!1;let t=i.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},yD=[{key:"Mod-Shift-m",run:mD,preventDefault:!0},{key:"F8",run:gD}],Ll=he.define({combine(i){return Object.assign({sources:i.map(e=>e.source).filter(e=>e!=null)},mi(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function ox(i){let e=[];if(i)e:for(let{name:t}of i){for(let n=0;n<t.length;n++){let r=t[n];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function lx(i,e,t){var n;let r=t?ox(e.actions):[];return Ge("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ge("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(i):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((o,a)=>{let u=!1,h=v=>{if(v.preventDefault(),u)return;u=!0;let w=ro(i.state.field(xn).diagnostics,e);w&&o.apply(i,w.from,w.to)},{name:p}=o,d=r[a]?p.indexOf(r[a]):-1,g=d<0?p:[p.slice(0,d),Ge("u",p.slice(d,d+1)),p.slice(d+1)];return Ge("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${p}${d<0?"":` (access key "${r[a]})"`}.`},g)}),e.source&&Ge("div",{class:"cm-diagnosticSource"},e.source))}class vD extends Fi{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Ge("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class zy{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=lx(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Nl{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)Fy(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=ox(o.actions);for(let u=0;u<a.length;u++)if(a[u].toUpperCase().charCodeAt(0)==r.keyCode){let h=ro(this.view.state.field(xn).diagnostics,o);h&&o.actions[u].apply(e,h.from,h.to)}}else return;r.preventDefault()},n=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Ge("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=Ge("div",{class:"cm-panel-lint"},this.list,Ge("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Fy(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(xn).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(xn),n=0,r=!1,o=null,a=new Set;for(e.between(0,this.view.state.doc.length,(u,h,{spec:p})=>{for(let d of p.diagnostics){if(a.has(d))continue;a.add(d);let g=-1,v;for(let w=n;w<this.items.length;w++)if(this.items[w].diagnostic==d){g=w;break}g<0?(v=new zy(this.view,d),this.items.splice(n,0,v),r=!0):(v=this.items[g],g>n&&(this.items.splice(n,g-n),r=!0)),t&&v.diagnostic==t.diagnostic?v.dom.hasAttribute("aria-selected")||(v.dom.setAttribute("aria-selected","true"),o=v):v.dom.hasAttribute("aria-selected")&&v.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new zy(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:u,panel:h})=>{let p=h.height/this.list.offsetHeight;u.top<h.top?this.list.scrollTop-=(h.top-u.top)/p:u.bottom>h.bottom&&(this.list.scrollTop+=(u.bottom-h.bottom)/p)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(xn),n=ro(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:sx.of(n)})}static open(e){return new Nl(e)}}function wD(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function Cu(i){return wD(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const xD=oe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Cu("#d11")},".cm-lintRange-warning":{backgroundImage:Cu("orange")},".cm-lintRange-info":{backgroundImage:Cu("#999")},".cm-lintRange-hint":{backgroundImage:Cu("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function SD(i){return i=="error"?4:i=="warning"?3:i=="info"?2:1}function kD(i){let e="hint",t=1;for(let n of i){let r=SD(n.severity);r>t&&(t=r,e=n.severity)}return e}const bD=[xn,oe.decorations.compute([xn],i=>{let{selected:e,panel:t}=i.field(xn);return!e||!t||e.from==e.to?ke.none:ke.set([fD.range(e.from,e.to)])}),m2(dD,{hideOn:cD}),xD];function Pd(){return Pd=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Pd.apply(null,arguments)}function CD(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}var _y=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(tD)),e.defaultKeymap!==!1&&(n=n.concat(GE)),e.searchKeymap!==!1&&(n=n.concat(xA)),e.historyKeymap!==!1&&(n=n.concat(iE)),e.foldKeymap!==!1&&(n=n.concat(yM)),e.completionKeymap!==!1&&(n=n.concat(ix)),e.lintKeymap!==!1&&(n=n.concat(yD));var r=[];return e.lineNumbers!==!1&&r.push(E2()),e.highlightActiveLineGutter!==!1&&r.push(T2()),e.highlightSpecialChars!==!1&&r.push(UC()),e.history!==!1&&r.push(GM()),e.foldGutter!==!1&&r.push(SM()),e.drawSelection!==!1&&r.push(LC()),e.dropCursor!==!1&&r.push(zC()),e.allowMultipleSelections!==!1&&r.push(_e.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(lM()),e.syntaxHighlighting!==!1&&r.push(nw(MM,{fallback:!0})),e.bracketMatching!==!1&&r.push(OM()),e.closeBrackets!==!1&&r.push(XA()),e.autocompletion!==!1&&r.push(aD()),e.rectangularSelection!==!1&&r.push(r2()),t!==!1&&r.push(l2()),e.highlightActiveLine!==!1&&r.push(QC()),e.highlightSelectionMatches!==!1&&r.push(tA()),e.tabSize&&typeof e.tabSize=="number"&&r.push(hc.of(" ".repeat(e.tabSize))),r.concat([uc.of(n.flat())]).filter(Boolean)};const MD="#e5c07b",jy="#e06c75",ED="#56b6c2",AD="#ffffff",Bu="#abb2bf",Rd="#7d8799",DD="#61afef",TD="#98c379",Hy="#d19a66",PD="#c678dd",RD="#21252b",Vy="#2c313a",Wy="#282c34",Of="#353a42",OD="#3E4451",Uy="#528bff",LD=oe.theme({"&":{color:Bu,backgroundColor:Wy},".cm-content":{caretColor:Uy},".cm-cursor, .cm-dropCursor":{borderLeftColor:Uy},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:OD},".cm-panels":{backgroundColor:RD,color:Bu},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Wy,color:Rd,border:"none"},".cm-activeLineGutter":{backgroundColor:Vy},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Of},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Of,borderBottomColor:Of},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Vy,color:Bu}}},{dark:!0}),ND=Vl.define([{tag:H.keyword,color:PD},{tag:[H.name,H.deleted,H.character,H.propertyName,H.macroName],color:jy},{tag:[H.function(H.variableName),H.labelName],color:DD},{tag:[H.color,H.constant(H.name),H.standard(H.name)],color:Hy},{tag:[H.definition(H.name),H.separator],color:Bu},{tag:[H.typeName,H.className,H.number,H.changed,H.annotation,H.modifier,H.self,H.namespace],color:MD},{tag:[H.operator,H.operatorKeyword,H.url,H.escape,H.regexp,H.link,H.special(H.string)],color:ED},{tag:[H.meta,H.comment],color:Rd},{tag:H.strong,fontWeight:"bold"},{tag:H.emphasis,fontStyle:"italic"},{tag:H.strikethrough,textDecoration:"line-through"},{tag:H.link,color:Rd,textDecoration:"underline"},{tag:H.heading,fontWeight:"bold",color:jy},{tag:[H.atom,H.bool,H.special(H.variableName)],color:Hy},{tag:[H.processingInstruction,H.string,H.inserted],color:TD},{tag:H.invalid,color:AD}]),BD=[LD,nw(ND)];var ID=oe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),FD=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:r=!1,theme:o="light",placeholder:a="",basicSetup:u=!0}=e,h=[];switch(t&&h.unshift(uc.of([YE])),u&&(typeof u=="boolean"?h.unshift(_y()):h.unshift(_y(u))),a&&h.unshift(e2(a)),o){case"light":h.push(ID);break;case"dark":h.push(BD);break;case"none":break;default:h.push(o);break}return n===!1&&h.push(oe.editable.of(!1)),r&&h.push(_e.readOnly.of(!0)),[...h]},zD=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(e=>i.state.sliceDoc(e.from,e.to)),selectedText:i.state.selection.ranges.some(e=>!e.empty)}),$y=pi.define(),_D=[];function jD(i){var{value:e,selection:t,onChange:n,onStatistics:r,onCreateEditor:o,onUpdate:a,extensions:u=_D,autoFocus:h,theme:p="light",height:d=null,minHeight:g=null,maxHeight:v=null,width:w=null,minWidth:S=null,maxWidth:k=null,placeholder:b="",editable:A=!0,readOnly:N=!1,indentWithTab:z=!0,basicSetup:j=!0,root:F,initialState:$}=i,[M,ne]=W.useState(),[Y,re]=W.useState(),[se,te]=W.useState(),fe=oe.theme({"&":{height:d,minHeight:g,maxHeight:v,width:w,minWidth:S,maxWidth:k},"& .cm-scroller":{height:"100% !important"}}),pe=oe.updateListener.of(ve=>{if(ve.docChanged&&typeof n=="function"&&!ve.transactions.some(Z=>Z.annotation($y))){var U=ve.state.doc,ee=U.toString();n(ee,ve)}r&&r(zD(ve))}),Se=FD({theme:p,editable:A,readOnly:N,placeholder:b,indentWithTab:z,basicSetup:j}),Te=[pe,fe,...Se];return a&&typeof a=="function"&&Te.push(oe.updateListener.of(a)),Te=Te.concat(u),W.useLayoutEffect(()=>{if(M&&!se){var ve={doc:e,selection:t,extensions:Te},U=$?_e.fromJSON($.json,ve,$.fields):_e.create(ve);if(te(U),!Y){var ee=new oe({state:U,parent:M,root:F});re(ee),o&&o(ee,U)}}return()=>{Y&&(te(void 0),re(void 0))}},[M,se]),W.useEffect(()=>{i.container&&ne(i.container)},[i.container]),W.useEffect(()=>()=>{Y&&(Y.destroy(),re(void 0))},[Y]),W.useEffect(()=>{h&&Y&&Y.focus()},[h,Y]),W.useEffect(()=>{Y&&Y.dispatch({effects:Ne.reconfigure.of(Te)})},[p,u,d,g,v,w,S,k,b,A,N,z,j,n,a]),W.useEffect(()=>{if(e!==void 0){var ve=Y?Y.state.doc.toString():"";Y&&e!==ve&&Y.dispatch({changes:{from:0,to:ve.length,insert:e||""},annotations:[$y.of(!0)]})}},[e,Y]),{state:se,setState:te,view:Y,setView:re,container:M,setContainer:ne}}var HD=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ax=W.forwardRef((i,e)=>{var{className:t,value:n="",selection:r,extensions:o=[],onChange:a,onStatistics:u,onCreateEditor:h,onUpdate:p,autoFocus:d,theme:g="light",height:v,minHeight:w,maxHeight:S,width:k,minWidth:b,maxWidth:A,basicSetup:N,placeholder:z,indentWithTab:j,editable:F,readOnly:$,root:M,initialState:ne}=i,Y=CD(i,HD),re=W.useRef(null),{state:se,view:te,container:fe,setContainer:pe}=jD({root:M,value:n,autoFocus:d,theme:g,height:v,minHeight:w,maxHeight:S,width:k,minWidth:b,maxWidth:A,basicSetup:N,placeholder:z,indentWithTab:j,editable:F,readOnly:$,selection:r,onChange:a,onStatistics:u,onCreateEditor:h,onUpdate:p,extensions:o,initialState:ne});W.useImperativeHandle(e,()=>({editor:re.current,state:se,view:te}),[re,fe,se,te]);var Se=W.useCallback(ve=>{re.current=ve,pe(ve)},[pe]);if(typeof n!="string")throw new Error("value must be typeof string but got "+typeof n);var Te=typeof g=="string"?"cm-theme-"+g:"cm-theme";return O.jsx("div",Pd({ref:Se,className:""+Te+(t?" "+t:"")},Y))});ax.displayName="CodeMirror";function VD(){return O.jsx("div",{className:"center-container",children:O.jsx(ax,{value,height:"400px",extensions:[javascript()],theme:oneDark,basicSetup:{lineNumbers:!0},onChange:i=>onChange==null?void 0:onChange(i)})})}var ux=mv();const WD=pv(ux),UD=dv({__proto__:null,default:WD},[ux]);/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ut(){return ut=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ut.apply(this,arguments)}var vt;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(vt||(vt={}));const Ky="popstate";function $D(i){i===void 0&&(i={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=zi(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Bl("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,p=h.indexOf("#");u=p===-1?h:h.slice(0,p)}return u+"#"+(typeof o=="string"?o:ls(o))}function n(r,o){os(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return qD(e,t,n,i)}function Fe(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function os(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KD(){return Math.random().toString(36).substr(2,8)}function qy(i,e){return{usr:i.state,key:i.key,idx:e}}function Bl(i,e,t,n){return t===void 0&&(t=null),ut({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?zi(e):e,{state:t,key:e&&e.key||n||KD()})}function ls(i){let{pathname:e="/",search:t="",hash:n=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function zi(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substr(n),i=i.substr(0,n)),i&&(e.pathname=i)}return e}function qD(i,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:o=!1}=n,a=r.history,u=vt.Pop,h=null,p=d();p==null&&(p=0,a.replaceState(ut({},a.state,{idx:p}),""));function d(){return(a.state||{idx:null}).idx}function g(){u=vt.Pop;let b=d(),A=b==null?null:b-p;p=b,h&&h({action:u,location:k.location,delta:A})}function v(b,A){u=vt.Push;let N=Bl(k.location,b,A);t&&t(N,b),p=d()+1;let z=qy(N,p),j=k.createHref(N);try{a.pushState(z,"",j)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(j)}o&&h&&h({action:u,location:k.location,delta:1})}function w(b,A){u=vt.Replace;let N=Bl(k.location,b,A);t&&t(N,b),p=d();let z=qy(N,p),j=k.createHref(N);a.replaceState(z,"",j),o&&h&&h({action:u,location:k.location,delta:0})}function S(b){let A=r.location.origin!=="null"?r.location.origin:r.location.href,N=typeof b=="string"?b:ls(b);return N=N.replace(/ $/,"%20"),Fe(A,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,A)}let k={get action(){return u},get location(){return i(r,a)},listen(b){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(Ky,g),h=b,()=>{r.removeEventListener(Ky,g),h=null}},createHref(b){return e(r,b)},createURL:S,encodeLocation(b){let A=S(b);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:w,go(b){return a.go(b)}};return k}var st;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(st||(st={}));const GD=new Set(["lazy","caseSensitive","path","id","index","children"]);function YD(i){return i.index===!0}function Od(i,e,t,n){return t===void 0&&(t=[]),n===void 0&&(n={}),i.map((r,o)=>{let a=[...t,o],u=typeof r.id=="string"?r.id:a.join("-");if(Fe(r.index!==!0||!r.children,"Cannot specify children on an index route"),Fe(!n[u],'Found a route id collision on id "'+u+`".  Route id's must be globally unique within Data Router usages`),YD(r)){let h=ut({},r,e(r),{id:u});return n[u]=h,h}else{let h=ut({},r,e(r),{id:u,children:void 0});return n[u]=h,r.children&&(h.children=Od(r.children,e,a,n)),h}})}function Us(i,e,t){t===void 0&&(t="/");let n=typeof e=="string"?zi(e):e,r=ao(n.pathname||"/",t);if(r==null)return null;let o=cx(i);XD(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let h=uT(r);a=oT(o[u],h)}return a}function QD(i,e){let{route:t,pathname:n,params:r}=i;return{id:t.id,pathname:n,params:r,data:e[t.id],handle:t.handle}}function cx(i,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(Fe(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let p=Li([n,h.relativePath]),d=t.concat(h);o.children&&o.children.length>0&&(Fe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),cx(o.children,e,d,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:rT(p,o.index),routesMeta:d})};return i.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of hx(o.path))r(o,a,h)}),e}function hx(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let a=hx(n.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>i.startsWith("/")&&h===""?"/":h)}function XD(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:sT(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const JD=/^:[\w-]+$/,ZD=3,eT=2,tT=1,nT=10,iT=-2,Gy=i=>i==="*";function rT(i,e){let t=i.split("/"),n=t.length;return t.some(Gy)&&(n+=iT),e&&(n+=eT),t.filter(r=>!Gy(r)).reduce((r,o)=>r+(JD.test(o)?ZD:o===""?tT:nT),n)}function sT(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function oT(i,e){let{routesMeta:t}=i,n={},r="/",o=[];for(let a=0;a<t.length;++a){let u=t[a],h=a===t.length-1,p=r==="/"?e:e.slice(r.length)||"/",d=lT({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p);if(!d)return null;Object.assign(n,d.params);let g=u.route;o.push({params:n,pathname:Li([r,d.pathname]),pathnameBase:fT(Li([r,d.pathnameBase])),route:g}),d.pathnameBase!=="/"&&(r=Li([r,d.pathnameBase]))}return o}function lT(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=aT(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((p,d,g)=>{let{paramName:v,isOptional:w}=d;if(v==="*"){let k=u[g]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const S=u[g];return w&&!S?p[v]=void 0:p[v]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:a,pattern:i}}function aT(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),os(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function uT(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return os(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function ao(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function cT(i,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?zi(i):i;return{pathname:t?t.startsWith("/")?t:hT(t,e):e,search:dT(n),hash:pT(r)}}function hT(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Lf(i,e,t,n){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fx(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mp(i,e){let t=fx(i);return e?t.map((n,r)=>r===i.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function gp(i,e,t,n){n===void 0&&(n=!1);let r;typeof i=="string"?r=zi(i):(r=ut({},i),Fe(!r.pathname||!r.pathname.includes("?"),Lf("?","pathname","search",r)),Fe(!r.pathname||!r.pathname.includes("#"),Lf("#","pathname","hash",r)),Fe(!r.search||!r.search.includes("#"),Lf("#","search","hash",r)));let o=i===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!n&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}u=g>=0?e[g]:"/"}let h=cT(r,u),p=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||d)&&(h.pathname+="/"),h}const Li=i=>i.join("/").replace(/\/\/+/g,"/"),fT=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),dT=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,pT=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;class yp{constructor(e,t,n,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function vp(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const dx=["post","put","patch","delete"],mT=new Set(dx),gT=["get",...dx],yT=new Set(gT),vT=new Set([301,302,303,307,308]),wT=new Set([307,308]),Nf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xT={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},rl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},wp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ST=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),px="remix-router-transitions";function kT(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!t;Fe(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(i.mapRouteProperties)r=i.mapRouteProperties;else if(i.detectErrorBoundary){let P=i.detectErrorBoundary;r=B=>({hasErrorBoundary:P(B)})}else r=ST;let o={},a=Od(i.routes,r,void 0,o),u,h=i.basename||"/",p=i.unstable_dataStrategy||ET,d=ut({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},i.future),g=null,v=new Set,w=null,S=null,k=null,b=i.hydrationData!=null,A=Us(a,i.history.location,h),N=null;if(A==null){let P=An(404,{pathname:i.history.location.pathname}),{matches:B,route:V}=rv(a);A=B,N={[V.id]:P}}let z,j=A.some(P=>P.route.lazy),F=A.some(P=>P.route.loader);if(j)z=!1;else if(!F)z=!0;else if(d.v7_partialHydration){let P=i.hydrationData?i.hydrationData.loaderData:null,B=i.hydrationData?i.hydrationData.errors:null,V=X=>X.route.loader?typeof X.route.loader=="function"&&X.route.loader.hydrate===!0?!1:P&&P[X.route.id]!==void 0||B&&B[X.route.id]!==void 0:!0;if(B){let X=A.findIndex(ue=>B[ue.route.id]!==void 0);z=A.slice(0,X+1).every(V)}else z=A.every(V)}else z=i.hydrationData!=null;let $,M={historyAction:i.history.action,location:i.history.location,matches:A,initialized:z,navigation:Nf,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||N,fetchers:new Map,blockers:new Map},ne=vt.Pop,Y=!1,re,se=!1,te=new Map,fe=null,pe=!1,Se=!1,Te=[],ve=[],U=new Map,ee=0,Z=-1,T=new Map,_=new Set,ge=new Map,Me=new Map,De=new Set,Oe=new Map,Ie=new Map,Ve=!1;function Xe(){if(g=i.history.listen(P=>{let{action:B,location:V,delta:X}=P;if(Ve){Ve=!1;return}os(Ie.size===0||X!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ue=ps({currentLocation:M.location,nextLocation:V,historyAction:B});if(ue&&X!=null){Ve=!0,i.history.go(X*-1),Hi(ue,{state:"blocked",location:V,proceed(){Hi(ue,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),i.history.go(X)},reset(){let Pe=new Map(M.blockers);Pe.set(ue,rl),Ft({blockers:Pe})}});return}return Qn(B,V)}),t){zT(e,te);let P=()=>_T(e,te);e.addEventListener("pagehide",P),fe=()=>e.removeEventListener("pagehide",P)}return M.initialized||Qn(vt.Pop,M.location,{initialHydration:!0}),$}function Gt(){g&&g(),fe&&fe(),v.clear(),re&&re.abort(),M.fetchers.forEach((P,B)=>Ar(B)),M.blockers.forEach((P,B)=>ds(B))}function cs(P){return v.add(P),()=>v.delete(P)}function Ft(P,B){B===void 0&&(B={}),M=ut({},M,P);let V=[],X=[];d.v7_fetcherPersist&&M.fetchers.forEach((ue,Pe)=>{ue.state==="idle"&&(De.has(Pe)?X.push(Pe):V.push(Pe))}),[...v].forEach(ue=>ue(M,{deletedFetchers:X,unstable_viewTransitionOpts:B.viewTransitionOpts,unstable_flushSync:B.flushSync===!0})),d.v7_fetcherPersist&&(V.forEach(ue=>M.fetchers.delete(ue)),X.forEach(ue=>Ar(ue)))}function Yn(P,B,V){var X,ue;let{flushSync:Pe}=V===void 0?{}:V,xe=M.actionData!=null&&M.navigation.formMethod!=null&&$n(M.navigation.formMethod)&&M.navigation.state==="loading"&&((X=P.state)==null?void 0:X._isRedirect)!==!0,ae;B.actionData?Object.keys(B.actionData).length>0?ae=B.actionData:ae=null:xe?ae=M.actionData:ae=null;let Le=B.loaderData?nv(M.loaderData,B.loaderData,B.matches||[],B.errors):M.loaderData,Ee=M.blockers;Ee.size>0&&(Ee=new Map(Ee),Ee.forEach((Ae,Je)=>Ee.set(Je,rl)));let ct=Y===!0||M.navigation.formMethod!=null&&$n(M.navigation.formMethod)&&((ue=P.state)==null?void 0:ue._isRedirect)!==!0;u&&(a=u,u=void 0),pe||ne===vt.Pop||(ne===vt.Push?i.history.push(P,P.state):ne===vt.Replace&&i.history.replace(P,P.state));let ht;if(ne===vt.Pop){let Ae=te.get(M.location.pathname);Ae&&Ae.has(P.pathname)?ht={currentLocation:M.location,nextLocation:P}:te.has(P.pathname)&&(ht={currentLocation:P,nextLocation:M.location})}else if(se){let Ae=te.get(M.location.pathname);Ae?Ae.add(P.pathname):(Ae=new Set([P.pathname]),te.set(M.location.pathname,Ae)),ht={currentLocation:M.location,nextLocation:P}}Ft(ut({},B,{actionData:ae,loaderData:Le,historyAction:ne,location:P,initialized:!0,navigation:Nf,revalidation:"idle",restoreScrollPosition:go(P,B.matches||M.matches),preventScrollReset:ct,blockers:Ee}),{viewTransitionOpts:ht,flushSync:Pe===!0}),ne=vt.Pop,Y=!1,se=!1,pe=!1,Se=!1,Te=[],ve=[]}async function hs(P,B){if(typeof P=="number"){i.history.go(P);return}let V=Ld(M.location,M.matches,h,d.v7_prependBasename,P,d.v7_relativeSplatPath,B==null?void 0:B.fromRouteId,B==null?void 0:B.relative),{path:X,submission:ue,error:Pe}=Yy(d.v7_normalizeFormMethod,!1,V,B),xe=M.location,ae=Bl(M.location,X,B&&B.state);ae=ut({},ae,i.history.encodeLocation(ae));let Le=B&&B.replace!=null?B.replace:void 0,Ee=vt.Push;Le===!0?Ee=vt.Replace:Le===!1||ue!=null&&$n(ue.formMethod)&&ue.formAction===M.location.pathname+M.location.search&&(Ee=vt.Replace);let ct=B&&"preventScrollReset"in B?B.preventScrollReset===!0:void 0,ht=(B&&B.unstable_flushSync)===!0,Ae=ps({currentLocation:xe,nextLocation:ae,historyAction:Ee});if(Ae){Hi(Ae,{state:"blocked",location:ae,proceed(){Hi(Ae,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),hs(P,B)},reset(){let Je=new Map(M.blockers);Je.set(Ae,rl),Ft({blockers:Je})}});return}return await Qn(Ee,ae,{submission:ue,pendingError:Pe,preventScrollReset:ct,replace:B&&B.replace,enableViewTransition:B&&B.unstable_viewTransition,flushSync:ht})}function ql(){if(fs(),Ft({revalidation:"loading"}),M.navigation.state!=="submitting"){if(M.navigation.state==="idle"){Qn(M.historyAction,M.location,{startUninterruptedRevalidation:!0});return}Qn(ne||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation})}}async function Qn(P,B,V){re&&re.abort(),re=null,ne=P,pe=(V&&V.startUninterruptedRevalidation)===!0,Vi(M.location,M.matches),Y=(V&&V.preventScrollReset)===!0,se=(V&&V.enableViewTransition)===!0;let X=u||a,ue=V&&V.overrideNavigation,Pe=Us(X,B,h),xe=(V&&V.flushSync)===!0;if(!Pe){let Ae=An(404,{pathname:B.pathname}),{matches:Je,route:gt}=rv(X);Tr(),Yn(B,{matches:Je,loaderData:{},errors:{[gt.id]:Ae}},{flushSync:xe});return}if(M.initialized&&!Se&&OT(M.location,B)&&!(V&&V.submission&&$n(V.submission.formMethod))){Yn(B,{matches:Pe},{flushSync:xe});return}re=new AbortController;let ae=_s(i.history,B,re.signal,V&&V.submission),Le;if(V&&V.pendingError)Le=[wl(Pe).route.id,{type:st.error,error:V.pendingError}];else if(V&&V.submission&&$n(V.submission.formMethod)){let Ae=await uo(ae,B,V.submission,Pe,{replace:V.replace,flushSync:xe});if(Ae.shortCircuited)return;Le=Ae.pendingActionResult,ue=Bf(B,V.submission),xe=!1,ae=_s(i.history,ae.url,ae.signal)}let{shortCircuited:Ee,loaderData:ct,errors:ht}=await Gl(ae,B,Pe,ue,V&&V.submission,V&&V.fetcherSubmission,V&&V.replace,V&&V.initialHydration===!0,xe,Le);Ee||(re=null,Yn(B,ut({matches:Pe},iv(Le),{loaderData:ct,errors:ht})))}async function uo(P,B,V,X,ue){ue===void 0&&(ue={}),fs();let Pe=IT(B,V);Ft({navigation:Pe},{flushSync:ue.flushSync===!0});let xe,ae=Bd(X,B);if(!ae.route.action&&!ae.route.lazy)xe={type:st.error,error:An(405,{method:P.method,pathname:B.pathname,routeId:ae.route.id})};else if(xe=(await ji("action",P,[ae],X))[0],P.signal.aborted)return{shortCircuited:!0};if(Jr(xe)){let Le;return ue&&ue.replace!=null?Le=ue.replace:Le=Zy(xe.response.headers.get("Location"),new URL(P.url),h)===M.location.pathname+M.location.search,await yi(P,xe,{submission:V,replace:Le}),{shortCircuited:!0}}if(Xr(xe))throw An(400,{type:"defer-action"});if(Tn(xe)){let Le=wl(X,ae.route.id);return(ue&&ue.replace)!==!0&&(ne=vt.Push),{pendingActionResult:[Le.route.id,xe]}}return{pendingActionResult:[ae.route.id,xe]}}async function Gl(P,B,V,X,ue,Pe,xe,ae,Le,Ee){let ct=X||Bf(B,ue),ht=ue||Pe||lv(ct),Ae=u||a,[Je,gt]=Qy(i.history,M,V,ht,B,d.v7_partialHydration&&ae===!0,d.unstable_skipActionErrorRevalidation,Se,Te,ve,De,ge,_,Ae,h,Ee);if(Tr(ze=>!(V&&V.some(Tt=>Tt.route.id===ze))||Je&&Je.some(Tt=>Tt.route.id===ze)),Z=++ee,Je.length===0&&gt.length===0){let ze=fo();return Yn(B,ut({matches:V,loaderData:{},errors:Ee&&Tn(Ee[1])?{[Ee[0]]:Ee[1].error}:null},iv(Ee),ze?{fetchers:new Map(M.fetchers)}:{}),{flushSync:Le}),{shortCircuited:!0}}if(!pe&&(!d.v7_partialHydration||!ae)){gt.forEach(Tt=>{let He=M.fetchers.get(Tt.key),xt=sl(void 0,He?He.data:void 0);M.fetchers.set(Tt.key,xt)});let ze;Ee&&!Tn(Ee[1])?ze={[Ee[0]]:Ee[1].data}:M.actionData&&(Object.keys(M.actionData).length===0?ze=null:ze=M.actionData),Ft(ut({navigation:ct},ze!==void 0?{actionData:ze}:{},gt.length>0?{fetchers:new Map(M.fetchers)}:{}),{flushSync:Le})}gt.forEach(ze=>{U.has(ze.key)&&en(ze.key),ze.controller&&U.set(ze.key,ze.controller)});let Pr=()=>gt.forEach(ze=>en(ze.key));re&&re.signal.addEventListener("abort",Pr);let{loaderResults:zt,fetcherResults:xi}=await ho(M.matches,V,Je,gt,P);if(P.signal.aborted)return{shortCircuited:!0};re&&re.signal.removeEventListener("abort",Pr),gt.forEach(ze=>U.delete(ze.key));let Si=sv([...zt,...xi]);if(Si){if(Si.idx>=Je.length){let ze=gt[Si.idx-Je.length].key;_.add(ze)}return await yi(P,Si.result,{replace:xe}),{shortCircuited:!0}}let{loaderData:Wi,errors:dn}=tv(M,V,Je,zt,Ee,gt,xi,Oe);Oe.forEach((ze,Tt)=>{ze.subscribe(He=>{(He||ze.done)&&Oe.delete(Tt)})}),d.v7_partialHydration&&ae&&M.errors&&Object.entries(M.errors).filter(ze=>{let[Tt]=ze;return!Je.some(He=>He.route.id===Tt)}).forEach(ze=>{let[Tt,He]=ze;dn=Object.assign(dn||{},{[Tt]:He})});let Rr=fo(),Or=po(Z),Lr=Rr||Or||gt.length>0;return ut({loaderData:Wi,errors:dn},Lr?{fetchers:new Map(M.fetchers)}:{})}function co(P,B,V,X){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");U.has(P)&&en(P);let ue=(X&&X.unstable_flushSync)===!0,Pe=u||a,xe=Ld(M.location,M.matches,h,d.v7_prependBasename,V,d.v7_relativeSplatPath,B,X==null?void 0:X.relative),ae=Us(Pe,xe,h);if(!ae){vi(P,B,An(404,{pathname:xe}),{flushSync:ue});return}let{path:Le,submission:Ee,error:ct}=Yy(d.v7_normalizeFormMethod,!0,xe,X);if(ct){vi(P,B,ct,{flushSync:ue});return}let ht=Bd(ae,Le);if(Y=(X&&X.preventScrollReset)===!0,Ee&&$n(Ee.formMethod)){Mr(P,B,Le,ht,ae,ue,Ee);return}ge.set(P,{routeId:B,path:Le}),_i(P,B,Le,ht,ae,ue,Ee)}async function Mr(P,B,V,X,ue,Pe,xe){if(fs(),ge.delete(P),!X.route.action&&!X.route.lazy){let xt=An(405,{method:xe.formMethod,pathname:V,routeId:B});vi(P,B,xt,{flushSync:Pe});return}let ae=M.fetchers.get(P);Fn(P,FT(xe,ae),{flushSync:Pe});let Le=new AbortController,Ee=_s(i.history,V,Le.signal,xe);U.set(P,Le);let ct=ee,Ae=(await ji("action",Ee,[X],ue))[0];if(Ee.signal.aborted){U.get(P)===Le&&U.delete(P);return}if(d.v7_fetcherPersist&&De.has(P)){if(Jr(Ae)||Tn(Ae)){Fn(P,ur(void 0));return}}else{if(Jr(Ae))if(U.delete(P),Z>ct){Fn(P,ur(void 0));return}else return _.add(P),Fn(P,sl(xe)),yi(Ee,Ae,{fetcherSubmission:xe});if(Tn(Ae)){vi(P,B,Ae.error);return}}if(Xr(Ae))throw An(400,{type:"defer-action"});let Je=M.navigation.location||M.location,gt=_s(i.history,Je,Le.signal),Pr=u||a,zt=M.navigation.state!=="idle"?Us(Pr,M.navigation.location,h):M.matches;Fe(zt,"Didn't find any matches after fetcher action");let xi=++ee;T.set(P,xi);let Si=sl(xe,Ae.data);M.fetchers.set(P,Si);let[Wi,dn]=Qy(i.history,M,zt,xe,Je,!1,d.unstable_skipActionErrorRevalidation,Se,Te,ve,De,ge,_,Pr,h,[X.route.id,Ae]);dn.filter(xt=>xt.key!==P).forEach(xt=>{let ki=xt.key,yo=M.fetchers.get(ki),ms=sl(void 0,yo?yo.data:void 0);M.fetchers.set(ki,ms),U.has(ki)&&en(ki),xt.controller&&U.set(ki,xt.controller)}),Ft({fetchers:new Map(M.fetchers)});let Rr=()=>dn.forEach(xt=>en(xt.key));Le.signal.addEventListener("abort",Rr);let{loaderResults:Or,fetcherResults:Lr}=await ho(M.matches,zt,Wi,dn,gt);if(Le.signal.aborted)return;Le.signal.removeEventListener("abort",Rr),T.delete(P),U.delete(P),dn.forEach(xt=>U.delete(xt.key));let ze=sv([...Or,...Lr]);if(ze){if(ze.idx>=Wi.length){let xt=dn[ze.idx-Wi.length].key;_.add(xt)}return yi(gt,ze.result)}let{loaderData:Tt,errors:He}=tv(M,M.matches,Wi,Or,void 0,dn,Lr,Oe);if(M.fetchers.has(P)){let xt=ur(Ae.data);M.fetchers.set(P,xt)}po(xi),M.navigation.state==="loading"&&xi>Z?(Fe(ne,"Expected pending action"),re&&re.abort(),Yn(M.navigation.location,{matches:zt,loaderData:Tt,errors:He,fetchers:new Map(M.fetchers)})):(Ft({errors:He,loaderData:nv(M.loaderData,Tt,zt,He),fetchers:new Map(M.fetchers)}),Se=!1)}async function _i(P,B,V,X,ue,Pe,xe){let ae=M.fetchers.get(P);Fn(P,sl(xe,ae?ae.data:void 0),{flushSync:Pe});let Le=new AbortController,Ee=_s(i.history,V,Le.signal);U.set(P,Le);let ct=ee,Ae=(await ji("loader",Ee,[X],ue))[0];if(Xr(Ae)&&(Ae=await vx(Ae,Ee.signal,!0)||Ae),U.get(P)===Le&&U.delete(P),!Ee.signal.aborted){if(De.has(P)){Fn(P,ur(void 0));return}if(Jr(Ae))if(Z>ct){Fn(P,ur(void 0));return}else{_.add(P),await yi(Ee,Ae);return}if(Tn(Ae)){vi(P,B,Ae.error);return}Fe(!Xr(Ae),"Unhandled fetcher deferred data"),Fn(P,ur(Ae.data))}}async function yi(P,B,V){let{submission:X,fetcherSubmission:ue,replace:Pe}=V===void 0?{}:V;B.response.headers.has("X-Remix-Revalidate")&&(Se=!0);let xe=B.response.headers.get("Location");Fe(xe,"Expected a Location header on the redirect Response"),xe=Zy(xe,new URL(P.url),h);let ae=Bl(M.location,xe,{_isRedirect:!0});if(t){let Je=!1;if(B.response.headers.has("X-Remix-Reload-Document"))Je=!0;else if(wp.test(xe)){const gt=i.history.createURL(xe);Je=gt.origin!==e.location.origin||ao(gt.pathname,h)==null}if(Je){Pe?e.location.replace(xe):e.location.assign(xe);return}}re=null;let Le=Pe===!0?vt.Replace:vt.Push,{formMethod:Ee,formAction:ct,formEncType:ht}=M.navigation;!X&&!ue&&Ee&&ct&&ht&&(X=lv(M.navigation));let Ae=X||ue;if(wT.has(B.response.status)&&Ae&&$n(Ae.formMethod))await Qn(Le,ae,{submission:ut({},Ae,{formAction:xe}),preventScrollReset:Y});else{let Je=Bf(ae,X);await Qn(Le,ae,{overrideNavigation:Je,fetcherSubmission:ue,preventScrollReset:Y})}}async function ji(P,B,V,X){try{let ue=await AT(p,P,B,V,X,o,r);return await Promise.all(ue.map((Pe,xe)=>{if(LT(Pe)){let ae=Pe.result;return{type:st.redirect,response:PT(ae,B,V[xe].route.id,X,h,d.v7_relativeSplatPath)}}return TT(Pe)}))}catch(ue){return V.map(()=>({type:st.error,error:ue}))}}async function ho(P,B,V,X,ue){let[Pe,...xe]=await Promise.all([V.length?ji("loader",ue,V,B):[],...X.map(ae=>{if(ae.matches&&ae.match&&ae.controller){let Le=_s(i.history,ae.path,ae.controller.signal);return ji("loader",Le,[ae.match],ae.matches).then(Ee=>Ee[0])}else return Promise.resolve({type:st.error,error:An(404,{pathname:ae.path})})})]);return await Promise.all([ov(P,V,Pe,Pe.map(()=>ue.signal),!1,M.loaderData),ov(P,X.map(ae=>ae.match),xe,X.map(ae=>ae.controller?ae.controller.signal:null),!0)]),{loaderResults:Pe,fetcherResults:xe}}function fs(){Se=!0,Te.push(...Tr()),ge.forEach((P,B)=>{U.has(B)&&(ve.push(B),en(B))})}function Fn(P,B,V){V===void 0&&(V={}),M.fetchers.set(P,B),Ft({fetchers:new Map(M.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function vi(P,B,V,X){X===void 0&&(X={});let ue=wl(M.matches,B);Ar(P),Ft({errors:{[ue.route.id]:V},fetchers:new Map(M.fetchers)},{flushSync:(X&&X.flushSync)===!0})}function Er(P){return d.v7_fetcherPersist&&(Me.set(P,(Me.get(P)||0)+1),De.has(P)&&De.delete(P)),M.fetchers.get(P)||xT}function Ar(P){let B=M.fetchers.get(P);U.has(P)&&!(B&&B.state==="loading"&&T.has(P))&&en(P),ge.delete(P),T.delete(P),_.delete(P),De.delete(P),M.fetchers.delete(P)}function Dr(P){if(d.v7_fetcherPersist){let B=(Me.get(P)||0)-1;B<=0?(Me.delete(P),De.add(P)):Me.set(P,B)}else Ar(P);Ft({fetchers:new Map(M.fetchers)})}function en(P){let B=U.get(P);Fe(B,"Expected fetch controller: "+P),B.abort(),U.delete(P)}function Yl(P){for(let B of P){let V=Er(B),X=ur(V.data);M.fetchers.set(B,X)}}function fo(){let P=[],B=!1;for(let V of _){let X=M.fetchers.get(V);Fe(X,"Expected fetcher: "+V),X.state==="loading"&&(_.delete(V),P.push(V),B=!0)}return Yl(P),B}function po(P){let B=[];for(let[V,X]of T)if(X<P){let ue=M.fetchers.get(V);Fe(ue,"Expected fetcher: "+V),ue.state==="loading"&&(en(V),T.delete(V),B.push(V))}return Yl(B),B.length>0}function xc(P,B){let V=M.blockers.get(P)||rl;return Ie.get(P)!==B&&Ie.set(P,B),V}function ds(P){M.blockers.delete(P),Ie.delete(P)}function Hi(P,B){let V=M.blockers.get(P)||rl;Fe(V.state==="unblocked"&&B.state==="blocked"||V.state==="blocked"&&B.state==="blocked"||V.state==="blocked"&&B.state==="proceeding"||V.state==="blocked"&&B.state==="unblocked"||V.state==="proceeding"&&B.state==="unblocked","Invalid blocker state transition: "+V.state+" -> "+B.state);let X=new Map(M.blockers);X.set(P,B),Ft({blockers:X})}function ps(P){let{currentLocation:B,nextLocation:V,historyAction:X}=P;if(Ie.size===0)return;Ie.size>1&&os(!1,"A router only supports one blocker at a time");let ue=Array.from(Ie.entries()),[Pe,xe]=ue[ue.length-1],ae=M.blockers.get(Pe);if(!(ae&&ae.state==="proceeding")&&xe({currentLocation:B,nextLocation:V,historyAction:X}))return Pe}function Tr(P){let B=[];return Oe.forEach((V,X)=>{(!P||P(X))&&(V.cancel(),B.push(X),Oe.delete(X))}),B}function mo(P,B,V){if(w=P,k=B,S=V||null,!b&&M.navigation===Nf){b=!0;let X=go(M.location,M.matches);X!=null&&Ft({restoreScrollPosition:X})}return()=>{w=null,k=null,S=null}}function wi(P,B){return S&&S(P,B.map(X=>QD(X,M.loaderData)))||P.key}function Vi(P,B){if(w&&k){let V=wi(P,B);w[V]=k()}}function go(P,B){if(w){let V=wi(P,B),X=w[V];if(typeof X=="number")return X}return null}function Ql(P){o={},u=Od(P,r,void 0,o)}return $={get basename(){return h},get future(){return d},get state(){return M},get routes(){return a},get window(){return e},initialize:Xe,subscribe:cs,enableScrollRestoration:mo,navigate:hs,fetch:co,revalidate:ql,createHref:P=>i.history.createHref(P),encodeLocation:P=>i.history.encodeLocation(P),getFetcher:Er,deleteFetcher:Dr,dispose:Gt,getBlocker:xc,deleteBlocker:ds,_internalFetchControllers:U,_internalActiveDeferreds:Oe,_internalSetRoutes:Ql},$}function bT(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function Ld(i,e,t,n,r,o,a,u){let h,p;if(a){h=[];for(let g of e)if(h.push(g),g.route.id===a){p=g;break}}else h=e,p=e[e.length-1];let d=gp(r||".",mp(h,o),ao(i.pathname,t)||i.pathname,u==="path");return r==null&&(d.search=i.search,d.hash=i.hash),(r==null||r===""||r===".")&&p&&p.route.index&&!xp(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Li([t,d.pathname])),ls(d)}function Yy(i,e,t,n){if(!n||!bT(n))return{path:t};if(n.formMethod&&!BT(n.formMethod))return{path:t,error:An(405,{method:n.formMethod})};let r=()=>({path:t,error:An(400,{type:"invalid-body"})}),o=n.formMethod||"get",a=i?o.toUpperCase():o.toLowerCase(),u=gx(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!$n(a))return r();let v=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((w,S)=>{let[k,b]=S;return""+w+k+"="+b+`
`},""):String(n.body);return{path:t,submission:{formMethod:a,formAction:u,formEncType:n.formEncType,formData:void 0,json:void 0,text:v}}}else if(n.formEncType==="application/json"){if(!$n(a))return r();try{let v=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:a,formAction:u,formEncType:n.formEncType,formData:void 0,json:v,text:void 0}}}catch{return r()}}}Fe(typeof FormData=="function","FormData is not available in this environment");let h,p;if(n.formData)h=Nd(n.formData),p=n.formData;else if(n.body instanceof FormData)h=Nd(n.body),p=n.body;else if(n.body instanceof URLSearchParams)h=n.body,p=ev(h);else if(n.body==null)h=new URLSearchParams,p=new FormData;else try{h=new URLSearchParams(n.body),p=ev(h)}catch{return r()}let d={formMethod:a,formAction:u,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if($n(d.formMethod))return{path:t,submission:d};let g=zi(t);return e&&g.search&&xp(g.search)&&h.append("index",""),g.search="?"+h,{path:ls(g),submission:d}}function CT(i,e){let t=i;if(e){let n=i.findIndex(r=>r.route.id===e);n>=0&&(t=i.slice(0,n))}return t}function Qy(i,e,t,n,r,o,a,u,h,p,d,g,v,w,S,k){let b=k?Tn(k[1])?k[1].error:k[1].data:void 0,A=i.createURL(e.location),N=i.createURL(r),z=k&&Tn(k[1])?k[0]:void 0,j=z?CT(t,z):t,F=k?k[1].statusCode:void 0,$=a&&F&&F>=400,M=j.filter((Y,re)=>{let{route:se}=Y;if(se.lazy)return!0;if(se.loader==null)return!1;if(o)return typeof se.loader!="function"||se.loader.hydrate?!0:e.loaderData[se.id]===void 0&&(!e.errors||e.errors[se.id]===void 0);if(MT(e.loaderData,e.matches[re],Y)||h.some(pe=>pe===Y.route.id))return!0;let te=e.matches[re],fe=Y;return Xy(Y,ut({currentUrl:A,currentParams:te.params,nextUrl:N,nextParams:fe.params},n,{actionResult:b,unstable_actionStatus:F,defaultShouldRevalidate:$?!1:u||A.pathname+A.search===N.pathname+N.search||A.search!==N.search||mx(te,fe)}))}),ne=[];return g.forEach((Y,re)=>{if(o||!t.some(Se=>Se.route.id===Y.routeId)||d.has(re))return;let se=Us(w,Y.path,S);if(!se){ne.push({key:re,routeId:Y.routeId,path:Y.path,matches:null,match:null,controller:null});return}let te=e.fetchers.get(re),fe=Bd(se,Y.path),pe=!1;v.has(re)?pe=!1:p.includes(re)?pe=!0:te&&te.state!=="idle"&&te.data===void 0?pe=u:pe=Xy(fe,ut({currentUrl:A,currentParams:e.matches[e.matches.length-1].params,nextUrl:N,nextParams:t[t.length-1].params},n,{actionResult:b,unstable_actionStatus:F,defaultShouldRevalidate:$?!1:u})),pe&&ne.push({key:re,routeId:Y.routeId,path:Y.path,matches:se,match:fe,controller:new AbortController})}),[M,ne]}function MT(i,e,t){let n=!e||t.route.id!==e.route.id,r=i[t.route.id]===void 0;return n||r}function mx(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function Xy(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}async function Jy(i,e,t){if(!i.lazy)return;let n=await i.lazy();if(!i.lazy)return;let r=t[i.id];Fe(r,"No route found in manifest");let o={};for(let a in n){let h=r[a]!==void 0&&a!=="hasErrorBoundary";os(!h,'Route "'+r.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!h&&!GD.has(a)&&(o[a]=n[a])}Object.assign(r,o),Object.assign(r,ut({},e(r),{lazy:void 0}))}function ET(i){return Promise.all(i.matches.map(e=>e.resolve()))}async function AT(i,e,t,n,r,o,a,u){let h=n.reduce((g,v)=>g.add(v.route.id),new Set),p=new Set,d=await i({matches:r.map(g=>{let v=h.has(g.route.id);return ut({},g,{shouldLoad:v,resolve:S=>(p.add(g.route.id),v?DT(e,t,g,o,a,S,u):Promise.resolve({type:st.data,result:void 0}))})}),request:t,params:r[0].params,context:u});return r.forEach(g=>Fe(p.has(g.route.id),'`match.resolve()` was not called for route id "'+g.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((g,v)=>h.has(r[v].route.id))}async function DT(i,e,t,n,r,o,a){let u,h,p=d=>{let g,v=new Promise((k,b)=>g=b);h=()=>g(),e.signal.addEventListener("abort",h);let w=k=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+i+'" [routeId: '+t.route.id+"]"))):d({request:e,params:t.params,context:a},...k!==void 0?[k]:[]),S;return o?S=o(k=>w(k)):S=(async()=>{try{return{type:"data",result:await w()}}catch(k){return{type:"error",result:k}}})(),Promise.race([S,v])};try{let d=t.route[i];if(t.route.lazy)if(d){let g,[v]=await Promise.all([p(d).catch(w=>{g=w}),Jy(t.route,r,n)]);if(g!==void 0)throw g;u=v}else if(await Jy(t.route,r,n),d=t.route[i],d)u=await p(d);else if(i==="action"){let g=new URL(e.url),v=g.pathname+g.search;throw An(405,{method:e.method,pathname:v,routeId:t.route.id})}else return{type:st.data,result:void 0};else if(d)u=await p(d);else{let g=new URL(e.url),v=g.pathname+g.search;throw An(404,{pathname:v})}Fe(u.result!==void 0,"You defined "+(i==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+i+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:st.error,result:d}}finally{h&&e.signal.removeEventListener("abort",h)}return u}async function TT(i){let{result:e,type:t,status:n}=i;if(yx(e)){let a;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?a=null:a=await e.json():a=await e.text()}catch(u){return{type:st.error,error:u}}return t===st.error?{type:st.error,error:new yp(e.status,e.statusText,a),statusCode:e.status,headers:e.headers}:{type:st.data,data:a,statusCode:e.status,headers:e.headers}}if(t===st.error)return{type:st.error,error:e,statusCode:vp(e)?e.status:n};if(NT(e)){var r,o;return{type:st.deferred,deferredData:e,statusCode:(r=e.init)==null?void 0:r.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}return{type:st.data,data:e,statusCode:n}}function PT(i,e,t,n,r,o){let a=i.headers.get("Location");if(Fe(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!wp.test(a)){let u=n.slice(0,n.findIndex(h=>h.route.id===t)+1);a=Ld(new URL(e.url),u,r,!0,a,o),i.headers.set("Location",a)}return i}function Zy(i,e,t){if(wp.test(i)){let n=i,r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),o=ao(r.pathname,t)!=null;if(r.origin===e.origin&&o)return r.pathname+r.search+r.hash}return i}function _s(i,e,t,n){let r=i.createURL(gx(e)).toString(),o={signal:t};if(n&&$n(n.formMethod)){let{formMethod:a,formEncType:u}=n;o.method=a.toUpperCase(),u==="application/json"?(o.headers=new Headers({"Content-Type":u}),o.body=JSON.stringify(n.json)):u==="text/plain"?o.body=n.text:u==="application/x-www-form-urlencoded"&&n.formData?o.body=Nd(n.formData):o.body=n.formData}return new Request(r,o)}function Nd(i){let e=new URLSearchParams;for(let[t,n]of i.entries())e.append(t,typeof n=="string"?n:n.name);return e}function ev(i){let e=new FormData;for(let[t,n]of i.entries())e.append(t,n);return e}function RT(i,e,t,n,r,o){let a={},u=null,h,p=!1,d={},g=n&&Tn(n[1])?n[1].error:void 0;return t.forEach((v,w)=>{let S=e[w].route.id;if(Fe(!Jr(v),"Cannot handle redirect results in processLoaderData"),Tn(v)){let k=v.error;g!==void 0&&(k=g,g=void 0),u=u||{};{let b=wl(i,S);u[b.route.id]==null&&(u[b.route.id]=k)}a[S]=void 0,p||(p=!0,h=vp(v.error)?v.error.status:500),v.headers&&(d[S]=v.headers)}else Xr(v)?(r.set(S,v.deferredData),a[S]=v.deferredData.data,v.statusCode!=null&&v.statusCode!==200&&!p&&(h=v.statusCode),v.headers&&(d[S]=v.headers)):(a[S]=v.data,v.statusCode&&v.statusCode!==200&&!p&&(h=v.statusCode),v.headers&&(d[S]=v.headers))}),g!==void 0&&n&&(u={[n[0]]:g},a[n[0]]=void 0),{loaderData:a,errors:u,statusCode:h||200,loaderHeaders:d}}function tv(i,e,t,n,r,o,a,u){let{loaderData:h,errors:p}=RT(e,t,n,r,u);for(let d=0;d<o.length;d++){let{key:g,match:v,controller:w}=o[d];Fe(a!==void 0&&a[d]!==void 0,"Did not find corresponding fetcher result");let S=a[d];if(!(w&&w.signal.aborted))if(Tn(S)){let k=wl(i.matches,v==null?void 0:v.route.id);p&&p[k.route.id]||(p=ut({},p,{[k.route.id]:S.error})),i.fetchers.delete(g)}else if(Jr(S))Fe(!1,"Unhandled fetcher revalidation redirect");else if(Xr(S))Fe(!1,"Unhandled fetcher deferred data");else{let k=ur(S.data);i.fetchers.set(g,k)}}return{loaderData:h,errors:p}}function nv(i,e,t,n){let r=ut({},e);for(let o of t){let a=o.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(r[a]=e[a]):i[a]!==void 0&&o.route.loader&&(r[a]=i[a]),n&&n.hasOwnProperty(a))break}return r}function iv(i){return i?Tn(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function wl(i,e){return(e?i.slice(0,i.findIndex(n=>n.route.id===e)+1):[...i]).reverse().find(n=>n.route.hasErrorBoundary===!0)||i[0]}function rv(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function An(i,e){let{pathname:t,routeId:n,method:r,type:o}=e===void 0?{}:e,a="Unknown Server Error",u="Unknown @remix-run/router error";return i===400?(a="Bad Request",r&&t&&n?u="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":o==="defer-action"?u="defer() is not supported in actions":o==="invalid-body"&&(u="Unable to encode submission body")):i===403?(a="Forbidden",u='Route "'+n+'" does not match URL "'+t+'"'):i===404?(a="Not Found",u='No route matches URL "'+t+'"'):i===405&&(a="Method Not Allowed",r&&t&&n?u="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":r&&(u='Invalid request method "'+r.toUpperCase()+'"')),new yp(i||500,a,new Error(u),!0)}function sv(i){for(let e=i.length-1;e>=0;e--){let t=i[e];if(Jr(t))return{result:t,idx:e}}}function gx(i){let e=typeof i=="string"?zi(i):i;return ls(ut({},e,{hash:""}))}function OT(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function LT(i){return yx(i.result)&&vT.has(i.result.status)}function Xr(i){return i.type===st.deferred}function Tn(i){return i.type===st.error}function Jr(i){return(i&&i.type)===st.redirect}function NT(i){let e=i;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function yx(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function BT(i){return yT.has(i.toLowerCase())}function $n(i){return mT.has(i.toLowerCase())}async function ov(i,e,t,n,r,o){for(let a=0;a<t.length;a++){let u=t[a],h=e[a];if(!h)continue;let p=i.find(g=>g.route.id===h.route.id),d=p!=null&&!mx(p,h)&&(o&&o[h.route.id])!==void 0;if(Xr(u)&&(r||d)){let g=n[a];Fe(g,"Expected an AbortSignal for revalidating fetcher deferred result"),await vx(u,g,r).then(v=>{v&&(t[a]=v||t[a])})}}}async function vx(i,e,t){if(t===void 0&&(t=!1),!await i.deferredData.resolveData(e)){if(t)try{return{type:st.data,data:i.deferredData.unwrappedData}}catch(r){return{type:st.error,error:r}}return{type:st.data,data:i.deferredData.data}}}function xp(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function Bd(i,e){let t=typeof e=="string"?zi(e).search:e.search;if(i[i.length-1].route.index&&xp(t||""))return i[i.length-1];let n=fx(i);return n[n.length-1]}function lv(i){let{formMethod:e,formAction:t,formEncType:n,text:r,formData:o,json:a}=i;if(!(!e||!t||!n)){if(r!=null)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:void 0,text:r};if(o!=null)return{formMethod:e,formAction:t,formEncType:n,formData:o,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:a,text:void 0}}}function Bf(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function IT(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function sl(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function FT(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function ur(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function zT(i,e){try{let t=i.sessionStorage.getItem(px);if(t){let n=JSON.parse(t);for(let[r,o]of Object.entries(n||{}))o&&Array.isArray(o)&&e.set(r,new Set(o||[]))}}catch{}}function _T(i,e){if(e.size>0){let t={};for(let[n,r]of e)t[n]=[...r];try{i.sessionStorage.setItem(px,JSON.stringify(t))}catch(n){os(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sc(){return sc=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},sc.apply(this,arguments)}const wc=W.createContext(null),wx=W.createContext(null),us=W.createContext(null),Sp=W.createContext(null),Cr=W.createContext({outlet:null,matches:[],isDataRoute:!1}),xx=W.createContext(null);function jT(i,e){let{relative:t}=e===void 0?{}:e;$l()||Fe(!1);let{basename:n,navigator:r}=W.useContext(us),{hash:o,pathname:a,search:u}=kx(i,{relative:t}),h=a;return n!=="/"&&(h=a==="/"?n:Li([n,a])),r.createHref({pathname:h,search:u,hash:o})}function $l(){return W.useContext(Sp)!=null}function Kl(){return $l()||Fe(!1),W.useContext(Sp).location}function Sx(i){W.useContext(us).static||W.useLayoutEffect(i)}function HT(){let{isDataRoute:i}=W.useContext(Cr);return i?eP():VT()}function VT(){$l()||Fe(!1);let i=W.useContext(wc),{basename:e,future:t,navigator:n}=W.useContext(us),{matches:r}=W.useContext(Cr),{pathname:o}=Kl(),a=JSON.stringify(mp(r,t.v7_relativeSplatPath)),u=W.useRef(!1);return Sx(()=>{u.current=!0}),W.useCallback(function(p,d){if(d===void 0&&(d={}),!u.current)return;if(typeof p=="number"){n.go(p);return}let g=gp(p,JSON.parse(a),o,d.relative==="path");i==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Li([e,g.pathname])),(d.replace?n.replace:n.push)(g,d.state,d)},[e,n,a,o,i])}const WT=W.createContext(null);function UT(i){let e=W.useContext(Cr).outlet;return e&&W.createElement(WT.Provider,{value:i},e)}function kx(i,e){let{relative:t}=e===void 0?{}:e,{future:n}=W.useContext(us),{matches:r}=W.useContext(Cr),{pathname:o}=Kl(),a=JSON.stringify(mp(r,n.v7_relativeSplatPath));return W.useMemo(()=>gp(i,JSON.parse(a),o,t==="path"),[i,a,o,t])}function $T(i,e,t,n){$l()||Fe(!1);let{navigator:r}=W.useContext(us),{matches:o}=W.useContext(Cr),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let p=Kl(),d;d=p;let g=d.pathname||"/",v=g;if(h!=="/"){let k=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=Us(i,{pathname:v});return QT(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:Li([h,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:Li([h,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,t,n)}function KT(){let i=Ex(),e=vp(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:r},t):null,null)}const qT=W.createElement(KT,null);class GT extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?W.createElement(Cr.Provider,{value:this.props.routeContext},W.createElement(xx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YT(i){let{routeContext:e,match:t,children:n}=i,r=W.useContext(wc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(Cr.Provider,{value:e},n)}function QT(i,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),i==null){var o;if((o=t)!=null&&o.errors)i=t.matches;else return null}let a=i,u=(r=t)==null?void 0:r.errors;if(u!=null){let d=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);d>=0||Fe(!1),a=a.slice(0,Math.min(a.length,d+1))}let h=!1,p=-1;if(t&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let g=a[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=d),g.route.id){let{loaderData:v,errors:w}=t,S=g.route.loader&&v[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||S){h=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}return a.reduceRight((d,g,v)=>{let w,S=!1,k=null,b=null;t&&(w=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||qT,h&&(p<0&&v===0?(tP("route-fallback"),S=!0,b=null):p===v&&(S=!0,b=g.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,v+1)),N=()=>{let z;return w?z=k:S?z=b:g.route.Component?z=W.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=d,W.createElement(YT,{match:g,routeContext:{outlet:d,matches:A,isDataRoute:t!=null},children:z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?W.createElement(GT,{location:t.location,revalidation:t.revalidation,component:k,error:w,children:N(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):N()},null)}var bx=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(bx||{}),Cx=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(Cx||{});function XT(i){let e=W.useContext(wc);return e||Fe(!1),e}function JT(i){let e=W.useContext(wx);return e||Fe(!1),e}function ZT(i){let e=W.useContext(Cr);return e||Fe(!1),e}function Mx(i){let e=ZT(),t=e.matches[e.matches.length-1];return t.route.id||Fe(!1),t.route.id}function Ex(){var i;let e=W.useContext(xx),t=JT(Cx.UseRouteError),n=Mx();return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function eP(){let{router:i}=XT(bx.UseNavigateStable),e=Mx(),t=W.useRef(!1);return Sx(()=>{t.current=!0}),W.useCallback(function(r,o){o===void 0&&(o={}),t.current&&(typeof r=="number"?i.navigate(r):i.navigate(r,sc({fromRouteId:e},o)))},[i,e])}const av={};function tP(i,e,t){av[i]||(av[i]=!0)}function nP(i){return UT(i.context)}function iP(i){let{basename:e="/",children:t=null,location:n,navigationType:r=vt.Pop,navigator:o,static:a=!1,future:u}=i;$l()&&Fe(!1);let h=e.replace(/^\/*/,"/"),p=W.useMemo(()=>({basename:h,navigator:o,static:a,future:sc({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof n=="string"&&(n=zi(n));let{pathname:d="/",search:g="",hash:v="",state:w=null,key:S="default"}=n,k=W.useMemo(()=>{let b=ao(d,h);return b==null?null:{location:{pathname:b,search:g,hash:v,state:w,key:S},navigationType:r}},[h,d,g,v,w,S,r]);return k==null?null:W.createElement(us.Provider,{value:p},W.createElement(Sp.Provider,{children:t,value:k}))}new Promise(()=>{});function rP(i){let e={hasErrorBoundary:i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&Object.assign(e,{element:W.createElement(i.Component),Component:void 0}),i.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:W.createElement(i.HydrateFallback),HydrateFallback:void 0}),i.ErrorBoundary&&Object.assign(e,{errorElement:W.createElement(i.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Il(){return Il=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Il.apply(this,arguments)}function sP(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function oP(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function lP(i,e){return i.button===0&&(!e||e==="_self")&&!oP(i)}const aP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],uP="6";try{window.__reactRouterVersion=uP}catch{}function cP(i,e){return kT({basename:void 0,future:Il({},void 0,{v7_prependBasename:!0}),history:$D({window:void 0}),hydrationData:hP(),routes:i,mapRouteProperties:rP,unstable_dataStrategy:void 0,window:void 0}).initialize()}function hP(){var i;let e=(i=window)==null?void 0:i.__staticRouterHydrationData;return e&&e.errors&&(e=Il({},e,{errors:fP(e.errors)})),e}function fP(i){if(!i)return null;let e=Object.entries(i),t={};for(let[n,r]of e)if(r&&r.__type==="RouteErrorResponse")t[n]=new yp(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let o=window[r.__subType];if(typeof o=="function")try{let a=new o(r.message);a.stack="",t[n]=a}catch{}}if(t[n]==null){let o=new Error(r.message);o.stack="",t[n]=o}}else t[n]=r;return t}const dP=W.createContext({isTransitioning:!1}),pP=W.createContext(new Map),mP="startTransition",uv=yk[mP],gP="flushSync",cv=UD[gP];function yP(i){uv?uv(i):i()}function ol(i){cv?cv(i):i()}class vP{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}}function wP(i){let{fallbackElement:e,router:t,future:n}=i,[r,o]=W.useState(t.state),[a,u]=W.useState(),[h,p]=W.useState({isTransitioning:!1}),[d,g]=W.useState(),[v,w]=W.useState(),[S,k]=W.useState(),b=W.useRef(new Map),{v7_startTransition:A}=n||{},N=W.useCallback(M=>{A?yP(M):M()},[A]),z=W.useCallback((M,ne)=>{let{deletedFetchers:Y,unstable_flushSync:re,unstable_viewTransitionOpts:se}=ne;Y.forEach(fe=>b.current.delete(fe)),M.fetchers.forEach((fe,pe)=>{fe.data!==void 0&&b.current.set(pe,fe.data)});let te=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!se||te){re?ol(()=>o(M)):N(()=>o(M));return}if(re){ol(()=>{v&&(d&&d.resolve(),v.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:se.currentLocation,nextLocation:se.nextLocation})});let fe=t.window.document.startViewTransition(()=>{ol(()=>o(M))});fe.finished.finally(()=>{ol(()=>{g(void 0),w(void 0),u(void 0),p({isTransitioning:!1})})}),ol(()=>w(fe));return}v?(d&&d.resolve(),v.skipTransition(),k({state:M,currentLocation:se.currentLocation,nextLocation:se.nextLocation})):(u(M),p({isTransitioning:!0,flushSync:!1,currentLocation:se.currentLocation,nextLocation:se.nextLocation}))},[t.window,v,d,b,N]);W.useLayoutEffect(()=>t.subscribe(z),[t,z]),W.useEffect(()=>{h.isTransitioning&&!h.flushSync&&g(new vP)},[h]),W.useEffect(()=>{if(d&&a&&t.window){let M=a,ne=d.promise,Y=t.window.document.startViewTransition(async()=>{N(()=>o(M)),await ne});Y.finished.finally(()=>{g(void 0),w(void 0),u(void 0),p({isTransitioning:!1})}),w(Y)}},[N,a,d,t.window]),W.useEffect(()=>{d&&a&&r.location.key===a.location.key&&d.resolve()},[d,v,r.location,a]),W.useEffect(()=>{!h.isTransitioning&&S&&(u(S.state),p({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),k(void 0))},[h.isTransitioning,S]),W.useEffect(()=>{},[]);let j=W.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:M=>t.navigate(M),push:(M,ne,Y)=>t.navigate(M,{state:ne,preventScrollReset:Y==null?void 0:Y.preventScrollReset}),replace:(M,ne,Y)=>t.navigate(M,{replace:!0,state:ne,preventScrollReset:Y==null?void 0:Y.preventScrollReset})}),[t]),F=t.basename||"/",$=W.useMemo(()=>({router:t,navigator:j,static:!1,basename:F}),[t,j,F]);return W.createElement(W.Fragment,null,W.createElement(wc.Provider,{value:$},W.createElement(wx.Provider,{value:r},W.createElement(pP.Provider,{value:b.current},W.createElement(dP.Provider,{value:h},W.createElement(iP,{basename:F,location:r.location,navigationType:r.historyAction,navigator:j,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},r.initialized||t.future.v7_partialHydration?W.createElement(xP,{routes:t.routes,future:t.future,state:r}):e))))),null)}function xP(i){let{routes:e,future:t,state:n}=i;return $T(e,void 0,n,t)}const SP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qs=W.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:p,preventScrollReset:d,unstable_viewTransition:g}=e,v=sP(e,aP),{basename:w}=W.useContext(us),S,k=!1;if(typeof p=="string"&&kP.test(p)&&(S=p,SP))try{let z=new URL(window.location.href),j=p.startsWith("//")?new URL(z.protocol+p):new URL(p),F=ao(j.pathname,w);j.origin===z.origin&&F!=null?p=F+j.search+j.hash:k=!0}catch{}let b=jT(p,{relative:r}),A=bP(p,{replace:a,state:u,target:h,preventScrollReset:d,relative:r,unstable_viewTransition:g});function N(z){n&&n(z),z.defaultPrevented||A(z)}return W.createElement("a",Il({},v,{href:S||b,onClick:k||o?n:N,ref:t,target:h}))});var hv;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(hv||(hv={}));var fv;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(fv||(fv={}));function bP(i,e){let{target:t,replace:n,state:r,preventScrollReset:o,relative:a,unstable_viewTransition:u}=e===void 0?{}:e,h=HT(),p=Kl(),d=kx(i,{relative:a});return W.useCallback(g=>{if(lP(g,t)){g.preventDefault();let v=n!==void 0?n:ls(p)===ls(d);h(i,{replace:v,state:r,preventScrollReset:o,relative:a,unstable_viewTransition:u})}},[p,h,d,n,r,t,i,o,a,u])}const CP="/assets/assembly-lines-1-DoOQWuga.png",MP="/assets/compiler-display-C0yjEIEB.png",EP="/assets/sipd-BK00cdTO.png";function AP(){return O.jsxs("div",{className:"center-container",children:[O.jsx("p",{children:"Here you can find links to code I've written (and, where applicable, links to use that code online). Only the first few are really usable by anyone who didn't write them, and the rest should probably be avoided unless you're morbidly curious."}),O.jsx("h1",{children:"Newer Projects"}),O.jsx("h2",{children:"Assembly Lines"}),O.jsx("img",{src:CP,className:"inline-image"}),O.jsx("p",{children:"This is an open-source, browser-based educational game, written in Javascript using the Playcanvas game engine. It's targeted at middle schoolers and early high schoolers. In it, you solve physics puzzles by graphing lines; that is, you write the equations of lines using a Desmos-style UI, and the lines you graph become ramps that you use to roll a ball into a goal."}),O.jsx("p",{children:" The game was developed in collaboration with some other math students as part of the 2024 Polymath Jr. REU, under the mentorship of Not-A-Bot Studios.Currently we're putting the finishing touches (mainly graphics and some general polish) on a demo version which will then be tested in schools. Once that's finished, I'll put a link here to a deployed version of the game, plus the code, which should eventually make it to GitHub (development was originally done with Playcanvas' built-in version control)."}),O.jsx("p",{children:' The demo has 28 levels total, divided into 4 worlds that progressively introduce more complicated mechanics. In the first, you just need to get a single ball into a single goal; in the second, you have to pass through "subgoals" along the way in a certain order; in the third, there are no subgoals, but there are multiple balls, each of which has to be guided into its own goal; and in the last, the mechanics from worlds 2 and 3 are combined.'}),O.jsx("p",{children:"This material is based upon work supported by the National Science Foundation under Grant No. 2015553."}),O.jsx("h2",{children:"RSA Demo Web App"}),O.jsx("p",{children:"This is an online demo of the RSA encryption system, with a frontend built in React and a serverless backend using AWS Lambda to call Python functions. It lets you play around with all the basic functionality of RSA-- key generation, encryption and decryption, digital signatures--and has a brief explanation of how it all works."}),O.jsx("p",{children:"The frontend was the first thing I ever wrote in React; the backend has an odd history--I wrote an older version of it as a standalone Python program a couple years ago, and more recently, I improved the key generation (with a better primality testing algorithm) and turned all the basic functions to AWS Lambda functions so they could serve as a lightweight backend for this."}),O.jsx("p",{children:O.jsx("a",{href:"/#/rsa",children:"It's hosted on this website, and you can try it out by clicking this link."})}),O.jsx("h2",{children:"WebAssembly Compiler"}),O.jsx("img",{src:MP,className:"inline-image"}),O.jsxs("p",{children:["As part of CSE 450, the undergraduate compilers elective at MSU, ",O.jsx("a",{href:"https://www.linkedin.com/in/rosespangler/",children:"Rose Spengler"}),", ",O.jsx("a",{href:"https://www.linkedin.com/in/lewianamo/",children:"Lewi Anamo"}),", and I wrote a simple imperative language which can be compiled to WebAssembly, via a compiler written in C++; it includes most of the basic functionality you'd expect from such a language (loops, conditionals, function definitions and calls, static types, etc.) and a number of built-in operations on numeric types and strings."]}),O.jsxs("p",{children:[`I've decided to continue work on it on my own, and plan to add more features (e.g. arrays for arbitrary types, a larger "standard library" of functions and operations, etc.) as well as a web-based frontend (most likely compiling the compiler itself to WebAssembly via Emscripten, and creating some kind of interface to allow the user to write, compile, and run code in their own browser). In the meantime, you can see the existing code on Github `,O.jsx("a",{href:"https://github.com/LukeBridges123/CompilerProject",children:"here"}),"."]}),O.jsx("h2",{children:"Spatial Iterated Prisoner's Dilemma"}),O.jsx("img",{src:EP,className:"inline-image"}),O.jsxs("p",{children:["This is a cellular-automaton-esque variant on the classic prisoner's dilemma, implemented in Python via Pygame and hosted online using the Pygbag library. The SIPD, which I learned about in Gary William Flake's book ",O.jsx("i",{children:"The Computational Beauty of Nature"}),`, is played on a square grid like Conway's Game of Life, with each cell containing a certain strategy (e.g. "always cooperate", "always defect", "tit-for-tat", etc.). Strategies play the iterated prisoner's dilemma against each their neighbors, then switch to the strategy used by whichever neighboring square won the most points in its games.`]}),O.jsxs("p",{children:["Currently, this is under construction; much of the underlying logic has been already written, and I already have a basic UI which can be run in a web browser. The main things left to be done are improving and adding to the UI so that the user can control some of the main parameters of the simulation, refactoring some of the Pygame code (the fundamentals in Python are already decently solid, but the Pygame code used to run the display is a bit messy), and actually hosting it online (probably on itch.io, which can handle Pygbag projects.) The code is ",O.jsx("a",{href:"https://github.com/lukeBridges123/SIPD",children:"here"}),", though bear in mind that it's unfinished."]}),O.jsx("h1",{children:"Older Projects"}),O.jsx("h2",{children:"Symbolic Calculus"}),O.jsx("p",{children:"This was an attempt to write a fragment of a computer algebra system (like Wolfram Alpha or Sympy) in Scheme/Racket. The result is capable of symbolically differentiating basically anything built out of elementary functions (polynomials, trigonometric functions, exp and log, etc. combined in the usual ways), finding partial sums of the Taylor series of the same, and doing a few integrals and a smidge of vector calculus. All this was built on top of a system for handling algebraic expressions which included lots of rules for simplifying them, along with the ability to evaluate them at given values and even turn them into executable functions."}),O.jsxs("p",{children:["Development stalled out before I implemented anything like an user interface, and the final version has annoying limitations (e.g. all expressions need to be fully parenthesized). Still, what's there does work. You can find the code for it ",O.jsx("a",{href:"https://github.com/LukeBridges123/scheme_symbolic_math",children:"here, on my Github"}),"."]}),O.jsx("h2",{children:"Scheme Interpreter"}),O.jsxs("p",{children:["This was an interpreter for the Scheme programming language, written in Racket. It was based heavily on the interpreter described in",O.jsx("i",{children:"Structure and Interpretation of Computer Programs"}),", though with some additions and optimizations (e.g. using Racket's hash tables to store variable-value mappings, where the original has just used lists of pairs). It works well enough for what it is, and I enjoyed writing it, but it's definitely half-baked and unfinished, and I'm only putting it here for completeness. See ",O.jsx("a",{href:"https://github.com/LukeBridges123/scheme_interpreter",children:"here"})," for the code."]})]})}function DP(){return O.jsxs("div",{className:"center-container",children:[O.jsx("p",{children:"My name is Luke Bridges; I am a junior at Michigan State University, double-majoring in mathematics and computer science. This website (currently under construction) is meant as a portfolio to host my personal coding projects."}),O.jsxs("p",{children:["You can use the tabs above to see some of the work I've done, or check out my ",O.jsx("a",{href:"https://www.linkedin.com/in/luke-bridges-425127235/",children:"Linkedin"})," or ",O.jsx("a",{href:"https://github.com/LukeBridges123/",children:"Github"}),". I've also put much of my resume below, though you'll have to go to the ",O.jsx(Qs,{to:"/code",children:"the Code tab above"})," for descriptions of personal projects."]}),O.jsx("h1",{children:"Experience"}),O.jsx("h2",{children:"Supervisor  MSU Math Learning Center (Sep. 2024-Present)"}),O.jsxs("ul",{children:[O.jsx("li",{children:"Led and supervised a team of tutors to ensure that students got matched with tutors in a timely manner. "}),O.jsx("li",{children:"Provided additional tutoring to help tutors who were stuck and students who couldn't get tutoring from anyone else during busy periods."})]}),O.jsx("h2",{children:"Game Developer  Not-a-Bot Studios (Jun. 2024-Sep. 2024)"}),O.jsxs("ul",{children:[O.jsx("li",{children:"Designed and programmed in Javascript, through the PlayCanvas engine, a feature-complete demo of an open-source, web-based game for math education, to be released as part of a platform serving over 20 schools."}),O.jsx("li",{children:"Wrote significant portions of the code for the games underlying mechanics, designed and implemented 7 out of 28 of the levels in the demo, and implemented another 14."}),O.jsxs("li",{children:["See also ",O.jsx(Qs,{to:"/code",children:"the Code page here"})," for more information."]})]}),O.jsx("h2",{children:"Student Course Assistant  MSU Department of Mathematics (Aug. 2023-Apr. 2024)"}),O.jsxs("ul",{children:[O.jsx("li",{children:"Worked with another student under a professor to prepare over 175 total pages of typed lecture notes for an honors linear algebra class."}),O.jsx("li",{children:"Developed substantial additional material on topics not covered in the lectures, created worked examples (amounting to over 50 pages of new content), and typeset old handwritten notes in LaTeX."})]}),O.jsx("h2",{children:"Researcher  Michigan State University (May 2023-Jul. 2023)"}),O.jsxs("ul",{children:[O.jsx("li",{children:"Collaborated with students from several other universities to research recursive polynomial sequences, including related problems from analysis and combinatorics."}),O.jsx("li",{children:"Delivered regular presentations on our research to faculty mentors and representatives of our sponsors at the NSA, presented at the Joint Mathematics Meetings conference, and drafted a paper"}),O.jsx("li",{children:"Wrote Python code in Sympy and Matplotlib to generate data for forming and testing conjectures and plots for our presentations."}),O.jsxs("li",{children:["See also ",O.jsx(Qs,{to:"/math",children:"the Math page here"})," for more information."]})]}),O.jsx("h2",{children:"Student Library Assistant  MSU Libraries (Aug. 2022-Present)"}),O.jsx("ul",{children:O.jsx("li",{children:"Aided library patrons with research, answered questions about the library's policies and collections, provided technical support for electronic resource access, and redirected questions to other people and departments in the library when necessary."})})]})}const TP="/assets/jmm-poster-BmXDgxtD.png";function PP(){return O.jsxs("div",{className:"center-container",children:[O.jsx("p",{children:"As part of the SURIEM REU (Summer Undergraduate Research Institute in Experimental Mathematics) at Michigan State, I worked in collaboration with fellow undergraduates Max Budnick, Zach Martin, and Janine Wang, under the direction of Dr. Aklilu Zeleke and Peikai Qi, on research into recursive polynomial sequences: that is, sequences of polynomials defined by recurrence relations similar to the one that defines the Fibonacci numbers. Below, I've put an image of the poster we presented at the 2024 Joint Mathematics Meetings if you'd like to know more."}),O.jsx("img",{src:TP,width:"100%"})]})}function RP(){const{pathname:i}=Kl();return W.useEffect(()=>{window.scrollTo(0,0)},[i]),null}function OP(){return O.jsxs(O.Fragment,{children:[O.jsx(LP,{}),O.jsxs("div",{class:"pagebody",children:[O.jsx(RP,{}),O.jsx(nP,{})]})]})}function LP(){return O.jsxs("div",{className:"navbar",children:[O.jsx("p",{style:{color:"white",padding:"1em"},children:"Luke Bridges' Page"}),O.jsx(Qs,{to:"/",children:O.jsx("button",{className:"navbar-button",children:"About"})}),O.jsx(Qs,{to:"code",children:O.jsx("button",{className:"navbar-button",children:"Code"})}),O.jsx(Qs,{to:"math",children:O.jsx("button",{className:"navbar-button",children:"Math"})})]})}function NP(){const i=Ex();return console.error(i),O.jsxs(O.Fragment,{children:[O.jsx("p",{children:"An error has occured."}),O.jsx("p",{children:i.statusText||i.message})]})}const BP=cP([{path:"/",element:O.jsx(OP,{}),errorElement:O.jsx(NP,{}),children:[{path:"rsa",element:O.jsx(Dk,{})},{path:"compiler",element:O.jsx(VD,{})},{path:"/",element:O.jsx(DP,{})},{path:"code",element:O.jsx(AP,{})},{path:"math",element:O.jsx(PP,{})}]}]),IP=kk.createRoot(document.getElementById("root"));IP.render(O.jsx(W.StrictMode,{children:O.jsx(wP,{router:BP})}));
